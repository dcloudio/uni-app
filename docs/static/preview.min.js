$docsify.Preview=function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.show=function(){r.buffMove=3,r.buffScale=2,r.finger=!1;var a=document.createElement("div");a.setAttribute("class","doc-preview"),a.innerHTML='<div class="preview-wrap"><img src="" class="preview-img"/></div>',document.body.appendChild(a);var s=document.querySelector(".preview-img"),o=document.querySelector(".preview-wrap");r._destroy(),(r.zoomMask=a).addEventListener("click",r.close,!1),window.addEventListener("keydown",r.close),s.setAttribute("src",r.src),s.onload=function(e){var t=s.naturalHeight,i=s.naturalWidth,n=t/i;i>window.innerWidth&&(t=(i=window.innerWidth)*n),t>window.innerHeight&&(i=(t=window.innerHeight)/n),a.style.cssText="display:block",s.style.cssText="visibility:inherit;",o.style.cssText="display:block;width:"+i+"px;height:"+t+"px;top:50%;left:50%;transform:translate(-50%,-50%);",a.addEventListener("touchmove",function(e){e.stopPropagation(),e.preventDefault()},!1),r.imgBaseWidth=i,r.imgBaseHeight=t,r.addEventStart({wrapX:i,wrapY:t,mapX:i,mapY:t})}},this.close=function(e){e&&"keydown"===e.type?e.keyCode&&27===e.keyCode&&(document.body.removeChild(r.zoomMask),r._destroy(),window.removeEventListener("keydown",r.close)):(document.body.removeChild(r.zoomMask),r._destroy(),window.removeEventListener("keydown",r.close))},this.addEventStart=function(e){var t=e||{};r.element=document.querySelector(".preview-img"),r.wrapX=t.wrapX||0,r.wrapY=t.wrapY||0,r.mapX=t.mapX||0,r.mapY=t.mapY||0,r.outDistY=(r.mapY-r.wrapY)/2,r.width=r.mapX-r.wrapX,r.height=r.mapY-r.wrapY,r.element.addEventListener("touchstart",function(e){r._touchstart(e)},!0),r.element.addEventListener("touchmove",function(e){r._touchmove(e)},!0),r.element.addEventListener("touchend",function(e){r._touchend(e)},!0)},this._destroy=function(){r.scale=1,r.distX=0,r.distY=0,r.newX=0,r.newY=0},this._changeData=function(){r.mapX=r.element.offsetWidth,r.mapY=r.element.offsetHeight,r.width=r.mapX-r.wrapX,r.height=r.mapY-r.wrapY},this._touchstart=function(e){r.tap={type:!0,time:(new Date).getTime()},e.preventDefault(),e.stopPropagation();var t=e.targetTouches.length;r._changeData(),1==t?(r.basePageX=r._getPage(e,"pageX"),r.basePageY=r._getPage(e,"pageY"),r.finger=!1):(r.finger=!0,r.startFingerDist=r.getTouchDist(e).dist,r.startFingerX=r.getTouchDist(e).x,r.startFingerY=r.getTouchDist(e).y,console.log(r.startFingerY))},this._touchmove=function(e){e.preventDefault(),e.stopPropagation();var t=e.targetTouches.length;if(1==t&&!r.finger){r._move(e);var i=r._getPage(e,"pageX"),n=r._getPage(e,"pageY");(4<Math.abs(i-r.basePageX)||4<Math.abs(n-r.basePageY))&&(r.tap.type=!1)}2<=t&&r._zoom(e)},this._touchend=function(e){r.tap.type&&(new Date).getTime()-r.tap.time<200?r.close():(r._changeData(),r.finger&&(r.distX=-r.imgNewX,r.distY=-r.imgNewY),0<r.distX?r.newX=0:r.distX<=0&&r.distX>=-r.width?(r.newX=r.distX,r.newY=r.distY):r.distX<-r.width&&(r.newX=-r.width),r.reset())},this._move=function(e){var t=this._getPage(e,"pageX"),i=this._getPage(e,"pageY");r.distX=t-r.basePageX+r.newX,r.distY=i-r.basePageY+r.newY,0<r.distX?r.moveX=Math.round(r.distX/r.buffMove):r.distX<=0&&r.distX>=-r.width?r.moveX=r.distX:r.distX<-r.width&&(r.moveX=-r.width+Math.round((r.distX+r.width)/r.buffMove)),r.movePos(),r.finger=!1},this._zoom=function(e){var t=r.getTouchDist(e).dist/r.startFingerDist,i=Math.round(r.mapX*t);Math.round(r.mapY*t),r.imgNewX=Math.round(r.startFingerX*t-r.startFingerX-r.newX*t),r.imgNewY=Math.round((r.startFingerY*t-r.startFingerY)/2-r.newY*t),i>=r.imgBaseWidth?(r.element.style.width=i+"px",r.scale=i/r.imgBaseWidth,r.refresh(-r.imgNewX,-r.imgNewY,"0s","ease"),r.finger=!0):i<r.imgBaseWidth&&(r.scale=1,r.element.style.width=r.imgBaseWidth+"px",r.refresh(0,0,"0s","ease")),r.finger=!0},this.movePos=function(){if(r.height<0)if(r.element.offsetWidth==r.imgBaseWidth)r.moveY=Math.round(r.distY/r.buffMove);else{var e=Math.round((r.element.offsetHeight-r.imgBaseHeight)/2);r.moveY=-e+Math.round((r.distY+e)/r.buffMove)}else{var t=Math.round((r.wrapY-r.imgBaseHeight)/2),i=r.element.offsetHeight-r.wrapY+Math.round(r.wrapY-r.imgBaseHeight)/2;r.distY>=-t?r.moveY=Math.round((r.distY+t)/r.buffMove)-t:r.distY<=-i?r.moveY=Math.round((r.distY+i)/r.buffMove)-i:r.moveY=r.distY}r.refresh(r.moveX,r.moveY,"0s","ease")},this.reset=function(){if(r.height<0)r.newY=-Math.round(r.element.offsetHeight-r.imgBaseHeight)/2;else{var e=Math.round((r.wrapY-r.imgBaseHeight)/2),t=r.element.offsetHeight-r.wrapY+Math.round(r.wrapY-r.imgBaseHeight)/2;r.distY>=-e?r.newY=-e:r.distY<=-t?r.newY=-t:r.newY=r.distY}r.refresh(r.newX,r.newY,".2s","ease-in-out")},this.refresh=function(e,t,i,n){r.element.style.webkitTransitionProperty="-webkit-transform",r.element.style.webkitTransitionDuration=i,r.element.style.webkitTransitionTimingFunction=n,r.element.style.webkitTransform=r._getTranslate(e,t)},this.getTouchDist=function(e){var t,i,n,a,s=0,o=0;if(t=e.touches[0].pageX,n=e.touches[1].pageX,i=e.touches[0].clientY,a=e.touches[1].clientY,t&&n)return s=t<=n?(n-t)/2+t:(t-n)/2+n,o=i<=a?(a-i)/2+i:(i-a)/2+a,{dist:Math.round(Math.sqrt(Math.pow(t-n,2)+Math.pow(i-a,2))),x:Math.round(s),y:Math.round(o)}},this._getTranslate=function(e,t){var i=e,n=t;return r.support.transform3d?"translate3d("+i+"px, "+n+"px, 0)":"translate("+i+"px, "+n+"px)"},this._getPage=function(e,t){return r.support.touch?e.changedTouches[0][t]:e[t]},this.src=t,this.support={transform3d:"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,touch:"ontouchstart"in window}};