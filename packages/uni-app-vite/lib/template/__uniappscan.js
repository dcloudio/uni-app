"use weex:vue";
(()=>{var D=Object.create;var f=Object.defineProperty;var w=Object.getOwnPropertyDescriptor;var v=Object.getOwnPropertyNames;var S=Object.getPrototypeOf,y=Object.prototype.hasOwnProperty;var B=e=>f(e,"__esModule",{value:!0});var k=(e,a)=>()=>(a||e((a={exports:{}}).exports,a),a.exports);var O=(e,a,t,o)=>{if(a&&typeof a=="object"||typeof a=="function")for(let l of v(a))!y.call(e,l)&&(t||l!=="default")&&f(e,l,{get:()=>a[l],enumerable:!(o=w(a,l))||o.enumerable});return e},M=(e,a)=>O(B(f(e!=null?D(S(e)):{},"default",!a&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var m=k((U,d)=>{d.exports=Vue});var u={onLoad(){this.initMessage()},methods:{initMessage(){let{from:e,callback:a,runtime:t,data:o={},useGlobalEvent:l}=plus.webview.currentWebview().extras||{};this.__from=e,this.__runtime=t,this.__page=plus.webview.currentWebview().id,this.__useGlobalEvent=l,this.data=JSON.parse(JSON.stringify(o)),plus.key.addEventListener("backbutton",()=>{typeof this.onClose=="function"?this.onClose():plus.webview.currentWebview().close("auto")});let i=this,c=function(r){let g=r.data&&r.data.__message;!g||i.__onMessageCallback&&i.__onMessageCallback(g.data)};if(this.__useGlobalEvent)weex.requireModule("globalEvent").addEventListener("plusMessage",c);else{let r=new BroadcastChannel(this.__page);r.onmessage=c}},postMessage(e={},a=!1){let t=JSON.parse(JSON.stringify({__message:{__page:this.__page,data:e,keep:a}})),o=this.__from;if(this.__runtime==="v8")this.__useGlobalEvent?plus.webview.postMessageToUniNView(t,o):new BroadcastChannel(o).postMessage(t);else{let l=plus.webview.getWebviewById(o);l&&l.evalJS(`__plusMessage&&__plusMessage(${JSON.stringify({data:t})})`)}},onMessage(e){this.__onMessageCallback=e}}};var p={data(){return{locale:"en",fallbackLocale:"en",localization:{en:{done:"OK",cancel:"Cancel"},zh:{done:"\u5B8C\u6210",cancel:"\u53D6\u6D88"},"zh-hans":{},"zh-hant":{},messages:{}}}},onLoad(){this.initLocale()},created(){this.initLocale()},methods:{initLocale(){if(this.__initLocale)return;this.__initLocale=!0;let e=(plus.webview.currentWebview().extras||{}).data||{};if(e.messages&&(this.localization.messages=e.messages),e.locale){this.locale=e.locale.toLowerCase();return}let a={chs:"hans",cn:"hans",sg:"hans",cht:"hant",tw:"hant",hk:"hant",mo:"hant"},t=plus.os.language.toLowerCase().split("/")[0].replace("_","-").split("-"),o=t[1];o&&(t[1]=a[o]||o),t.length=t.length>2?2:t.length,this.locale=t.join("-")},localize(e){let a=this.locale,t=a.split("-")[0],o=this.fallbackLocale,l=this.localization;function i(c){return l[c]||{}}return i("messages")[e]||i(a)[e]||i(t)[e]||i(o)[e]||e}}};var n=M(m());var C=(e,a)=>{let t=e.__vccOpts||e;for(let[o,l]of a)t[o]=l;return t};var I={content:{"":{flex:1,alignItems:"center",justifyContent:"center",backgroundColor:"#000000"}},barcode:{"":{position:"absolute",left:0,top:0,right:0,bottom:0,zIndex:1}},"set-flash":{"":{alignItems:"center",justifyContent:"center",transform:"translateY(80px)",zIndex:2}},"image-flash":{"":{width:"26px",height:"26px",marginBottom:"2px"}},"image-flash-text":{"":{fontSize:"10px",color:"#FFFFFF"}}},s=plus.barcode,A={qrCode:[s.QR,s.AZTEC,s.MAXICODE],barCode:[s.EAN13,s.EAN8,s.UPCA,s.UPCE,s.CODABAR,s.CODE128,s.CODE39,s.CODE93,s.ITF,s.RSS14,s.RSSEXPANDED],datamatrix:[s.DATAMATRIX],pdf417:[s.PDF417]},N={[s.QR]:"QR_CODE",[s.EAN13]:"EAN_13",[s.EAN8]:"EAN_8",[s.DATAMATRIX]:"DATA_MATRIX",[s.UPCA]:"UPC_A",[s.UPCE]:"UPC_E",[s.CODABAR]:"CODABAR",[s.CODE39]:"CODE_39",[s.CODE93]:"CODE_93",[s.CODE128]:"CODE_128",[s.ITF]:"CODE_25",[s.PDF417]:"PDF_417",[s.AZTEC]:"AZTEC",[s.RSS14]:"RSS_14",[s.RSSEXPANDED]:"RSSEXPANDED"},T={mixins:[u,p],data:{filters:[0,2,1],backgroud:"#000000",frameColor:"#118ce9",scanbarColor:"#118ce9",enabledFlash:!1,flashImage0:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAABjklEQVRoQ+1ZbVHEQAx9TwE4ABTcOQAknANQAKcAUAAOAAXgAHAACsDCKQiTmbYDzJZtNt2bFrJ/m6+Xl2yyU2LmhzOPH/8PgIjcADirxNyapNoffMwMiMgzgMPBHmyCLySPLCoBwJKtAbJbYaBmD1yRvBwAtBMxl5DF+DZkiwCIyBLAzsgBbki+Wm2WAlCaL6zOMvKnJO+sNksB7ALQbO1ZHfbIv5FUVs2nCIB6EZETALdmj2mFY5I6X8ynGEADQllYmL1+VzBfnV/VvQB0aj45ARyQ/Ci14QLQsOBZLe5JaikWnzEA7AN4L4hgA2Dpyb76dANwsOCq/TZhASAYKGie0a7R1lDPI0ebtF0NUi+4yfdAtxr3PEMnD6BbD0QkNfACQO05EAwMuaBqDrIVycdmTpwDuP4R0OR7QFftVRP0g+49cwOQq4DJMxAAchmofY3m/EcJBQOZbTRKKJeBKKEoIePvpFRJ1VzmciUccyCa+C81cerBkuuB7sGTE/zt+yhN7AnAqxsAvBn06n8CkyPwMZKwm+UAAAAASUVORK5CYII=",flashImage1:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwBAMAAAClLOS0AAAAMFBMVEUAAAA3kvI3lfY2k/VAl+43k/U3k/Q4k/M3kvI3k/M4k/Q4lPU2lPU2k/Vdq843k/WWSpNKAAAAD3RSTlMAwD+QINCAcPBgUDDgoBAE044kAAAAdklEQVQ4y2OgOrD/DwffUSTkERIfyZXAtOMbca7iVoKDDSgSbAijJqBI8J2HiX9FM2s+TOITmgQrTEIATYIJJuEA5mJ68S+Gg/0hEi0YEoxQK2gs0WyPQyKBGYeEAhPtJRaw45AIccXpwVEJekuwQyQWMFAfAACeDBJY9aXa3QAAAABJRU5ErkJggg==",autoDecodeCharSet:!1,localization:{en:{fail:"Recognition failure","flash.on":"Tap to turn light on","flash.off":"Tap to turn light off"},zh:{fail:"\u8BC6\u522B\u5931\u8D25","flash.on":"\u8F7B\u89E6\u7167\u4EAE","flash.off":"\u8F7B\u89E6\u5173\u95ED"}}},onLoad(){let e=this.data,a=e.scanType;this.autoDecodeCharSet=e.autoDecodeCharSet;let t=[];Array.isArray(a)&&a.length&&a.forEach(o=>{let l=A[o];l&&(t=t.concat(l))}),t.length||(t=t.concat(A.qrCode).concat(A.barCode).concat(A.datamatrix).concat(A.pdf417)),this.filters=t,this.onMessage(o=>{this.gallery()})},onUnload(){this.cancel()},methods:{start(){this.$refs.barcode.start({conserve:!0,filename:"_doc/barcode/"})},scan(e){s.scan(e,(a,t,o,l)=>{this.scanSuccess(a,t,o,l)},()=>{plus.nativeUI.toast(this.localize("fail"))},this.filters,this.autoDecodeCharSet)},cancel(){this.$refs.barcode.cancel()},gallery(){plus.gallery.pick(e=>{this.scan(e)},e=>{e.code!==(weex.config.env.platform.toLowerCase()==="android"?12:-2)&&plus.nativeUI.toast(this.localize("fail"))},{multiple:!1,system:!1,filename:"_doc/uniapp_temp/gallery/",permissionAlert:!0})},onmarked(e){var a=e.detail;this.scanSuccess(a.code,a.message,a.file,a.charSet)},scanSuccess(e,a,t,o){this.postMessage({event:"marked",detail:{scanType:N[e],result:a,charSet:o||"utf8",path:t||""}})},onerror(e){this.postMessage({event:"fail",message:JSON.stringify(e)})},setFlash(){this.enabledFlash=!this.enabledFlash,this.$refs.barcode.setFlash(this.enabledFlash)}}};function F(e,a,t,o,l,i){let c=(0,n.resolveComponent)("barcode");return(0,n.openBlock)(),(0,n.createElementBlock)("view",{class:"content"},[(0,n.createVNode)(c,{class:"barcode",ref:"barcode",autostart:"true",backgroud:e.backgroud,frameColor:e.frameColor,scanbarColor:e.scanbarColor,filters:e.filters,autoDecodeCharset:e.autoDecodeCharSet,onMarked:i.onmarked,onError:i.onerror},null,8,["backgroud","frameColor","scanbarColor","filters","autoDecodeCharset","onMarked","onError"]),(0,n.createElementVNode)("view",{class:"set-flash",onClick:a[0]||(a[0]=(...r)=>i.setFlash&&i.setFlash(...r))},[(0,n.createElementVNode)("u-image",{class:"image-flash",src:e.enabledFlash?e.flashImage1:e.flashImage0,resize:"stretch"},null,8,["src"]),(0,n.createElementVNode)("u-text",{class:"image-flash-text",appendAsTree:!0},(0,n.toDisplayString)(e.enabledFlash?e.localize("flash.off"):e.localize("flash.on")),9,["appendAsTree"])])])}var h=C(T,[["render",F],["styles",[I]]]);var _=plus.webview.currentWebview(),P=parseInt(_.id),Q="template/__uniappscan",b={};try{b=JSON.parse(_.__query__)}catch{}h.mpType="page";var E=Vue.createPageApp(h,{$store:getApp().$store,__pageId:P,__pagePath:Q,__pageQuery:b});E.provide("__globalStyles",Vue.useCssStyles([...__uniConfig.styles,...h.styles||[]]));E.mount("#root");})();
