{"version":3,"sources":["uni_modules/uni-upgrade-center-app/pages/uni-app-x/upgrade-popup.uvue"],"sourcesContent":["<template>\n\t<view class=\"mask flex-center\">\n\t\t<view class=\"content\">\n\t\t\t<view class=\"content-top\">\n\t\t\t\t<text class=\"content-top-text\">{{title}}</text>\n\t\t\t\t<image class=\"content-top-image\" mode=\"widthFix\"\n\t\t\t\t\tsrc=\"/uni_modules/uni-upgrade-center-app/static/app/bg_top.png\"></image>\n\t\t\t</view>\n\n\t\t\t<view class=\"content-space\"></view>\n\n\t\t\t<view class=\"content-body\">\n\t\t\t\t<view class=\"content-body-title\">\n\t\t\t\t\t<text class=\"text title\">{{subTitle}}</text>\n\t\t\t\t\t<text class=\"text version\">v{{version}}</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"body\">\n\t\t\t\t\t<scroll-view class=\"box-des-scroll\" scroll-y=\"true\">\n\t\t\t\t\t\t<text class=\"text box-des\">\n\t\t\t\t\t\t\t{{contents}}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</scroll-view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"footer flex-center\">\n\t\t\t\t\t<template v-if=\"isiOS\">\n\t\t\t\t\t\t<button class=\"content-button\" style=\"border: none;color: #fff;\" plain @click=\"jumpToAppStore\">\n\t\t\t\t\t\t\t{{downLoadBtnTextiOS}}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<template v-if=\"!downloadSuccess\">\n\t\t\t\t\t\t\t<view class=\"progress-box flex-column\" v-if=\"downloading\">\n\t\t\t\t\t\t\t\t<progress class=\"progress\" :percent=\"downLoadPercent\" activeColor=\"#3DA7FF\"\n\t\t\t\t\t\t\t\t\t:show-info=\"true\" :stroke-width=\"10\" />\n\t\t\t\t\t\t\t\t<view\n\t\t\t\t\t\t\t\t\tstyle=\"width:100%;display: flex;justify-content: space-around;flex-direction: row;\">\n\t\t\t\t\t\t\t\t\t<text class=\"text\" style=\"font-size: 14px;\">{{downLoadingText}}</text>\n\t\t\t\t\t\t\t\t\t<text class=\"text\"\n\t\t\t\t\t\t\t\t\t\tstyle=\"font-size: 14px;\">({{downloadedSize}}/{{packageFileSize}}M)</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t<button v-else class=\"content-button\" @click=\"updateApp\">\n\t\t\t\t\t\t\t\t{{downLoadBtnText}}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t<button v-else-if=\"downloadSuccess && !installed\" class=\"content-button\" :loading=\"installing\"\n\t\t\t\t\t\t\t:disabled=\"installing\" @click=\"installPackage\">\n\t\t\t\t\t\t\t{{installing ? '正在安装……' : '下载完成，立即安装'}}\n\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t<button v-else-if=\"installed\" class=\"content-button\" @click=\"installPackage\">\n\t\t\t\t\t\t\t安装未完成，点击安装\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</template>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<view class=\"content-bottom\">\n\t\t\t\t<image v-if=\"!is_mandatory\" class=\"close-img\" mode=\"widthFix\"\n\t\t\t\t\tsrc=\"/uni_modules/uni-upgrade-center-app/static/app/app_update_close.png\" @click=\"closeUpdate\">\n\t\t\t\t</image>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\timport { openSchema as utsOpenSchema } from '@/uni_modules/uts-openSchema'\n\timport { createNotificationProgress, cancelNotificationProgress, finishNotificationProgress } from '@/uni_modules/uts-progressNotification'\n\timport { type CreateNotificationProgressOptions, type FinishNotificationProgressOptions } from '@/uni_modules/uts-progressNotification/utssdk/interface.uts'\n\timport { UniUpgradeCenterResult, StoreListItem } from '../../utils/call-check-version'\n  \timport { platform_iOS, platform_Android } from '../../utils/utils'\n\tconst requiredKey = ['version', 'url', 'type']\n\tlet downloadTask : DownloadTask | null = null;\n\tlet openSchemePromise : Promise<boolean> | null = null;\n\n\tconst openSchema = (url : string) : Promise<boolean> => new Promise<boolean>((resolve, reject) => {\n\t\ttry {\n\t\t\tutsOpenSchema(url)\n\t\t\tresolve(true)\n\t\t} catch (e) {\n\t\t\treject(false)\n\t\t}\n\t})\n\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\t// 从之前下载安装\n\t\t\t\tinstallForBeforeFilePath: '',\n\n\t\t\t\t// 安装\n\t\t\t\tinstalled: false,\n\t\t\t\tinstalling: false,\n\n\t\t\t\t// 下载\n\t\t\t\tdownloadSuccess: false,\n\t\t\t\tdownloading: false,\n\n\t\t\t\tdownLoadPercent: 0,\n\t\t\t\tdownloadedSize: 0,\n\t\t\t\tpackageFileSize: 0,\n\n\t\t\t\ttempFilePath: '', // 要安装的本地包地址\n\n\t\t\t\t// 默认安装包信息\n\t\t\t\ttitle: '更新日志',\n\t\t\t\tcontents: '',\n\t\t\t\tversion: '',\n\t\t\t\tis_mandatory: false,\n\t\t\t\turl: \"\",\n\t\t\t\tplatform: [] as string[],\n\t\t\t\tstore_list: null as StoreListItem[] | null,\n\n\t\t\t\t// 可自定义属性\n\t\t\t\tsubTitle: '发现新版本',\n\t\t\t\tdownLoadBtnTextiOS: '立即跳转更新',\n\t\t\t\tdownLoadBtnText: '立即下载更新',\n\t\t\t\tdownLoadingText: '安装包下载中，请稍后'\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\tisiOS() : boolean {\n\t\t\t\treturn this.platform.includes(platform_iOS);\n\t\t\t},\n\t\t\tisAndroid() : boolean {\n\t\t\t\treturn this.platform.includes(platform_Android);\n\t\t\t},\n\t\t\tneedNotificationProgress() : boolean {\n\t\t\t\treturn this.isAndroid && !this.is_mandatory\n\t\t\t}\n\t\t},\n\t\tonUnload() {\n\t\t\tif (this.needNotificationProgress) {\n\t\t\t\tcancelNotificationProgress()\n\t\t\t}\n\t\t},\n\t\tonLoad(onLoadOptions: OnLoadOptions) {\n\t\t\tconst local_storage_key: string | null = onLoadOptions['local_storage_key']\n\t\t\tif (local_storage_key == null) {\n\t\t\t\tconsole.error('local_storage_key为空，请检查后重试')\n\t\t\t\tthis.closePopup()\n\t\t\t\treturn;\n\t\t\t};\n\n\t\t\tconst localPackageInfo = uni.getStorageSync(local_storage_key);\n\t\t\tif (localPackageInfo == null) {\n\t\t\t\tconsole.error('安装包信息为空，请检查后重试')\n\t\t\t\tthis.closePopup()\n\t\t\t\treturn;\n\t\t\t};\n\n\t\t\tthis.show(JSON.parse<UniUpgradeCenterResult>(JSON.stringify(localPackageInfo)) as UniUpgradeCenterResult)\n\t\t},\n\t\tonBackPress(options : OnBackPressOptions) : boolean | null {\n\t\t\tif (this.is_mandatory) return true\n\t\t\tif (!this.needNotificationProgress) {\n\t\t\t\tif (downloadTask !== null) {\n\t\t\t\t\tdownloadTask!.abort()\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false\n\t\t},\n\t\tmethods: {\n\t\t\tjumpToAppStore() {\n\t\t\t\topenSchema(this.url)\n\t\t\t},\n\t\t\tshow(localPackageInfo : UniUpgradeCenterResult | null) {\n\t\t\t\tif (localPackageInfo === null) return;\n\n\t\t\t\tfor (let key in localPackageInfo) {\n\t\t\t\t\tif (requiredKey.indexOf(key) != -1 && localPackageInfo[key] === null) {\n\t\t\t\t\t\tconsole.error(`参数 ${key} 必填，请检查后重试`)\n\t\t\t\t\t\tthis.closePopup()\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.title = localPackageInfo.title\n\t\t\t\tthis.url = localPackageInfo.url\n\t\t\t\tthis.contents = localPackageInfo.contents\n\t\t\t\tthis.is_mandatory = localPackageInfo.is_mandatory\n\t\t\t\tthis.platform = localPackageInfo.platform\n\t\t\t\tthis.version = localPackageInfo.version\n\t\t\t\tthis.store_list = localPackageInfo.store_list\n\t\t\t},\n\t\t\taskAbortDownload() {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '是否取消下载？',\n\t\t\t\t\tcancelText: '否',\n\t\t\t\t\tconfirmText: '是',\n\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\tif (downloadTask !== null) downloadTask!.abort()\n\t\t\t\t\t\t\tthis.closePopup()\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tcloseUpdate() {\n\t\t\t\tif (this.downloading && !this.needNotificationProgress) {\n\t\t\t\t\tthis.askAbortDownload()\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.closePopup()\n\t\t\t},\n\t\t\tclosePopup() {\n\t\t\t\tthis.downloadSuccess = false\n\t\t\t\tthis.downloading = false\n\t\t\t\tthis.downLoadPercent = 0\n\t\t\t\tthis.downloadedSize = 0\n\t\t\t\tthis.packageFileSize = 0\n\t\t\t\tthis.tempFilePath = ''\n\n\t\t\t\tthis.installing = false\n\t\t\t\tthis.installed = false\n\n\t\t\t\tuni.closeDialogPage({\n\t\t\t\t\tdialogPage: this.$page\n\t\t\t\t})\n\t\t\t},\n\t\t\tupdateApp() {\n\t\t\t\tconst checkStoreScheme = this.checkStoreScheme()\n\t\t\t\tif (checkStoreScheme !== null) {\n\t\t\t\t\tcheckStoreScheme\n\t\t\t\t\t\t.then(_ => { })\n\t\t\t\t\t\t.catch(() => { this.downloadPackage() })\n\t\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\t\topenSchemePromise = null\n\t\t\t\t\t\t})\n\t\t\t\t} else { this.downloadPackage() }\n\t\t\t},\n\t\t\t// 跳转应用商店\n\t\t\tcheckStoreScheme() : Promise<boolean> | null {\n\t\t\t\tif (this.store_list !== null) {\n\t\t\t\t\tconst storeList : StoreListItem[] = this.store_list!.filter((item : StoreListItem) : boolean => item.enable)\n\t\t\t\t\tif (storeList.length > 0) {\n\t\t\t\t\t\tif (openSchemePromise === null) {\n\t\t\t\t\t\t\topenSchemePromise = Promise.reject() as Promise<boolean>\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstoreList\n\t\t\t\t\t\t\t.sort((cur : StoreListItem, next : StoreListItem) : number => next.priority - cur.priority)\n\t\t\t\t\t\t\t.map((item : StoreListItem) : string => item.scheme)\n\t\t\t\t\t\t\t.reduce((promise : Promise<boolean>, cur : string) : Promise<boolean> => {\n\t\t\t\t\t\t\t\topenSchemePromise = promise.catch<boolean>(() : Promise<boolean> => openSchema(cur))\n\t\t\t\t\t\t\t\treturn openSchemePromise!\n\t\t\t\t\t\t\t}, openSchemePromise!)\n\t\t\t\t\t\treturn openSchemePromise!\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null\n\t\t\t},\n\t\t\tdownloadPackage() {\n\t\t\t\t//下载包\n\t\t\t\tdownloadTask = uni.downloadFile({\n\t\t\t\t\turl: this.url,\n\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\tif (res.statusCode == 200) {\n\t\t\t\t\t\t\tthis.tempFilePath = res.tempFilePath\n\t\t\t\t\t\t\tthis.downLoadComplete()\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: err => {\n\t\t\t\t\t\tconsole.log('downloadFile err: ', err);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (downloadTask !== null) {\n\t\t\t\t\tthis.downloading = true;\n\t\t\t\t\tif (this.needNotificationProgress) {\n\t\t\t\t\t\tthis.closePopup()\n\t\t\t\t\t}\n\t\t\t\t\tdownloadTask!.onProgressUpdate(res => {\n\t\t\t\t\t\tthis.downLoadPercent = parseFloat(res.progress.toFixed(0));\n\t\t\t\t\t\tthis.downloadedSize = parseFloat((res.totalBytesWritten / Math.pow(1024, 2)).toFixed(2));\n\t\t\t\t\t\tthis.packageFileSize = parseFloat((res.totalBytesExpectedToWrite / Math.pow(1024, 2)).toFixed(2));\n\n\t\t\t\t\t\tif (this.needNotificationProgress) {\n\t\t\t\t\t\t\tcreateNotificationProgress({\n\t\t\t\t\t\t\t\ttitle: \"升级中心正在下载安装包……\",\n\t\t\t\t\t\t\t\tcontent: `${this.downLoadPercent}%`,\n\t\t\t\t\t\t\t\tprogress: this.downLoadPercent,\n\t\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\t\tif (!this.downloadSuccess) {\n\t\t\t\t\t\t\t\t\t\tthis.askAbortDownload()\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} as CreateNotificationProgressOptions)\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tdownLoadComplete() {\n\t\t\t\tthis.downloadSuccess = true;\n\t\t\t\tthis.downloading = false;\n\n\t\t\t\tthis.downLoadPercent = 0\n\t\t\t\tthis.downloadedSize = 0\n\t\t\t\tthis.packageFileSize = 0\n\n\t\t\t\tdownloadTask = null;\n\n\t\t\t\tif (this.needNotificationProgress) {\n\t\t\t\t\tfinishNotificationProgress({\n\t\t\t\t\t\ttitle: \"安装升级包\",\n\t\t\t\t\t\tcontent: \"下载完成\",\n\t\t\t\t\t\tonClick() { }\n\t\t\t\t\t} as FinishNotificationProgressOptions)\n\n\t\t\t\t\tthis.installPackage();\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\t// 强制更新，直接安装\n\t\t\t\tif (this.is_mandatory) {\n\t\t\t\t\tthis.installPackage();\n\t\t\t\t}\n\t\t\t},\n\t\t\tinstallPackage() {\n\t\t\t\tthis.installing = true;\n\n\t\t\t\tuni.installApk({\n\t\t\t\t\tfilePath: this.tempFilePath,\n\t\t\t\t\tsuccess: _ => {\n\t\t\t\t\t\tthis.installing = false;\n\t\t\t\t\t\tthis.installed = true;\n\t\t\t\t\t},\n\t\t\t\t\tfail: err => {\n\t\t\t\t\t\tconsole.error('installApk fail', err);\n\t\t\t\t\t\t// 安装失败需要重新下载安装包\n\t\t\t\t\t\tthis.installing = false;\n\t\t\t\t\t\tthis.installed = false;\n\n\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\ttitle: '更新失败，请重新下载',\n\t\t\t\t\t\t\tcontent: `uni.installApk 错误码 ${err.errCode}`,\n\t\t\t\t\t\t\tshowCancel: false\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// 安装跳出覆盖安装，此处直接返回上一页\n\t\t\t\tif (!this.is_mandatory) {\n\t\t\t\t\tuni.navigateBack()\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\t.flex-center {\n\n\n\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t}\n\n\t.mask {\n\t\tposition: fixed;\n\t\tleft: 0;\n\t\ttop: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tbackground-color: rgba(0, 0, 0, .65);\n\t}\n\n\t.content {\n\t\tposition: relative;\n\t\ttop: 0;\n\t\twidth: 600rpx;\n\t\tbackground-color: transparent;\n\t}\n\n\t.text {\n\t\tfont-family: Source Han Sans CN;\n\t}\n\n\t.content-top {\n\t\twidth: 100%;\n\t\tborder-bottom-color: #fff;\n\t\tborder-bottom-width: 15px;\n\t\tborder-bottom-style: solid;\n\t}\n\n\t.content-space {\n\t\twidth: 100%;\n\t\theight: 50px;\n\t\tbackground-color: #fff;\n\t\tposition: absolute;\n\t\ttop: 140px;\n\t\tz-index: -1;\n\t}\n\n\t.content-top-image {\n\t\twidth: 100%;\n\t\tposition: relative;\n\t\tbottom: -18px;\n\t}\n\n\t.content-top-text {\n\t\tfont-size: 22px;\n\t\tfont-weight: bold;\n\t\tcolor: #F8F8FA;\n\t\tposition: absolute;\n\t\twidth: 65%;\n\t\ttop: 77.5px;\n\t\tleft: 25px;\n\t\tz-index: 1;\n\t}\n\n\t.content-body {\n\t\tbox-sizing: border-box;\n\t\tpadding: 0 25px;\n\t\twidth: 100%;\n\t\tbackground-color: #fff;\n\t\tborder-bottom-left-radius: 15px;\n\t\tborder-bottom-right-radius: 15px;\n\t}\n\n\t.content-body-title {\n\t\tflex-direction: row;\n\t\talign-items: center;\n\t}\n\n\t.content-body-title .version {\n\t\tpadding-left: 10px;\n\t\tcolor: #fff;\n\t\tfont-size: 10px;\n\t\tmargin-left: 5px;\n\t\tpadding: 2px 4px;\n\t\tborder-radius: 10px;\n\t\tbackground: #50aefd;\n\t}\n\n\t.title {\n\t\tfont-size: 16px;\n\t\tfont-weight: bold;\n\t\tcolor: #3DA7FF;\n\t\tline-height: 38px;\n\t}\n\n\t.footer {\n\t\theight: 75px;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-around;\n\t}\n\n\t.box-des-scroll {\n\t\tbox-sizing: border-box;\n\t\tpadding: 0 15px;\n\t\theight: 100px;\n\t}\n\n\t.box-des {\n\t\tfont-size: 13px;\n\t\tcolor: #000000;\n\t\tline-height: 25px;\n\t}\n\n\t.progress-box {\n\t\twidth: 100%;\n\t}\n\n\t.progress {\n\t\twidth: 90%;\n\t\theight: 20px;\n\t}\n\n\t.content-bottom {\n\t\theight: 75px;\n\t}\n\n\t.close-img {\n\t\twidth: 35px;\n\t\theight: 35px;\n\t\tz-index: 1000;\n\t\tposition: relative;\n\t\tbottom: -25px;\n\t\tleft: 132px;\n\t}\n\n\t.content-button {\n\t\twidth: 100%;\n\t\theight: 40px;\n\t\tline-height: 40px;\n\n\t\tfont-size: 15px;\n\t\tfont-weight: 400;\n\t\tborder-radius: 20px;\n\t\tborder: none;\n\t\tcolor: #fff;\n\n\t\ttext-align: center;\n\n\t\tbackground-color: #1785ff;\n\t}\n\n\t.flex-column {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t}\n</style>"],"names":[],"mappings":"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"}