"use strict";/**
* @vue/compiler-vapor-dom2 v3.6.0-alpha.4
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/Object.defineProperty(exports,"__esModule",{value:!0});var v=require("@vue/compiler-dom"),f=require("@vue/compiler-vapor"),$=require("@vue/shared"),$e=require("@babel/parser"),St=require("estree-walker"),Tn=require("tinycolor2"),Dn=require("os"),Se=require("source-map-js");function uo(t,e){}function po(t,e){}function xn(t,e=[]){const n=t.ast||t._fastPathAst;if(n)return xe(n);if(t.isStatic)return!0;if(t.ast===null)try{return t._fastPathAst=$e.parseExpression(t.content,{plugins:e}),xe(t._fastPathAst)}catch{}return!1}function xe(t){switch(t=v.unwrapTSNode(t),t.type){case"UnaryExpression":return t.operator==="void"?!1:xe(t.argument);case"ParenthesizedExpression":return xe(t.expression);case"StringLiteral":case"NumericLiteral":case"BooleanLiteral":case"NullLiteral":case"BigIntLiteral":return!0}return!1}function _e(t){try{return!!new Function(`return ${t.content}`)()}catch{}return null}function Nt(t){try{const e=new Function(`return ${t.content}`)();return typeof e=="string"?e:null}catch{}return null}function _n(t,e){W(t.key,e),t.values.length>1&&["class","style","hover-class"].includes(t.key.content)?t.sharedData={ident:e.nextIdent()}:vt(t.values,e)}function vt(t,e,n=!1,r=!1){t.forEach(s=>{W(s,e,n,r)})}function W(t,e,n=!1,r=!1){(n||!xn(t))&&(t.sharedData={ident:e.nextIdent()})}function Cn(t,e){var n,r;t.value&&(r=(n=e.options).isCppExpr)!=null&&r.call(n,t.value.ast)||(t.delegate=!1,W(t.key,e),t.sharedData={ident:e.nextIdent()})}function In(t,e){W(t.event,e,!0)}function bn(t,e){W(t.source,e,!0);const n=e.enterIdent();t.keyProp&&W(t.keyProp,e,!0),Ue(t.render,e),n()}function wn(t,e){W(t.value,e)}function Tt(t,e){const{condition:n,positive:r,negative:s}=t;_e(n)===null&&W(n,e,!0),pe(r,e),s&&(s.type===1?pe(s,e):Tt(s,e))}function An(t,e){_n(t.prop,e)}function Pn(t,e){t.sharedData={ident:e.nextIdent()}}function kn({node:t,value:e},n){var r,s;if(t.tagType===0){if((s=(r=n.options).isCppExpr)!=null&&s.call(r,e.ast))return;n.ir.hasTemplateRef=!0,W(e,n,!0)}else n.ir.hasTemplateRef=!0}function fo(t,e){}function On(t,e){vt(t.values,e,!1,!0)}function ho(t,e){}function Vn(t,e){t.sharedData={ident:e.nextIdent()},t.slots.forEach(n=>{switch(n.slotType){case 0:Object.keys(n.slots).forEach(s=>{pe(n.slots[s],e)});break;case 1:Nt(n.name)||(n.name.sharedData={ident:e.nextIdent()}),pe(n.fn,e);break;case 2:W(n.loop.source,e,!0);const r=e.enterIdent();Nt(n.name)||(n.name.sharedData={ident:e.nextIdent()}),pe(n.fn,e),r();break;case 3:Dt(n,e);break}})}function Dt(t,e){_e(t.condition)===null&&W(t.condition,e,!0),W(t.positive.name,e),pe(t.positive.fn,e),t.negative&&(t.negative.slotType===3?Dt(t.negative,e):(W(t.negative.name,e),pe(t.negative.fn,e)))}function Mn(t,e){const{fallback:n,name:r}=t;W(r,e),n&&pe(n,e)}function Rn({dir:{exp:t}},e){t&&W(t,e)}function Ln({dir:t},e){const n=t.exp;W(n,e,!0),n.sharedData.vModel={eventIdent:e.nextIdent()}}function Fn(t,e){switch(t.name){case"show":return Rn(t,e);case"model":return Ln(t,e)}}function xt(t,e){for(const n of t)_t(n,e)}function _t(t,e){Wn(t,e)}function Wn(t,e){switch(t.type){case 2:return An(t,e);case 3:return Pn(t,e);case 4:return On(t,e);case 5:return Cn(t,e);case 6:return In(t,e);case 7:return wn(t,e);case 8:return kn(t,e);case 9:return void 0;case 10:return void 0;case 15:return Tt(t,e);case 16:return bn(t,e);case 11:return Vn(t,e);case 14:return void 0;case 12:return Mn(t,e);case 13:return Fn(t,e);case 17:return void 0;case 18:return;default:const n=t;throw new Error(`Unhandled operation type in genOperation: ${n}`)}}function Un(t,e){for(const n of t)jn(n,e)}function jn({operations:t},e){xt(t,e)}function We(t,e){const{operation:n}=t;n&&_t(n,e)}function Ct(t,e){const{children:n}=t;let r=0;const s=[];for(const[,a]of n.entries()){a.flags&2&&r--;const o=a.flags&1?a.flags&4?a.anchor:a.id:void 0;if(o===void 0&&!a.hasDynamicChild){We(a,e);continue}o===a.anchor&&We(a,e),s.push(a)}for(const a of s)Ct(a,e)}function pe(t,e){Ue(t,e)}function Ue(t,e){const{dynamic:n,effect:r,operation:s}=t,a=e.enterBlock(t);for(const o of n.children)We(o,e);for(const o of n.children)Ct(o,e);xt(s,e),Un(r,e),a()}let Ce=class{constructor(e=1e3,n=30){if(this._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",this._nextIds=[0],this._generated=[],this._currentIndex=0,e<0)throw new Error("\u9884\u751F\u6210\u6570\u91CF\u4E0D\u80FD\u4E3A\u8D1F\u6570");this._groupSize=n,e>0&&this._pregenerate(e)}_generateId(){const e=[];for(const n of this._nextIds)e.unshift(this._chars[n]);return e.join("")}_generateNextValidId(){let e;do e=this._generateId(),this._increment();while(Jn.has(e));return e}_pregenerate(e){this._generated=new Array(e);for(let n=0;n<e;n++)this._generated[n]=this._generateNextValidId()}next(){if(this._currentIndex<this._generated.length)return this._generated[this._currentIndex++];const e=this._generateNextValidId();return this._generated.push(e),this._currentIndex++,e}getIndexOf(e){return this._generated.indexOf(e)}getGroupInfo(e){const n=this.getIndexOf(e);return n===-1?null:{index:Math.floor(n/this._groupSize),bitValue:1<<n%this._groupSize}}reset(){this._nextIds=[0],this._generated=[],this._currentIndex=0}get generatedCount(){return this._generated.length}get currentIndex(){return this._currentIndex}get hasPregenerated(){return this._currentIndex<this._generated.length}get generatedList(){return this._generated}_increment(){for(let e=0;e<this._nextIds.length;e++)if(++this._nextIds[e]>=this._chars.length)this._nextIds[e]=0;else return;this._nextIds.push(0)}*[Symbol.iterator](){for(;;)yield this.next()}};const Jn=new Set(["abstract","arguments","await","boolean","break","byte","case","catch","char","class","const","continue","debugger","default","delete","do","double","else","enum","eval","export","extends","false","final","finally","float","for","function","goto","if","implements","import","in","instanceof","int","interface","let","long","native","new","null","package","private","protected","public","return","short","static","super","switch","synchronized","this","throw","throws","transient","true","try","typeof","var","void","volatile","while","with","yield"]);class Bn{constructor(e,n){this.isInVFor=!1,this._ident=new Ce,this._identCache=new Map,this.ir=e,this.options=n,this.block=e.block,this._identCache.set(this._ident,new Map)}enterBlock(e){const n=this.block;this.block=e;const r=e.node;let s=()=>{};return this.isInVFor||(this.isInVFor=r.type===1&&r.tagType===3&&r.props.some(a=>a.type===7&&a.name==="for"),s=()=>this.isInVFor=!1),()=>(s(),this.block=n)}enterIdent(){const e=this._ident;return this._ident=new Ce,this._identCache.set(this._ident,new Map),()=>this._ident=e}nextIdent(){return this._ident.next()}}function Gn(t,e){const n=new Bn(t,e);Ue(t.block,n)}const Kn={ELEMENT:"element",NATIVE_VIEW:"nativeView"},It={APP_ANDROID:"app-android",APP_HARMONY:"app-harmony",APP_IOS:"app-ios"};function de(t,e){switch(t){case"app-harmony":return e==="element"?"dom-c":"nv-c";case"app-android":return e==="element"?"dom-kt":"nv-kt";case"app-ios":return e==="element"?"dom-c":"nv-c"}}function bt(t){return t==="dom-c"||t==="nv-c"||t==="txt-c"}function Hn(t){return t==="dom-c"||t==="dom-kt"||t==="dom-oc"||t==="dom-ts"}const Yn={TS:"ts",CPP:"cpp",KOTLIN:"kotlin",SWIFT:"swift"},zn={APP:"app",PAGE:"page",COMPONENT:"component"};class wt{constructor(){this.vForCount=0,this.vForStack=[],this.vForDepth=0}enterVFor(){const e=this.vForCount++;return this.vForStack.push(e),e}exitVFor(){this.vForStack.pop()}enterBlock(e){const n=this.block;this.block=e;const r=this.block.node,s=r.type===1&&r.tagType===3&&r.props.some(a=>a.type===7&&a.name==="for");return s&&this.vForDepth++,()=>(s&&this.vForDepth--,this.block=n)}get sharedDataVar(){return this.vForDepth>0?this.sharedDataVForVar:"__sharedData"}get sharedDataVForVar(){return`__sharedData_VFor${this.vForStack[this.vForStack.length-1]}`}get sharedDataVForItemVar(){return`__vForItem${this.vForStack[this.vForStack.length-1]}`}}function Xn({parent:t,elements:e,anchor:n},{helper:r}){let s=e.map(a=>`n${a}`).join(", ");return e.length>1&&(s=`[${s}]`),[f.NEWLINE,...f.genCall(r("insert"),s,`n${t}`,n===void 0?void 0:`n${n}`)]}function qn(t,{helper:e}){return[f.NEWLINE,...f.genCall(e("prepend"),`n${t.parent}`,...t.elements.map(n=>`n${n}`))]}function x(t,e,n){const{content:r,ast:s,isStatic:a,loc:o}=t;if(a)return[[JSON.stringify(r),-2,o]];if(!t.content.trim()||s===!1||f.isConstantExpression(t))return[[r,-2,o],n&&` = ${n}`];if(s===null)return At(r,e,o,n);const i=[],l=new Map,u=[];v.walkIdentifiers(s,p=>{i.push(p),l.set(p,u.slice())},!1,u);let c=!1;if(i.length){const[p,d]=f.buildCodeFragment();return i.sort((h,m)=>h.start-m.start).forEach((h,m)=>{const g=h.start-1,y=h.end-1,S=i[m-1],D=r.slice(S?S.end-1:0,g);D.length&&d([D,-3]);const C=r.slice(g,y),P=l.get(h),O=P[P.length-1];c||(c=O&&(O.type==="MemberExpression"||O.type==="OptionalMemberExpression")),d(...At(C,e,{start:v.advancePositionWithClone(t.loc.start,C,g),end:v.advancePositionWithClone(t.loc.start,C,y),source:C},c?void 0:n,h,O,P)),m===i.length-1&&y<r.length&&d([r.slice(y),-3])}),n&&c&&d(` = ${n}`),p}else return[[r,-3,o]]}function At(t,e,n,r,s,a,o){const{options:i,helper:l,identifiers:u}=e,{inline:c,bindingMetadata:p}=i;let d=t;const h=u[t];if(h&&h.length){const D=h[0];return $.isString(D)?a&&a.type==="ObjectProperty"&&a.shorthand?[[`${d}: ${D}`,-2,n]]:[[D,-2,n]]:x(D,e,r)}let m;v.isStaticProperty(a)&&a.shorthand&&(m=`${t}: `);const g=p&&p[t];if(c)switch(g){case"setup-let":d=t=r?`_isRef(${t}) ? (${t}.value = ${r}) : (${t} = ${r})`:S();break;case"setup-ref":d=t=y(`${t}.value`);break;case"setup-maybe-ref":const D=a&&v.isInDestructureAssignment(a,o||[]),C=a&&a.type==="AssignmentExpression"&&a.left===s,P=a&&a.type==="UpdateExpression"&&a.argument===s;t=C||P||D?d=`${t}.value`:r?`${l("isRef")}(${t}) ? (${t}.value = ${r}) : null`:S();break;case"props":t=$.genPropsAccessExp(t);break;case"props-aliased":t=$.genPropsAccessExp(p.__propsAliases[t]);break;default:t=y(t)}else Zn(t)&&(g==="props-aliased"?t=`$props['${p.__propsAliases[t]}']`:t=`${g==="props"?"$props":"_ctx"}.${t}`),t=y(t);return[m,[t,-2,n,d]];function y(D){return r?`${D} = ${r}`:D}function S(){return`${l("unref")}(${t})`}}function Zn(t){return!($.isGloballyAllowed(t)||t==="require"||t==="$props"||t==="$emit"||t==="$attrs"||t==="$slots")}function Qn(t,e,n){const{seenVariable:r,variableToExpMap:s,expToVariableMap:a,seenIdentifier:o,updatedVariable:i}=er(e),l=tr(t,r,s,a,o,i),u=rr(t,e,l,i,a);return sr([...l,...u],t,n)}function er(t){const e=Object.create(null),n=new Map,r=new Map,s=new Set,a=new Set,o=(i,l,u,c,p=[])=>{u&&s.add(i),e[i]=(e[i]||0)+1,n.set(i,(n.get(i)||new Set).add(l));const d=r.get(l)||[];d.push({name:i,loc:c}),r.set(l,d),p.some(h=>h.type==="UpdateExpression"||h.type==="AssignmentExpression")&&a.add(i)};for(const i of t){if(!i.ast){i.ast===null&&o(i.content,i,!0);continue}const l=new Set;v.walkIdentifiers(i.ast,(u,c,p)=>{if(c&&Pt(c)&&!l.has(c)){l.add(c);const d=oe(c,h=>{o(h.name,i,!0,{start:h.start,end:h.end})});o(d,i,!1,{start:c.start,end:c.end},p)}else p.some(Pt)||o(u.name,i,!0,{start:u.start,end:u.end},p)})}return{seenVariable:e,seenIdentifier:s,variableToExpMap:n,expToVariableMap:r,updatedVariable:a}}function tr(t,e,n,r,s,a){const o=[],i=new Map;for(const[l,u]of n)if(!a.has(l)&&e[l]>1&&u.size>0){const c=s.has(l),p=c?l:je(l);u.forEach(d=>{if(d.ast&&p!==l){const h=i.get(d)||[];h.push({name:p,locs:r.get(d).reduce((m,g)=>(g.name===l&&g.loc&&m.push(g.loc),m),[])}),i.set(d,h)}}),!o.some(d=>d.name===p)&&(!c||nr(l,r,u))&&o.push({name:p,isIdentifier:c,value:$.extend({ast:c?null:Ie(t,l)},v.createSimpleExpression(l)),rawName:l,exps:u,seenCount:e[l]})}for(const[l,u]of i)u.flatMap(({name:c,locs:p})=>p.map(({start:d,end:h})=>({start:d,end:h,name:c}))).sort((c,p)=>p.end-c.end).forEach(({start:c,end:p,name:d})=>{l.content=l.content.slice(0,c-1)+d+l.content.slice(p-1)}),l.ast=Ie(t,l.content,l.loc);return o}function nr(t,e,n){const r=Array.from(n,a=>e.get(a).map(o=>o.name));if(r.every(a=>a.length===1)||r.some(a=>a.filter(o=>o===t).length>1))return!0;const s=r[0];return r.some(a=>a.length!==s.length)?!(r.some(a=>a.length>s.length&&a.every(o=>s.includes(o)))||r.some(a=>s.length>a.length&&s.every(o=>a.includes(o)))):!r.some(a=>a.some(o=>s.includes(o)))}function rr(t,e,n,r,s){const a=[],o=e.reduce((i,l)=>{const u=s.get(l);if(!u)return i;const c=u.map(p=>p.name);return l.ast&&l.ast.type!=="Identifier"&&!(c&&c.some(p=>r.has(p)))&&(i[l.content]=(i[l.content]||0)+1),i},Object.create(null));return Object.entries(o).forEach(([i,l])=>{if(l>1){const u=je(i);if(!a.some(c=>c.name===u)){const c={};for(let d=n.length-1;d>=0;d--){const h=n[d];!h.exps||!h.seenCount||[...h.exps].every(m=>m.content===i&&h.seenCount===l)&&(c[h.name]=h.rawName,n.splice(d,1))}const p=$.extend({},e.find(d=>d.content===i));Object.keys(c).forEach(d=>{p.content=p.content.replace(d,c[d]),p.ast&&(p.ast=Ie(t,p.content,p.loc))}),a.push({name:u,value:p})}e.forEach(c=>{c.content===i?(c.content=u,c.ast=null):c.content.includes(i)&&(c.content=c.content.replace(new RegExp(ar(i),"g"),u),c.ast=Ie(t,c.content,c.loc))})}}),a}function sr(t,e,n){const[r,s]=f.buildCodeFragment(),a=Object.create(null),o=new Set;return t.forEach(({name:i,isIdentifier:l,value:u})=>{if(l){const c=a[i]=`_${i}`;o.add(c),n&&s("const "),s(`${c} = `,...x(u,e),f.NEWLINE)}}),t.forEach(({name:i,isIdentifier:l,value:u})=>{if(!l){const c=a[i]=`_${i}`;o.add(c),n&&s("const "),s(`${c} = `,...e.withId(()=>x(u,e),a),f.NEWLINE)}}),{ids:a,frag:r,varNames:[...o]}}function ar(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ie(t,e,n){const r=t.options.expressionPlugins,s={plugins:r?[...r,"typescript"]:["typescript"]};try{return $e.parseExpression(`(${e})`,s)}catch(a){if(n){const o=new SyntaxError(a.message);throw o.loc=n,t.options.onError(o),o}throw a}}function je(t){return`${t.replace(/[^a-zA-Z0-9]/g,"_").replace(/_+/g,"_").replace(/_+$/,"")}`}function oe(t,e){if(!t)return"";switch(t.type){case"Identifier":return e(t),t.name;case"StringLiteral":return t.extra?t.extra.raw:t.value;case"NumericLiteral":return t.value.toString();case"BinaryExpression":return`${oe(t.left,e)} ${t.operator} ${oe(t.right,e)}`;case"CallExpression":return`${oe(t.callee,e)}(${t.arguments.map(s=>oe(s,e)).join(", ")})`;case"MemberExpression":case"OptionalMemberExpression":const n=oe(t.object,e),r=t.computed?`[${oe(t.property,e)}]`:`.${oe(t.property,$.NOOP)}`;return`${n}${r}`;case"TSNonNullExpression":return`${oe(t.expression,e)}!`;default:return""}}const Pt=t=>t.type==="MemberExpression"||t.type==="OptionalMemberExpression"||t.type==="TSNonNullExpression";function kt(t,e,n,r){return t.sharedData?f.genCall(e.helper("setSharedData"),e.sharedDataVar,JSON.stringify(t.sharedData.ident),n?f.genCall(n,x(t,e)):x(t,e)):x(t,e)}function or(t,e){var n,r;const{key:s,keyOverride:a,value:o,modifiers:i,sharedData:l}=t;if(o&&(r=(n=e.options).isCppExpr)!=null&&r.call(n,o.ast))return[];const u=Je(e,o,i);return[f.NEWLINE,...s.sharedData?f.genCall(e.helper("setSharedData"),e.sharedDataVar,JSON.stringify(s.sharedData.ident),c()).concat(f.NEWLINE):[],...f.genCall(e.helper("setSharedDataEvent"),e.sharedDataVar,JSON.stringify(l.ident),u)];function c(){const p=x(s,e);if(a){const d=JSON.stringify(a[0]),h=JSON.stringify(a[1]),m=["(",...p,")"];return[...m,` === ${d} ? ${h} : `,...m]}else return x(s,e)}}function ir(t,e){return[f.NEWLINE,...f.genCall(e.helper("setSharedDataDynamicEvents"),e.sharedDataVar,JSON.stringify(t.event.sharedData.ident),x(t.event,e))]}function Je(t,e,n={nonKeys:[],keys:[]},r=!1){let s=["() => {}"];if(e&&e.content.trim())if(v.isMemberExpression(e,t.options)){if(s=x(e,t),!lr(e,t)&&!r){const a=e.ast&&v.TS_NODE_TYPES.includes(e.ast.type);s=["(e: any) => ",a?"(":"",...s,a?")":"","(e)"]}}else if(v.isFnExpression(e,t.options))s=x(e,t);else{const a=e.content.includes("$event"),o=e.content.includes(";"),i=a?t.withId(()=>x(e,t),{$event:null}):x(e,t);s=[a?"($event: any) => ":"() => ",o?"{":"(",...i,o?"}":")"]}return r&&s.unshift("() => "),s}function lr(t,e){if(t.ast===null&&e.options.bindingMetadata[t.content]==="setup-const")return!0}function cr(t,e){const{helper:n}=e,{source:r,value:s,key:a,index:o,render:i,keyProp:l,once:u,id:c,component:p,onlyChild:d}=t,h=e.sharedDataVar;let m=null;const g=a&&a.content,y=o&&o.content,S=["() => (",...x(r,e),")"],D=ee(),C=e.enterVFor(),[P,O]=e.enterScope(),I={},Z=`_for_item${C}`;I[Z]=null,D.forEach((T,N)=>{let _=`${Z}.value${T?T.path:""}`;if(T)if(T.helper&&(I[T.helper]=null,_=`${T.helper}(${_}, ${T.helperArgs})`),T.dynamic){const b=I[N]=v.createSimpleExpression(_),L=e.options.expressionPlugins;b.ast=$e.parseExpression(`(${_})`,{plugins:L?[...L,"typescript"]:["typescript"]})}else I[N]=_;else I[N]=_});const H=[e.sharedDataVForVar,", ",Z];if(g){const T=`_for_key${C}`;H.push(`, ${T}`),I[g]=`${T}.value`,I[T]=null}if(y){const T=`_for_index${C}`;H.push(`, ${T}`),I[y]=`${T}.value`,I[T]=null}const he=f.genCall(n("setSharedData"),h,JSON.stringify(r.sharedData.ident),Vt(e,C)),le=Ee(l,e,e.sharedDataVForVar),{selectorPatterns:V,keyOnlyBindingPatterns:Q}=Ot(i,l,I),G=[],U=[];for(let T=0;T<V.length;T++){const{selector:N}=V[T],_=`_selector${c}_${T}`;G.push(`let ${_}: (oper: () => void) => void`,f.NEWLINE),T===0&&U.push("({ createSelector }) => {",f.INDENT_START),U.push(f.NEWLINE,`${_} = `,...f.genCall("createSelector",["() => ",...x(N,e)])),T===V.length-1&&U.push(f.INDENT_END,f.NEWLINE,"}")}const B=e.withId(()=>{const T=[];return T.push("(",...H,") => {",f.INDENT_START),V.length||Q.length?T.push(...Ae(i,e,!1,()=>{const N=[];for(let _=0;_<V.length;_++){const{effect:b}=V[_];N.push(f.NEWLINE,`_selector${c}_${_}(() => {`,f.INDENT_START);for(const L of b.operations)N.push(...Xe(L,e));N.push(f.INDENT_END,f.NEWLINE,"})")}for(const{effect:_}of Q)for(const b of _.operations)N.push(...Xe(b,e));return N})):T.push(...Ae(i,e)),T.push(f.INDENT_END,f.NEWLINE,"}"),T},I);O(),e.exitVFor();let se=0;return d&&(se|=1),p&&(se|=2),u&&(se|=4),[f.NEWLINE,...G,...f.genCall([n("createSharedDataFor"),"undefined"],he,S,B,le,se?String(se):void 0,U.length?U:void 0)];function ee(){const T=new Map;return s&&(m=s&&s.content,s.ast?v.walkIdentifiers(s.ast,(N,_,b,L,ae)=>{if(ae){let te="",Y=!1,ce,me;for(let ue=0;ue<b.length;ue++){const M=b[ue],k=b[ue+1]||N;if(M.type==="ObjectProperty"&&M.value===k)M.key.type==="StringLiteral"?te+=`[${JSON.stringify(M.key.value)}]`:M.computed?(Y=!0,te+=`[${s.content.slice(M.key.start-1,M.key.end-1)}]`):te+=`.${M.key.name}`;else if(M.type==="ArrayPattern"){const R=M.elements.indexOf(k);k.type==="RestElement"?te+=`.slice(${R})`:te+=`[${R}]`}else M.type==="ObjectPattern"&&k.type==="RestElement"&&(ce=e.helper("getSharedDataRestElement"),me="["+M.properties.filter(R=>R.type==="ObjectProperty").map(R=>R.key.type==="StringLiteral"?JSON.stringify(R.key.value):R.computed?(Y=!0,s.content.slice(R.key.start-1,R.key.end-1)):JSON.stringify(R.key.name)).join(", ")+"]");k.type==="AssignmentPattern"&&(M.type==="ObjectProperty"||M.type==="ArrayPattern")&&(Y=!0,ce=e.helper("getSharedDataDefaultValue"),me=s.content.slice(k.right.start-1,k.right.end-1))}T.set(N.name,{path:te,dynamic:Y,helper:ce,helperArgs:me})}},!0):T.set(m,null)),T}function Ee(T,N,_){if(!T)return!1;const b=N.withId(()=>f.genCall(N.helper("setSharedData"),_,JSON.stringify(T.sharedData.ident),f.genCall(N.helper("toDisplayString"),x(T,N))),ye());return[...f.genMulti(["(",")",", "],_,m||(g||y?"_":void 0),g||(y?"__":void 0),y)," => (",...b,")"]}function ye(){const T={};return g&&(T[g]=null),y&&(T[y]=null),D.forEach((N,_)=>T[_]=null),T}}function Ot(t,e,n){const r=[],s=[];return t.effect.forEach(a=>{if(e!==void 0){const o=pr(a,e.content,n);o&&(r.push(o),a.generated=!0);const i=ur(a,e.content);i&&(s.push(i),a.generated=!0)}}),{keyOnlyBindingPatterns:s,selectorPatterns:r}}function ur(t,e){if(t.expressions.length===1){const{ast:n,content:r}=t.expressions[0];if(typeof n=="object"&&n!==null&&Be(n,e,r))return{effect:t}}}function pr(t,e,n){if(t.expressions.length===1){const{ast:r,content:s}=t.expressions[0];if(typeof r=="object"&&r){const a=[];if(St.walk(r,{enter(o){if(typeof o=="object"&&o&&o.type==="BinaryExpression"&&o.operator==="==="&&o.left.type!=="PrivateName"){const{left:i,right:l}=o;for(const[u,c]of[[i,l],[l,i]]){const p=Be(u,e,s),d=Be(c,e,s),h=dr(c,n);p&&!d&&!h.length&&a.push([u,c])}}}}),a.length===1){const[o,i]=a[0],l=t.expressions[0].content;let u=!1;if(v.walkIdentifiers(r,c=>{c.start!==o.start&&c.start!==i.start&&(u=!0)},!1),!u){const c=l.slice(i.start-1,i.end-1);return{effect:t,selector:{content:c,ast:$.extend({},i,{start:1,end:c.length+1}),loc:i.loc,isStatic:!1}}}}}}}function dr(t,e){let n=[];const r=[];v.walkIdentifiers(t,s=>{r.push(s)},!1);for(const s of r)$.isGloballyAllowed(s.name)||e[s.name]&&n.push(s.name);return n}function Be(t,e,n){let r=!0;return St.walk(t,{enter(s){if(n.slice(s.start-1,s.end-1)===e){this.skip();return}s.type==="Identifier"&&(r=!1)}}),r}function Vt(t,e){return`${t.helper("createSharedDataVFor")}(${t.sharedDataScopeVar}, () => useSharedData<\`${t.sharedDataVForClassType(e)}\`>(${t.sharedDataScopeVar}))`}function fr(t,e){var n;const{helper:r}=e,{value:s}=t;return[f.NEWLINE,...(n=s.sharedData)!=null&&n.ident?f.genCall(r("setSharedData"),e.sharedDataVar,JSON.stringify(s.sharedData.ident),x(s,e)):[]]}function Mt(t,e,n=!1){const{helper:r}=e,{condition:s,positive:a,negative:o,once:i}=t,[l,u]=f.buildCodeFragment(),c=["() => ",...Rt(s,e),""];let p=we(a,e),d=!1;return o&&(o.type===1?d=we(o,e):d=["() => ",...Mt(o,e,!0)]),n||u(f.NEWLINE),u(...f.genCall(r("createSharedDataIf"),c,p,d,i&&"true")),l}function Rt(t,e){return t.sharedData?f.genCall(e.helper("setSharedData"),e.sharedDataVar,JSON.stringify(t.sharedData.ident),f.genCall(e.helper("toSharedDataBoolean"),x(t,e))):[JSON.stringify(_e(t))]}const ne={setText:{name:"setText"},setHtml:{name:"setHtml"},setClass:{name:"setClass"},setStyle:{name:"setStyle"},setValue:{name:"setValue"},setAttr:{name:"setAttr",needKey:!0},setProp:{name:"setProp",needKey:!0},setDOMProp:{name:"setDOMProp",needKey:!0}};function hr(t,e){const{prop:{key:n,values:r,modifier:s,sharedData:a},tag:o}=t,i=Er(o,n.content,s),l=e.getPropertyType(o,n.content),[u,c]=f.buildCodeFragment();return a?(c(f.NEWLINE,...f.genCall(e.helper(Ge(i.name)),e.sharedDataVar,JSON.stringify(a.ident),Lt(l,o,n.content,be(r,e),e))),u):(r.filter(p=>{var d;return(d=p.sharedData)==null?void 0:d.ident}).forEach(p=>{c(f.NEWLINE,...f.genCall(e.helper(Ge(i.name)),e.sharedDataVar,JSON.stringify(p.sharedData.ident),Lt(l,o,n.content,be([p],e),e)))}),u)}function Lt(t,e,n,r,s){if(t)switch(t){case"string":case"number":case"boolean":case"color":return f.genCall(s.helper(`toSharedData${$.capitalize(t)}`),r);case"enum":return mr(e,n,r,s)}return r}function mr(t,e,n,r){return f.genCall(r.helper(`toSharedData${$.capitalize($.camelize(t))}${$.capitalize($.camelize(e))}`),n)}function gr(t,e){const{helper:n}=e,r=t.props.map(s=>Array.isArray(s)?Ft(s,e):s.kind===1?Ft([s],e):x(s.value,e));return[f.NEWLINE,...f.genCall(n(Ge("setDynamicProps")),e.sharedDataVar,JSON.stringify(t.sharedData.ident),f.genMulti(f.DELIMITERS_ARRAY,...r))]}function Ft(t,e){return f.genMulti(f.DELIMITERS_OBJECT,...t.map(n=>[...Wt(n,e),": ",...be(n.values,e)]))}function Wt({key:t,modifier:e,runtimeCamelize:n,handler:r,handlerModifiers:s},a){const{helper:o}=a,i=s&&s.options?s.options.map($.capitalize).join(""):"";if(t.isStatic){const u=(r?$.toHandlerKey(t.content):t.content)+i;return[[v.isSimpleIdentifier(u)?u:JSON.stringify(u),-2,t.loc]]}let l=x(t,a);return n&&(l=f.genCall(o("camelize"),l)),r&&(l=f.genCall(o("toHandlerKey"),l)),["[",e&&`${JSON.stringify(e)} + `,...l,i?` + ${JSON.stringify(i)}`:void 0,"]"]}function be(t,e){return t.length===1?x(t[0],e):f.genMulti(f.DELIMITERS_ARRAY,...t.map(n=>x(n,e)))}function Er(t,e,n){const r=t.toUpperCase();return n?n==="."?Ut(e,r)||ne.setDOMProp:ne.setAttr:Ut(e,r)||(/aria[A-Z]/.test(e)?ne.setDOMProp:$.isSVGTag(t)||$.shouldSetAsAttr(r,e)||e.includes("-")?ne.setAttr:ne.setProp)}function Ut(t,e){if(t==="value"&&$.canSetValueDirectly(e))return ne.setValue;if(t==="class"||t==="hover-class"&&e==="VIEW")return ne.setClass;if(t==="style")return ne.setStyle;if(t==="innerHTML")return ne.setHtml;if(t==="textContent")return ne.setText}function Ge(t){switch(t){case"setClass":return"setSharedDataClass";case"setStyle":return"setSharedDataStyle";case"setText":case"setHtml":case"setValue":case"setAttr":case"setProp":case"setDOMProp":return"setSharedDataAttr";case"setDynamicProps":return"setSharedDataDynamicProps";default:const e=t;throw new Error(`Unhandled operation type in genOperation: ${e}`)}}const jt="_setTemplateRef";function yr(t,e){if(e.options.isCppExpr(t.value.ast))return[];const[n,r]=Sr(t.value,e);let s=f.genCall(jt,`n${t.element}`,n,t.effect?`r${t.element}`:t.refFor?"null":void 0,t.refFor&&"true",r);return t.value.sharedData&&(s=f.genCall(e.helper("setSharedDataTemplateRef"),e.sharedDataVar,JSON.stringify(t.value.sharedData.ident),[`(n${t.element}: number) => {`,...s,"}"])),[f.NEWLINE,t.effect&&`r${t.element} = `,...s]}function $r(t,e){return e.options.isCppExpr(t.value.ast)?[]:[f.NEWLINE,`let r${t.id}: any | null`]}function Sr(t,e){if(t&&e.options.inline){const n=e.options.bindingMetadata[t.content];if(n==="setup-let"||n==="setup-ref"||n==="setup-maybe-ref")return[[t.content],JSON.stringify(t.content)]}return[x(t,e)]}function Nr(t,e){const{helper:n}=e,{values:r}=t,[s,a]=f.buildCodeFragment(),o=new Set;return r.filter(i=>{var l;return(l=i.sharedData)==null?void 0:l.ident}).forEach(i=>{const l=i.sharedData.ident;o.has(l)||(o.add(l),a(f.NEWLINE,...f.genCall(n("setSharedData"),e.sharedDataVar,JSON.stringify(i.sharedData.ident),f.genCall(e.helper("toDisplayString"),x(i,e)))))}),s}function vr(t,e){return[]}function Tr({dir:{exp:t}},e){return t?[f.NEWLINE,...f.genCall(e.helper("renderSharedDataEffect"),["() => { ",...f.genCall(e.helper("setSharedData"),e.sharedDataVar,JSON.stringify(t.sharedData.ident),f.genCall(e.helper("toSharedDataBoolean"),x(t,e)))," }"])]:[]}function Dr(t,e){const{dir:{exp:n,modifiers:r}}=t,s=n.sharedData;return[f.NEWLINE,...f.genCall(e.helper("setSharedDataEvent"),e.sharedDataVar,JSON.stringify(s.vModel.eventIdent),f.genCall(e.helper("setSharedDataModel"),e.sharedDataVar,JSON.stringify(s.ident),["() => (",...x(n,e),")"],Jt(n,e),r.length?`{ ${r.map(a=>a.content+": true").join(",")} }`:void 0))]}function Jt(t,e){return[`${e.options.isTS?"(_value: any)":"_value"} => (`,...x(t,e,"_value"),")"]}function xr(t,e){switch(t.name){case"show":return Tr(t,e);case"model":return Dr(t,e);default:return[]}}function _r(t,e){const n=Ir(t,e.block.operation);return n.length?Cr(n,e):[]}function Cr(t,e){const{helper:n}=e,r=`n${t[0].element}`,s=t.map(o),a=f.genMulti(f.DELIMITERS_ARRAY,...s);return[f.NEWLINE,...f.genCall(n("withVaporDirectives"),r,a)];function o({dir:i,name:l,asset:u}){const c=u?v.toValidAssetId(l,"directive"):x($.extend(v.createSimpleExpression(l,!1),{ast:null}),e),p=i.exp&&["() => ",...x(i.exp,e)],d=i.arg&&x(i.arg,e),h=!!i.modifiers.length&&["{ ",Bt(i.modifiers.map(m=>m.content))," }"];return f.genMulti(f.DELIMITERS_ARRAY.concat("null"),c,p,d,h)}}function Bt(t){return t.map(e=>`${v.isSimpleIdentifier(e)?e:JSON.stringify(e)}: true`).join(", ")}function Ir(t,e){return e.filter(n=>n.type===13&&n.element===t&&!n.builtin)}function br(t,e){const{helper:n}=e,r=g(),{root:s,props:a,slots:o,sharedData:i}=t,l=Or(o,e),[u,c]=Ar(a,e),p=e.withId(()=>Gt(a,e),u),d=c.reduce((y,{name:S,value:D})=>{const C=Je(e,D,void 0,!1);return[...y,`const ${S} = `,...C,f.NEWLINE]},[]),h=t.dynamic&&!t.dynamic.isStatic,m=t.asset;return[f.NEWLINE,...d,`const n${t.id} = `,...f.genCall(n(h?"createSharedDataDynamicComponent":m?"createSharedDataComponentWithFallback":"createSharedDataComponent"),r,p,l,s?"true":!1),f.NEWLINE,...f.genCall(n("setSharedData"),e.sharedDataVar,JSON.stringify(i.ident),[`n${t.id}`,m?"?.sharedData":".sharedData"])];function g(){if(t.dynamic)return t.dynamic.isStatic?f.genCall(n("resolveDynamicComponent"),x(t.dynamic,e)):["() => (",...x(t.dynamic,e),")"];if(t.asset)return v.toValidAssetId(t.tag,"component");{const{tag:y}=t,S=f.isBuiltInComponent(y);return S?(n(S),`_${S}`):x($.extend(v.createSimpleExpression(y,!1),{ast:null}),e)}}}function wr(t,e){const{seenInlineHandlerNames:n}=t;e=je(e);const r=n[e]||0;return n[e]=r+1,r===0?e:`${e}${r}`}function Ar(t,e){const n=Object.create(null),r=[],s=t[0];if($.isArray(s))for(let a=0;a<s.length;a++){const o=s[a];o.handler&&o.values.forEach((i,l)=>{if(!v.isMemberExpression(i,e.options)){const u=wr(e,`_on_${o.key.content.replace(/-/g,"_")}`);r.push({name:u,value:i}),n[u]=null,o.values[l]=$.extend({ast:null},v.createSimpleExpression(u))}})}return[n,r]}function Gt(t,e){const n=t[0];if($.isArray(n))return!n.length&&t.length===1?void 0:Ke(n,e,Kt(t.slice(1),e));if(t.length)return Ke([],e,Kt(t,e))}function Ke(t,e,n){const r=t.map(s=>Ht(s,e,!0));return n&&r.push(["'$': ",...n]),f.genMulti(r.length>1?f.DELIMITERS_OBJECT_NEWLINE:f.DELIMITERS_OBJECT,...r)}function Kt(t,e){const{helper:n}=e,r=[];for(const s of t){let a;if($.isArray(s)){s.length&&r.push(Ke(s,e));continue}else s.kind===1?a=f.genMulti(f.DELIMITERS_OBJECT,Ht(s,e)):(a=x(s.value,e),s.handler&&(a=f.genCall(n("toHandlers"),a)));r.push(["() => (",...a,")"])}if(r.length)return f.genMulti(f.DELIMITERS_ARRAY_NEWLINE,...r)}function Ht(t,e,n){const r=be(t.values,e);return[...Wt(t,e),": ",...t.handler?Je(e,t.values[0],t.handlerModifiers,!0):n?["() => (",...r,")"]:r,...t.model?[...Pr(t,e),...kr(t,e)]:[]]}function Pr(t,e){const n=t.key.isStatic?[JSON.stringify(`onUpdate:${$.camelize(t.key.content)}`)]:['["onUpdate:" + ',...x(t.key,e),"]"],r=Jt(t.values[0],e);return[",",f.NEWLINE,...n,": () => ",...r]}function kr(t,e){const{key:n,modelModifiers:r}=t;if(!r||!r.length)return[];const s=n.isStatic?[$.getModifierPropName(n.content)]:["[",...x(n,e),' + "Modifiers"]'],a=Bt(r);return[",",f.NEWLINE,...s,`: () => ({ ${a} })`]}function Or(t,e){if(!t.length)return;const n=t[0];return n.slotType===0?He(n,e,t.length>1?t.slice(1):void 0):He({slots:{}},e,t)}function He({slots:t},e,n){const r=Object.keys(t).map(s=>[`${JSON.stringify(s)}: `,...ze(t[s],e)]);return n&&r.push(["'$': ",...Vr(n,e)]),f.genMulti(f.DELIMITERS_OBJECT_NEWLINE,...r)}function Vr(t,e){return f.genMulti(f.DELIMITERS_ARRAY_NEWLINE,...t.map(n=>n.slotType===0?He(n,e):n.slotType===4?n.slots.content:Ye(n,e,!0)))}function Ye(t,e,n=!1){let r;switch(t.slotType){case 1:r=Mr(t,e);break;case 2:r=Rr(t,e);break;case 3:r=Lr(t,e);break}return n?["() => (",...r,")"]:r}function Mr(t,e){const{name:n,fn:r}=t;return f.genMulti(f.DELIMITERS_OBJECT_NEWLINE,["name: ",...kt(n,e,e.helper("toDisplayString"))],["fn: ",...ze(r,e)])}function Rr(t,e){const n=e.enterVFor(),{name:r,fn:s,loop:a}=t,{value:o,key:i,index:l,source:u}=a,c=o&&o.content,p=i&&i.content,d=l&&l.content,h={};c&&(h[c]=c),p&&(h[p]=p),d&&(h[d]=d);const m=f.genMulti(f.DELIMITERS_OBJECT_NEWLINE,["name: ",...e.withId(()=>{if(!r.sharedData)return x(r,e);const y=e.enterBlock(s),S=kt(r,e,e.helper("toDisplayString"));return y(),S},h)],["fn: ",...e.withId(()=>ze(s,e),h)]),g=[...f.genCall(e.helper("createSharedDataForSlots"),f.genCall(e.helper("setSharedData"),e.sharedDataVar,JSON.stringify(u.sharedData.ident),Vt(e,n)),x(u,e),[...f.genMulti(["(",")",", "],e.sharedDataVForVar,c||(p||d?"_":void 0),p||(d?"__":void 0),d)," => (",...m,")"])];return e.exitVFor(),g}function Lr(t,e){const{condition:n,positive:r,negative:s}=t;return[...Rt(n,e),f.INDENT_START,f.NEWLINE,"? ",...Ye(r,e),f.NEWLINE,": ",...s?[...Ye(s,e)]:["null"],f.INDENT_END]}function ze(t,e){let n=!1,r,s,a,o;const{props:i,key:l,node:u}=t,c=new Set;i&&(r=i.content,(n=!!i.ast)?([o,a]=e.enterScope(),s=`_slotProps${o}`,v.walkIdentifiers(i.ast,(h,m,g,y,S)=>{S&&c.add(h.name)},!0)):c.add(s=r));const p={};c.forEach(h=>p[h]=n?`${s}[${JSON.stringify(h)}]`:null);let d=e.withId(()=>we(t,e,[s]),p);return a&&a(),l&&(d=["() => {",f.INDENT_START,f.NEWLINE,"return ",...f.genCall(e.helper("createKeyedFragment"),["() => ",...x(l,e)],d),f.INDENT_END,f.NEWLINE,"}"]),u.type===1&&(d=[`${e.helper("withSharedDataVaporCtx")}(`,...d,Fr(u)?", 'string'":"",")"]),d}function Fr(t){return t.children.every(e=>Wr(e))}function Wr(t){return t.type===5||t.type===2}function Ur(t,e){const{helper:n}=e,{name:r,fallback:s,noSlotted:a}=t,[o,i]=f.buildCodeFragment(),l=r.sharedData?["() => (",...f.genCall(e.helper("setSharedData"),e.sharedDataVar,JSON.stringify(r.sharedData.ident),x(r,e)),")"]:x(r,e);let u;return s&&(u=we(s,e)),i(f.NEWLINE,...f.genCall(n("createSharedDataSlot"),l,Gt(t.props,e)||"null",u,a&&"null",a&&"true")),o}function Yt(t,e){const[n,r]=f.buildCodeFragment();for(const s of t)r(...zt(s,e));return n}function zt(t,e){const[n,r]=f.buildCodeFragment();return r(...Xe(t,e)),n}function Xe(t,e){switch(t.type){case 2:return hr(t,e);case 3:return gr(t,e);case 4:return Nr(t,e);case 5:return or(t,e);case 6:return ir(t,e);case 7:return fr(t,e);case 8:return yr(t,e);case 9:return Xn(t,e);case 10:return qn(t,e);case 15:return Mt(t,e);case 16:return cr(t,e);case 11:return br(t,e);case 14:return $r(t,e);case 12:return Ur(t,e);case 13:return xr(t,e);case 17:return vr();case 18:return[];default:const n=t;throw new Error(`Unhandled operation type in genOperation: ${n}`)}}function jr(t,e,n){const{helper:r}=e,s=t.flatMap(h=>h.expressions),[a,o,i]=f.buildCodeFragment(),l=n===void 0;let u=0;const{ids:c,frag:p,varNames:d}=Qn(e,s,l);o(...p);for(let h=0;h<t.length;h++){const m=t[h];u+=m.operations.length;const g=e.withId(()=>Jr(m,e),c);h>0&&o(f.NEWLINE),a[a.length-1]===")"&&g[0]==="("&&o(";"),o(...g)}return(a.filter(h=>h===f.NEWLINE).length>1||u>1||p.length>0)&&(i("{",f.INDENT_START,f.NEWLINE),o(f.INDENT_END,f.NEWLINE,"}"),t.length||i(f.NEWLINE)),t.length&&a.length&&(i(f.NEWLINE,`${r("renderSharedDataEffect")}(() => `),o(")")),!l&&d.length&&i(f.NEWLINE,"let ",d.join(", ")),n&&o(...e.withId(n,c)),a}function Jr({operations:t},e){const[n,r]=f.buildCodeFragment(),s=Yt(t,e);return s.filter(a=>a===f.NEWLINE).length>1?r(...s):r(...s.filter(a=>a!==f.NEWLINE)),n}function qe(t,e){const[n,r]=f.buildCodeFragment(),{operation:s,hasDynamicChild:a}=t;return s&&r(...zt(s,e)),a&&r(...Ze(t,e)),n}function Ze(t,e){const[n,r]=f.buildCodeFragment(),{children:s}=t;let a=0,o=0,i=0;for(const[l,u]of s.entries()){u.operation&&u.operation.anchor===-1&&i++,u.flags&2?a--:u.ifBranch&&o++;const c=u.flags&1?u.flags&4?u.anchor:u.id:void 0;if(c===void 0&&!u.hasDynamicChild){r(...qe(u,e));continue}c===void 0?e.block.tempId++:`${c}`,c===u.anchor&&!u.hasDynamicChild&&r(...qe(u,e)),c!==void 0&&r(..._r(c,e)),r(...Ze(u,e))}return n}function we(t,e,n=[],r){return["(",...n,") => {",f.INDENT_START,...Ae(t,e,r),f.INDENT_END,f.NEWLINE,"}"]}function Ae(t,e,n,r){const[s,a]=f.buildCodeFragment(),{dynamic:o,effect:i,operation:l,returns:u,key:c}=t,p=e.enterBlock(t);if(t.hasDeferredVShow&&a(f.NEWLINE,"const deferredApplyVShows = []"),n){for(let h of e.ir.component){const m=v.toValidAssetId(h,"component"),g=h.endsWith("__self");g&&(h=h.slice(0,-6)),a(f.NEWLINE,`const ${m} = `,...f.genCall(e.helper("resolveComponent"),JSON.stringify(h),g?"true":void 0))}d("directive","resolveDirective")}for(const h of o.children)a(...qe(h,e));for(const h of o.children)h.hasDynamicChild||a(...Ze(h,e));if(a(...Yt(l,e)),a(...jr(i.filter(h=>!h.generated),e,r)),t.hasDeferredVShow&&a(f.NEWLINE,"deferredApplyVShows.forEach(fn => fn())"),o.needsKey)for(const h of o.children){const m=c?x(c,e):JSON.stringify(h.id);a(f.NEWLINE,`n${h.id}.$key = `,...m)}return p(),s;function d(h,m){for(const g of e.ir[h])a(f.NEWLINE,`const ${v.toValidAssetId(g,h)} = `,...f.genCall(e.helper(m),JSON.stringify(g)))}}function Br(t){return!(!t||t==="string"||t==="number"||t==="boolean"||t==="UniNativeColor"||t.startsWith("Array<"))}function re(t,e){return{valueCode:t,setterCode:e}}function Qe(t,e){return{error:t,valueCode:"",setterCode:""}}function Ne(t,e,n){return t.type=e,t.options=n,t}function Gr(t,e){return Ne(n=>{const r=n+"";if(t.values&&!t.values.includes(r))return Qe(`Invalid enum value: ${r}. Expected one of: ${t.values.join(", ")}`);const s=e($.capitalize($.camelize(r.trim().replace(" ","-"))));return t.property?re(s,`${t.name} = ${s}`):re(s,`${t.name}(${s})`)},"enum",t)}function Kr(t,e){return bt(t)?n=>`UTSCPP.propertyAccess(${e}, "::", "${$.capitalize($.camelize(n+""))}")`:n=>`${e}.${$.capitalize($.camelize(n+""))}`}const Hr=["number"];function Yr(t){return!!(t&&Hr.includes(t))}function zr(t){return Ne(e=>{const n=parseFloat(String(e));return isNaN(n)?Qe(`Invalid number value: ${e}`):t.property?re(`${n}`,`${t.name} = ${n}`):re(`${n}`,`${t.name}(${n})`)},"number",t)}const Xr=["string"];function qr(t){return!!(t&&Xr.includes(t))}function Zr(t){return Ne(e=>t.property?re(`"${e}"`,`${t.name} = "${e}"`):re(`"${e}"`,`${t.name}("${e}")`),"string",t)}var Xt={global:{description:"\u5168\u5C40\u914D\u7F6E\uFF0C\u6240\u6709\u7EC4\u4EF6\u90FD\u652F\u6301\u7684\u5185\u5BB9",classes:{dom:"UniElement",nv:"UniNativeBaseView"},attributes:{id:{type:"string",description:"\u7EC4\u4EF6\u7684\u552F\u4E00\u6807\u8BC6",uniPlatform:{app:{"dom-c":{propertyName:"id"}},"app-android":{"dom-kt":{propertyName:"id"}}}},class:{type:"Array<string>",description:"class\u5C5E\u6027\u503C(class name)\u7684\u96C6\u5408\uFF0C\u652F\u6301vue\u6846\u67B6\u5B9E\u73B0class\u5C5E\u6027",uniPlatform:{app:{"dom-c":{propertyName:"classList"}},"app-android":{"dom-kt":{propertyName:"classList"}}}},"data-*":{description:"\u81EA\u5B9A\u4E49\u6570\u636E\u5C5E\u6027\uFF0C\u9700\u8981\u5BF9\u5C5E\u6027\u540D\u79F0\u505A\u8F6C\u6362\uFF0C\u8FD0\u884C\u671F\u5728runtime\u5C42\u7EDF\u4E00\u5B9E\u73B0\uFF1B\u7F16\u8BD1\u5668\u652F\u6301\u5C5E\u6027\u540D\u79F0\u8F6C\u6362\u7684\u8BDD\u76F4\u63A5\u64CD\u4F5C\u5C5E\u6027",uniPlatform:{app:{"dom-c":{propertyName:"dataset",setter:"setAttributeDataset"}},"app-android":{"dom-kt":{propertyName:"dataset",setter:"setAttributeDataset"}}}},slot:{type:"UniNativeSlotType",description:"\u63D2\u69FD\u7C7B\u578B",defaultValue:"none",values:["none","refresher"],uniPlatform:{app:{"nv-c":{setter:"slot"}}}}}},view:{classes:{dom:"UniViewElement",nv:"UniNativeView"},attributes:{"hover-class":{type:"Array<string>",description:"\u6309\u4E0B\u53BB\u7684\u6837\u5F0F\u7C7B\uFF0C\u9700\u8981\u6846\u67B6\u8F6C\u6362\u4E3A\u6837\u5F0F\u5217\u8868hoverStyles",uniPlatform:{app:{"dom-c":{setter:"setHoverStyles"}},"app-android":{"dom-kt":{setter:"setHoverStyles"}}}},"hover-stop-propagation":{type:"boolean",description:"\u662F\u5426\u963B\u6B62\u672C\u8282\u70B9\u7684\u7956\u5148\u8282\u70B9\u51FA\u73B0\u70B9\u51FB\u6001",uniPlatform:{app:{"nv-c":{setter:"hoverStopPropagation"}},"app-android":{"nv-kt":{setter:"hoverStopPropagation"}}}},"hover-start-time":{type:"number",description:"\u6309\u4F4F\u540E\u591A\u4E45\u51FA\u73B0\u70B9\u51FB\u6001",uniPlatform:{app:{"nv-c":{setter:"hoverStartTime"}},"app-android":{"nv-kt":{setter:"hoverStartTime"}}}},"hover-stay-time":{type:"number",description:"\u6309\u4F4F\u540E\u591A\u4E45\u51FA\u73B0\u70B9\u51FB\u6001",uniPlatform:{app:{"nv-c":{setter:"hoverStayTime"}},"app-android":{"nv-kt":{setter:"hoverStayTime"}}}}}},text:{classes:{dom:"UniTextElement",nv:"UniNativeTextView"},attributes:{"user-select":{type:"boolean",description:"\u6587\u672C\u662F\u5426\u53EF\u9009",uniPlatform:{app:{"nv-c":{setter:"userSelect"}},"app-android":{"nv-kt":{setter:"userSelect"}}}},"max-lines":{type:"number",description:"\u9650\u5236\u6587\u672C\u7684\u6700\u5927\u884C\u6570",uniPlatform:{app:{"dom-c":{setter:"setMaxLines"}},"app-android":{"dom-kt":{setter:"setMaxLines"}}}}}},image:{classes:{dom:"UniImageElement",nv:"UniNativeImageView"},attributes:{src:{type:"string",description:"\u56FE\u7247\u8D44\u6E90\u5730\u5740",uniPlatform:{app:{"nv-c":{setter:"src"},"dom-c":{setter:"setSrc"}},"app-android":{"nv-kt":{setter:"src"},"dom-c":{setter:"setSrc"}}}},mode:{type:"UniImageModeType",defaultValue:"scaleToFill",values:["scaleToFill","aspectFit","aspectFill","widthFix","heightFix","top","bottom","center","left","right","top left","top right","bottom left","bottom right"],description:"\u56FE\u7247\u88C1\u526A\u3001\u7F29\u653E\u7684\u6A21\u5F0F",uniPlatform:{app:{"nv-c":{setter:"mode"},"dom-c":{setter:"setMode"}},"app-android":{"nv-kt":{setter:"mode"},"dom-c":{setter:"setMode"}}}},"lazy-load":{type:"boolean",description:"\u662F\u5426\u61D2\u52A0\u8F7D\u56FE\u7247",uniPlatform:{app:{"nv-c":{setter:"lazyLoad"}},"app-android":{"nv-kt":{setter:"lazyLoad"}}}},"fade-show":{type:"boolean",description:"\u662F\u5426\u663E\u793A\u52A8\u753B\u6548\u679C",uniPlatform:{app:{"nv-c":{setter:"fadeShow"}},"app-android":{"nv-kt":{setter:"fadeShow"}}}}}},"scroll-view":{classes:{dom:"UniScrollViewElement",nv:"UniNativeScrollView"},attributes:{direction:{type:"UniNativeScrollViewDirectionType",defaultValue:"vertical",values:["none","vertical","horizontal","all"],description:"\u6EDA\u52A8\u65B9\u5411\uFF0C\u53EF\u53D6\u503C none\u3001all\u3001horizontal\u3001vertical\uFF0C\u9ED8\u8BA4\u503Cvertical",uniPlatform:{app:{"nv-c":{setter:"direction"}},"app-android":{"nv-kt":{setter:"direction"}}}},"enable-back-to-top":{type:"boolean",description:"\u70B9\u51FB\u9876\u90E8\u72B6\u6001\u680F\u6EDA\u52A8\u6761\u8FD4\u56DE\u9876\u90E8\uFF0C\u53EA\u652F\u6301\u7AD6\u5411",uniPlatform:{app:{"nv-c":{setter:"enableBackToTop"}}}},bounces:{type:"boolean",description:"\u63A7\u5236\u662F\u5426\u56DE\u5F39\u6548\u679C",uniPlatform:{app:{"nv-c":{setter:"bounces"}},"app-android":{"nv-kt":{setter:"bounces"}}}},"show-scrollbar":{type:"boolean",description:"\u63A7\u5236\u662F\u5426\u51FA\u73B0\u6EDA\u52A8\u6761",uniPlatform:{app:{"nv-c":{setter:"showScrollbar"}}}},"upper-threshold":{type:"number",description:"\u8DDD\u9876\u90E8/\u5DE6\u8FB9\u591A\u8FDC\u65F6\uFF08\u5355\u4F4Dpx\uFF09\uFF0C\u89E6\u53D1 scrolltoupper \u4E8B\u4EF6",uniPlatform:{app:{"nv-c":{setter:"upperThreshold"}},"app-android":{"nv-kt":{setter:"upperThreshold"}}}},"lower-threshold":{type:"number",description:"\u8DDD\u5E95\u90E8/\u53F3\u8FB9\u591A\u8FDC\u65F6\uFF08\u5355\u4F4Dpx\uFF09\uFF0C\u89E6\u53D1 scrolltolower \u4E8B\u4EF6",uniPlatform:{app:{"nv-c":{setter:"lowerThreshold"}},"app-android":{"nv-kt":{setter:"lowerThreshold"}}}},"scroll-top":{type:"number",description:"\u8BBE\u7F6E\u7AD6\u5411\u6EDA\u52A8\u6761\u4F4D\u7F6E",uniPlatform:{app:{"nv-c":{setter:"scrollTop"}},"app-android":{"nv-kt":{setter:"scrollTop"}}}},"scroll-left":{type:"number",description:"\u8BBE\u7F6E\u6A2A\u5411\u6EDA\u52A8\u6761\u4F4D\u7F6E",uniPlatform:{app:{"nv-c":{setter:"scrollLeft"}},"app-android":{"nv-kt":{setter:"scrollLeft"}}}},"scroll-with-animation":{type:"boolean",description:"\u662F\u5426\u5728\u8BBE\u7F6E\u6EDA\u52A8\u6761\u4F4D\u7F6E\u65F6\u4F7F\u7528\u6EDA\u52A8\u52A8\u753B\uFF0C\u8BBE\u7F6Efalse\u6CA1\u6709\u6EDA\u52A8\u52A8\u753B",uniPlatform:{app:{"nv-c":{setter:"scrollWithAnimation"}},"app-android":{"nv-kt":{setter:"scrollWithAnimation"}}}},"refresher-enabled":{type:"boolean",description:"\u5F00\u542F\u4E0B\u62C9\u5237\u65B0\uFF0C\u6682\u65F6\u4E0D\u652F\u6301scroll-x = true\u6A2A\u5411\u5237\u65B0",uniPlatform:{app:{"nv-c":{setter:"refresherEnabled"}},"app-android":{"nv-kt":{setter:"refresherEnabled"}}}},"refresher-threshold":{type:"number",description:"\u8BBE\u7F6E\u4E0B\u62C9\u5237\u65B0\u9608\u503C",uniPlatform:{app:{"nv-c":{setter:"refresherThreshold"}},"app-android":{"nv-kt":{setter:"refresherThreshold"}}}},"refresher-max-drag-distance":{type:"number",description:"\u8BBE\u7F6E\u4E0B\u62C9\u6700\u5927\u62D6\u62FD\u8DDD\u79BB\uFF08\u5355\u4F4Dpx\uFF09\uFF0C\u9ED8\u8BA4\u662F\u4E0B\u62C9\u5237\u65B0\u63A7\u4EF6\u9AD8\u5EA6\u76842.5\u500D",uniPlatform:{app:{"nv-c":{setter:"refresherMaxDragDistance"}},"app-android":{"nv-kt":{setter:"refresherMaxDragDistance"}}}},"refresher-background":{type:"UniNativeColor",description:"\u8BBE\u7F6E\u4E0B\u62C9\u5237\u65B0\u533A\u57DF\u80CC\u666F\u989C\u8272\uFF0C\u9ED8\u8BA4\u900F\u660E",uniPlatform:{app:{"nv-c":{setter:"refresherBackground"}},"app-android":{"nv-kt":{setter:"refresherBackground"}}}},"refresher-triggered":{type:"boolean",description:"\u8BBE\u7F6E\u5F53\u524D\u4E0B\u62C9\u5237\u65B0\u72B6\u6001\uFF0Ctrue \u8868\u793A\u4E0B\u62C9\u5237\u65B0\u5DF2\u7ECF\u88AB\u89E6\u53D1\uFF0Cfalse \u8868\u793A\u4E0B\u62C9\u5237\u65B0\u672A\u88AB\u89E6\u53D1",uniPlatform:{app:{"nv-c":{setter:"refresherTriggered"}},"app-android":{"nv-kt":{setter:"refresherTriggered"}}}},type:{type:"string",description:"\u6E32\u67D3\u6A21\u5F0F\uFF0C\u53EF\u53D6\u503C nested",uniPlatform:{"app-android":{"nv-kt":{setter:"type"}}}},"associative-container":{type:"string",description:"\u5173\u8054\u7684\u6EDA\u52A8\u5BB9\u5668",uniPlatform:{"app-android":{"nv-kt":{setter:"associativeContainer"}}}}}}};const et=new Map;function qt(t){if(et.has(t))return et.get(t);const e={},n=Xt,r=Zt(t,n.global.attributes);return Object.keys(n).forEach(s=>{if(s!=="global"){const a=Zt(t,n[s].attributes);e[s]=$.extend({},r,a)}}),et.set(t,e),e}function Zt(t,e){const n={};return Object.keys(e).forEach(r=>{const s=e[r];if(s.uniPlatform[t]||s.uniPlatform.app){const a=s.type;if(a)switch(a){case"string":n[r]="string";break;case"number":n[r]="number";break;case"boolean":n[r]="boolean";break;case"UniNativeColor":n[r]="color";break;case"Array<string>":n[r]="Array<string>";break;default:n[r]="enum";break}}}),n}function Qr(t,e){const n={},r=Xt,s=Qt(t,e,r.global.attributes);return Object.keys(r).forEach(a=>{if(a!=="global"){const o=Qt(t,e,r[a].attributes,r[a].classes[e.split("-")[0]]);n[a]={...s,...o}}}),n}function Qt(t,e,n,r){const s={};return Object.keys(n).forEach(a=>{const o=n[a];let i;const l=o.uniPlatform[t]||o.uniPlatform.app;if(l){const u=l[e];if(u){const{type:c,propertyName:p,setter:d}=u;i={type:c||o.type,property:!!p,name:p||d,values:o.values,className:r}}}s[a]=i}),s}const es=["boolean"];function ts(t){return!!(t&&es.includes(t))}function ns(t){return Ne(e=>t.property?re("true",`${t.name} = true`):re("true",`${t.name}(true)`),"boolean",t)}const rs=["UniNativeColor"];function ss(t){return!!(t&&rs.includes(t))}function as(t){return Ne(e=>{const n=os(String(e));return n?t.property?re(n,`${t.name} = ${n}`):re(n,`${t.name}(${n})`):Qe(`Invalid color value: ${e}`)},"color",t)}function os(t){const e=Tn(t);if(e.isValid()){const n=e.toHex8();return"0x"+(n.slice(6,8)+n.slice(0,6))}}const tt=new Map;function is(t,e){return`${t}:${e}`}function en(t,e){const n=is(t,e);if(tt.has(n))return tt.get(n);const r={},s=Qr(t,e);return Object.keys(s).forEach(o=>{const i=s[o],l={};Object.keys(i).forEach(u=>{const c=i[u];let p;c&&(p=a(c)),l[u]=p}),r[o]=l}),tt.set(n,r),r;function a(o){const i=o.type;if(Yr(i))return zr(o);if(qr(i))return Zr(o);if(ts(i))return ns(o);if(ss(i))return as(o);if(i)return Gr(o,Kr(e,i))}}function ls(t){const e=qt(t);return(n,r)=>{if(r.startsWith("data-"))return!0;const s=e[n];return s?!!s[r]:!1}}function cs(t){return(e,n,r,s)=>{let a="";const o=[],i=en(t,e)[n];if(i){if(r in i){const l=i[r];if(l){const u=l(s,r);a=u.setterCode,u.error&&o.push(u.error)}}else o.push(`Property '${r}' is not supported on '<${n}>'`);return{code:a,errors:o}}}}function us(t,e){const n=en(t,e);return(r,s)=>{var a;const o=n[r];if(o&&s in o)return(a=o[s])==null?void 0:a.options}}function ps(t){const e=qt(t);return(n,r)=>{const s=e[n];if(s)return s[r]}}class ds extends wt{constructor(e,n){super(),this.ir=e,this.helpers=new Set([]),this.helper=s=>(this.helpers.add(s),`_${s}`),this.delegates=new Set,this.identifiers=Object.create(null),this.seenInlineHandlerNames=Object.create(null),this.scopeLevel=0;const r={root:"",mode:"module",platform:"app-harmony",prefixIdentifiers:!0,sourceMap:!1,filename:"template.vue.html",relativeFilename:"",scopeId:null,runtimeGlobalName:"Vue",runtimeModuleName:"vue",ssrRuntimeModuleName:"vue/server-renderer",ssr:!1,isTS:!1,inSSR:!1,inline:!1,bindingMetadata:{},expressionPlugins:[],componentType:"page",className:"",onError:v.defaultOnError,onWarn:v.defaultOnWarn,onVueTemplateCompileLog:()=>{},isCppExpr:()=>!1};this.options=$.extend(r,n),this.block=e.block,this.getPropertyType=ps(n.platform)}withId(e,n){const{identifiers:r}=this,s=Object.keys(n);for(const o of s)r[o]||(r[o]=[]),r[o].unshift(n[o]||o);const a=e();return s.forEach(o=>$.remove(r[o],n[o]||o)),a}enterScope(){return[this.scopeLevel++,()=>this.scopeLevel--]}get sharedDataScopeVar(){return"__sharedDataScope"}sharedDataVForClassType(e){return`\${__SHARED_DATA_CLASS_NAME_TYPE}_VFor${e}`}}function fs(t,e){const[n,r]=f.buildCodeFragment(),s=new ds(t,e),{helpers:a}=s,{inline:o}=e;r(f.NEWLINE,"return (function renderSharedData(): UniSharedData { 'raw js'"),r(f.INDENT_START),e.componentType==="page"?(r(f.NEWLINE,`const __sharedData = useSharedDataPage<__SHARED_DATA_CLASS_NAME_TYPE>(${s.helper("useSharedDataPageId")}())`),r(f.NEWLINE,`const __sharedDataScope = ${s.helper("useSharedDataScope")}(__sharedData)`)):(r(f.NEWLINE,`const __sharedDataScope = ${s.helper("useSharedDataScope")}()`),r(f.NEWLINE,"const __sharedData = useSharedDataComponent<__SHARED_DATA_CLASS_NAME_TYPE>(__sharedDataScope)")),t.hasTemplateRef&&r(f.NEWLINE,`const ${jt} = ${s.helper("createSharedDataTemplateRefSetter")}()`),r(...Ae(t.block,s,!0)),r(f.NEWLINE,"return __sharedData"),r(f.INDENT_END,f.NEWLINE),r("})()");const i=hs(s)+ms(s)+gs(s),l=[...i].filter(p=>p===`
`).length;l&&!o&&n.unshift(...new Array(l).fill(f.LF));const[u,c]=f.codeFragmentToString(n,s);return{code:u,ast:t,preamble:i,map:c&&c.toJSON(),helpers:a}}function hs({helpers:t,options:e}){let n="";return t.size&&(n+=`import { ${[...t].map(r=>`${r} as _${r}`).join(", ")} } from '${e.runtimeModuleName}';
`),n}function ms({ir:t}){const e=t.node.imports;let n="";for(const r of e)n+=`import '${r.path}';
`;return n}function gs(t){return`
const __className = '${t.options.className}' as const
type __SHARED_DATA_CLASS_NAME_TYPE = \`\${typeof __className}SharedData\`
`}const E=Symbol("newline"),tn=Symbol("line feed"),X=Symbol("indent start"),q=Symbol("indent end");function j(...t){const e=t.push.bind(t),n=t.unshift.bind(t);return[t,e,n]}function K([t,e,n,r],...s){if(r){for(;s.length>0&&!s[s.length-1];)s.pop();s=s.map(i=>i||r)}else s=s.filter(Boolean);const a=[];o(t);for(let[i,l]of s.entries())o(l),i<s.length-1&&o(n);return o(e),a;function o(i){$.isArray(i)||(i=[i]),a.push(...i)}}const Pe=["[","]",", "],Es=[["[",X,E],[q,E,"]"],[",",E]],ke=[["{",X,E],[q,E,"}"],[",",E]];function w(t,...e){const n=$.isArray(t),r=n?t[0]:t,s=n?t[1]:"null";return[r,...K(["(",")",", ",s],...e)]}function ys(t,e){const{options:{sourceMap:n}}=e,r=e.options.relativeFilename||e.options.filename;let s;n&&(s=new Se.SourceMapGenerator,s.setSourceContent(r,e.ir.source),s._sources.add(r));let a="";const o={line:1,column:1,offset:0};let i=0;for(let u of t){if(!u)continue;if(u===E)u=[`
${"  ".repeat(i)}`,0];else if(u===X){i++;continue}else if(u===q){i--;continue}else if(u===tn){o.line++,o.column=0,o.offset++;continue}$.isString(u)&&(u=[u]);let[c,p=-2,d,h]=u;a+=c,s&&(d&&l(d.start,h),p===-3?v.advancePositionWithMutation(o,c):(o.offset+=c.length,p===-2?o.column+=c.length:(p===-1&&(p=c.length-1),o.line++,o.column=c.length-p)),d&&d!==v.locStub&&l(d.end))}return[a,s];function l(u,c=null){const{_names:p,_mappings:d}=s;c!==null&&!p.has(c)&&p.add(c),d.add({originalLine:u.line,originalColumn:u.column-1,generatedLine:o.line,generatedColumn:o.column-1,source:r,name:c})}}function $s({parent:t,elements:e,anchor:n},{helper:r}){let s=e.map(a=>`n${a}`).join(", ");return e.length>1&&(s=`[${s}]`),[E,...w(r("insert"),s,`n${t}`,n===void 0?void 0:`n${n}`)]}function Ss(t,{helper:e}){return[E,...w(e("prepend"),`n${t.parent}`,...t.elements.map(n=>`n${n}`))]}function A(t,e,n){const{content:r,ast:s,isStatic:a,loc:o,sharedData:i}=t;if(i)return[[e.sharedDataIdent(i.ident),-2,o]];if(a)return[[JSON.stringify(r),-2,o]];if(!t.content.trim()||s===!1||f.isConstantExpression(t))return[[r,-2,o],n];if(s===null)return nn(r,e,o,n);const l=[],u=new Map,c=[];v.walkIdentifiers(s,d=>{l.push(d),u.set(d,c.slice())},!1,c);let p=!1;if(l.length){const[d,h]=j();return l.sort((m,g)=>m.start-g.start).forEach((m,g)=>{const y=m.start-1,S=m.end-1,D=l[g-1],C=r.slice(D?D.end-1:0,y);C.length&&h([C,-3]);const P=r.slice(y,S),O=u.get(m),I=O[O.length-1];p||(p=I&&(I.type==="MemberExpression"||I.type==="OptionalMemberExpression")),h(...nn(P,e,{start:v.advancePositionWithClone(t.loc.start,P,y),end:v.advancePositionWithClone(t.loc.start,P,S),source:P},p?void 0:n,m,I,O)),g===l.length-1&&S<r.length&&h([r.slice(S),-3])}),d}else return[[r,-3,o]]}function nn(t,e,n,r,s,a,o){const{options:i,helper:l,identifiers:u}=e,{inline:c,bindingMetadata:p}=i;let d=t;const h=u[t];if(h&&h.length){const D=h[0];return $.isString(D)?a&&a.type==="ObjectProperty"&&a.shorthand?[[`${d}: ${D}`,-2,n]]:[[D,-2,n]]:A(D,e,r)}let m;v.isStaticProperty(a)&&a.shorthand&&(m=`${t}: `);const g=p&&p[t];if(c)switch(g){case"setup-let":d=t=S();break;case"setup-ref":d=t=`${t}.value`;break;case"setup-maybe-ref":const D=a&&v.isInDestructureAssignment(a,o||[]),C=a&&a.type==="AssignmentExpression"&&a.left===s,P=a&&a.type==="UpdateExpression"&&a.argument===s;t=C||P||D?d=`${t}.value`:S();break;case"props":t=$.genPropsAccessExp(t);break;case"props-aliased":t=$.genPropsAccessExp(p.__propsAliases[t]);break;default:t=t}else Ns(t)&&(g==="props-aliased"?t=`$props['${p.__propsAliases[t]}']`:t=`${g==="props"?"$props":"_ctx"}.${t}`),t=t;return[m,[t,-2,n,d]];function y(D){return D}function S(){return`${l("unref")}(${t})`}}function Ns(t){return!($.isGloballyAllowed(t)||t==="require"||t==="$props"||t==="$emit"||t==="$attrs"||t==="$slots")}function vs(t,e,n){const{seenVariable:r,variableToExpMap:s,expToVariableMap:a,seenIdentifier:o,updatedVariable:i}=Ts(e),l=Ds(t,r,s,a,o,i),u=_s(t,e,l,i,a);return Cs([...l,...u],t,n)}function Ts(t){const e=Object.create(null),n=new Map,r=new Map,s=new Set,a=new Set,o=(i,l,u,c,p=[])=>{u&&s.add(i),e[i]=(e[i]||0)+1,n.set(i,(n.get(i)||new Set).add(l));const d=r.get(l)||[];d.push({name:i,loc:c}),r.set(l,d),p.some(h=>h.type==="UpdateExpression"||h.type==="AssignmentExpression")&&a.add(i)};for(const i of t){if(!i.ast){i.ast===null&&o(i.content,i,!0);continue}const l=new Set;v.walkIdentifiers(i.ast,(u,c,p)=>{if(c&&rn(c)&&!l.has(c)){l.add(c);const d=ie(c,h=>{o(h.name,i,!0,{start:h.start,end:h.end})});o(d,i,!1,{start:c.start,end:c.end},p)}else p.some(rn)||o(u.name,i,!0,{start:u.start,end:u.end},p)})}return{seenVariable:e,seenIdentifier:s,variableToExpMap:n,expToVariableMap:r,updatedVariable:a}}function Ds(t,e,n,r,s,a){const o=[],i=new Map;for(const[l,u]of n)if(!a.has(l)&&e[l]>1&&u.size>0){const c=s.has(l),p=c?l:nt(l);u.forEach(d=>{if(d.ast&&p!==l){const h=i.get(d)||[];h.push({name:p,locs:r.get(d).reduce((m,g)=>(g.name===l&&g.loc&&m.push(g.loc),m),[])}),i.set(d,h)}}),!o.some(d=>d.name===p)&&(!c||xs(l,r,u))&&o.push({name:p,isIdentifier:c,value:$.extend({ast:c?null:Oe(t,l)},v.createSimpleExpression(l)),rawName:l,exps:u,seenCount:e[l]})}for(const[l,u]of i)u.flatMap(({name:c,locs:p})=>p.map(({start:d,end:h})=>({start:d,end:h,name:c}))).sort((c,p)=>p.end-c.end).forEach(({start:c,end:p,name:d})=>{l.content=l.content.slice(0,c-1)+d+l.content.slice(p-1)}),l.ast=Oe(t,l.content,l.loc);return o}function xs(t,e,n){const r=Array.from(n,a=>e.get(a).map(o=>o.name));if(r.every(a=>a.length===1)||r.some(a=>a.filter(o=>o===t).length>1))return!0;const s=r[0];return r.some(a=>a.length!==s.length)?!(r.some(a=>a.length>s.length&&a.every(o=>s.includes(o)))||r.some(a=>s.length>a.length&&s.every(o=>a.includes(o)))):!r.some(a=>a.some(o=>s.includes(o)))}function _s(t,e,n,r,s){const a=[],o=e.reduce((i,l)=>{const u=s.get(l);if(!u)return i;const c=u.map(p=>p.name);return l.ast&&l.ast.type!=="Identifier"&&!(c&&c.some(p=>r.has(p)))&&(i[l.content]=(i[l.content]||0)+1),i},Object.create(null));return Object.entries(o).forEach(([i,l])=>{if(l>1){const u=nt(i);if(!a.some(c=>c.name===u)){const c={};for(let d=n.length-1;d>=0;d--){const h=n[d];!h.exps||!h.seenCount||[...h.exps].every(m=>m.content===i&&h.seenCount===l)&&(c[h.name]=h.rawName,n.splice(d,1))}const p=$.extend({},e.find(d=>d.content===i));Object.keys(c).forEach(d=>{p.content=p.content.replace(d,c[d]),p.ast&&(p.ast=Oe(t,p.content,p.loc))}),a.push({name:u,value:p})}e.forEach(c=>{c.content===i?(c.content=u,c.ast=null):c.content.includes(i)&&(c.content=c.content.replace(new RegExp(Is(i),"g"),u),c.ast=Oe(t,c.content,c.loc))})}}),a}function Cs(t,e,n){const[r,s]=j(),a=Object.create(null),o=new Set;return t.forEach(({name:i,isIdentifier:l,value:u})=>{if(l){const c=a[i]=`_${i}`;o.add(c),n&&s("const "),s(`${c} = `,...A(u,e),E)}}),t.forEach(({name:i,isIdentifier:l,value:u})=>{if(!l){const c=a[i]=`_${i}`;o.add(c),n&&s("const "),s(`${c} = `,...e.withId(()=>A(u,e),a),E)}}),{ids:a,frag:r,varNames:[...o]}}function Is(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Oe(t,e,n){const r=t.options.expressionPlugins,s={plugins:r?[...r,"typescript"]:["typescript"]};try{return $e.parseExpression(`(${e})`,s)}catch(a){if(n){const o=new SyntaxError(a.message);throw o.loc=n,t.options.onError(o),o}throw a}}function nt(t){return`${t.replace(/[^a-zA-Z0-9]/g,"_").replace(/_+/g,"_").replace(/_+$/,"")}`}function ie(t,e){if(!t)return"";switch(t.type){case"Identifier":return e(t),t.name;case"StringLiteral":return t.extra?t.extra.raw:t.value;case"NumericLiteral":return t.value.toString();case"BinaryExpression":return`${ie(t.left,e)} ${t.operator} ${ie(t.right,e)}`;case"CallExpression":return`${ie(t.callee,e)}(${t.arguments.map(s=>ie(s,e)).join(", ")})`;case"MemberExpression":case"OptionalMemberExpression":const n=ie(t.object,e),r=t.computed?`[${ie(t.property,e)}]`:`.${ie(t.property,$.NOOP)}`;return`${n}${r}`;case"TSNonNullExpression":return`${ie(t.expression,e)}!`;default:return""}}const rn=t=>t.type==="MemberExpression"||t.type==="OptionalMemberExpression"||t.type==="TSNonNullExpression";function bs(t,e){var n,r;if(!(e.feature&2))return[];const{element:s,key:a,keyOverride:o,modifiers:i,delegate:l,effect:u,sharedData:c,value:p}=t,d=g();if(p&&(r=(n=e.options).isCppExpr)!=null&&r.call(n,p.ast))return[E,...w(e.helper("onElement"),`n${s}`,d,["(event: UniEvent) => {",...A(p,e),"(event)","}"])];const h=y(),m=`e${c.ident}${t.element}`;return[E,`const ${m} = ${e.sharedDataIdent(c.ident)}`,E,...w(e.helper(l?"delegate":"onElement"),`n${s}`,d,["(event: UniEvent) => {",`${m}(event)`,"}"],h)];function g(){const S=A(a,e);if(o){const D=JSON.stringify(o[0]),C=JSON.stringify(o[1]),P=["(",...S,")"];return[...P,` === ${D} ? ${C} : `,...P]}else return A(a,e)}function y(){let{options:S}=i;if(!(!S.length&&!u))return K(ke,u&&["effect: true"],...S.map(D=>[`${D}: true`]))}}function ws(t,e){if(!(e.feature&2))return[];const{helper:n,sharedDataIdent:r}=e;return[E,...w(n("setElementDynamicEvents"),`n${t.element}`,r(t.event.sharedData.ident))]}function As(t,e,n={nonKeys:[],keys:[]},r=!1){let s=["() => {}"];if(e&&e.content.trim())if(v.isMemberExpression(e,t.options))s=A(e,t),!Os(e,t)&&!r&&(s=["e => ",...s,"(e)"]);else if(v.isFnExpression(e,t.options))s=A(e,t);else{const i=e.content.includes("$event"),l=e.content.includes(";"),u=i?t.withId(()=>A(e,t),{$event:null}):A(e,t);s=[i?"$event => ":"() => ",l?"{":"(",...u,l?"}":")"]}const{keys:a,nonKeys:o}=n;return o.length&&(s=Ps(t,s,o)),a.length&&(s=ks(t,s,a)),r&&s.unshift("() => "),s}function Ps(t,e,n){return w(t.helper("withModifiers"),e,JSON.stringify(n))}function ks(t,e,n){return w(t.helper("withKeys"),e,JSON.stringify(n))}function Os(t,e){if(t.ast===null&&e.options.bindingMetadata[t.content]==="setup-const")return!0}function Vs(t,e){const{helper:n,pageVar:r}=e,{source:s,value:a,key:o,index:i,render:l,keyProp:u,once:c,id:p,component:d,onlyChild:h}=t;let m=null;const g=o&&o.content,y=i&&i.content,S=["() => (",...A(s,e),")"],D=Ee(),C=e.enterVFor(),[P,O]=e.enterScope(),I={},Z=`_for_item${C}`;I[Z]=null,D.forEach((N,_)=>{let b=`${Z}.value${N?N.path:""}`;if(N)if(N.helper&&(I[N.helper]=null,b=`${N.helper}(${b}, ${N.helperArgs})`),N.dynamic){const L=I[_]=v.createSimpleExpression(b),ae=e.options.expressionPlugins;L.ast=$e.parseExpression(`(${b})`,{plugins:ae?[...ae,"typescript"]:["typescript"]})}else I[_]=b;else I[_]=b});const H=[e.sharedDataVForItemVar],he=`const ${e.sharedDataVForVar} = useSharedDataVFor<UniSharedData, ${e.sharedDataVForClass(C)}>(${e.sharedDataVForItemVar})`,le=`_for_key${C}`;H.push(`, ${le}`),g&&(I[g]=`${le}.value`,I[le]=null);const V=`_for_index${C}`;H.push(`, ${V}`),y&&(I[y]=`${V}.value`,I[V]=null);const Q=e.enterBlock(l),G=ye(u,e.sharedDataVForItemVar);Q();const{selectorPatterns:U,keyOnlyBindingPatterns:B}=Ot(l,u,I),se=e.withId(()=>{const N=[];return N.push("(",...H,") => {",X,E,he,E),U.length||B.length?N.push(...Le(l,e,!1,()=>{const _=[];for(let b=0;b<U.length;b++){const{effect:L}=U[b],ae=[];for(const te of L.operations)ae.push(...it(te,e));ae.length&&(_.push(E,n(`render${e.helperType}Effect`),"(() => {",X),_.push(...ae),_.push(q,E,"})"))}for(const{effect:b}of B)for(const L of b.operations)_.push(...it(L,e));return _})):N.push(...Le(l,e)),N.push(q,E,"}"),N},I);O(),e.exitVFor();let ee=0;return h&&(ee|=1),d&&(ee|=2),c&&(ee|=4),[E,`const n${p} = `,...w([n(`create${e.helperType}For`),"null"],r,S,se,G,ee?String(ee):void 0,void 0)];function Ee(){const N=new Map;return a&&(m=a&&a.content,a.ast?v.walkIdentifiers(a.ast,(_,b,L,ae,te)=>{if(te){let Y="",ce=!1,me,ue;for(let M=0;M<L.length;M++){const k=L[M],R=L[M+1]||_;if(k.type==="ObjectProperty"&&k.value===R)k.key.type==="StringLiteral"?Y+=`[${JSON.stringify(k.key.value)}]`:k.computed?(ce=!0,Y+=`[${a.content.slice(k.key.start-1,k.key.end-1)}]`):Y+=`.${k.key.name}`;else if(k.type==="ArrayPattern"){const z=k.elements.indexOf(R);R.type==="RestElement"?Y+=`.slice(${z})`:Y+=`[${z}]`}else k.type==="ObjectPattern"&&R.type==="RestElement"&&(me=e.helper("getRestElement"),ue="["+k.properties.filter(z=>z.type==="ObjectProperty").map(z=>z.key.type==="StringLiteral"?JSON.stringify(z.key.value):z.computed?(ce=!0,a.content.slice(z.key.start-1,z.key.end-1)):JSON.stringify(z.key.name)).join(", ")+"]");R.type==="AssignmentPattern"&&(k.type==="ObjectProperty"||k.type==="ArrayPattern")&&(ce=!0,me=e.helper("getDefaultValue"),ue=a.content.slice(R.right.start-1,R.right.end-1))}N.set(_.name,{path:Y,dynamic:ce,helper:me,helperArgs:ue})}},!0):N.set(m,null)),N}function ye(N,_){if(!N)return!1;const b=e.withId(()=>A(N,e),T());return[...K(["(",")",", "],_,"_","__")," => {",E,he,E,"return ",...b,"}"]}function T(){const N={};return g&&(N[g]=null),y&&(N[y]=null),D.forEach((_,b)=>N[b]=null),N}}function Ms(t,e){const{helper:n}=e,{value:r,element:s}=t;return[E,...w(n("setHtml"),`n${s}`,A(r,e))]}function sn(t,e,n=!1){const{helper:r,pageVar:s}=e,{condition:a,positive:o,negative:i,once:l}=t,[u,c]=j(),p=["() => (",...Rs(a,e),")"];let d=Re(o,e),h=!1;return i&&(i.type===1?h=Re(i,e):h=["() => ",...sn(i,e,!0)]),n||c(E,`const n${t.id} = `),c(...w(r(`create${e.helperType}If`),s,p,d,h,l&&"true")),u}function Rs(t,e){return t.sharedData?A(t,e):[JSON.stringify(_e(t))]}function Ls(t,e){const{helper:n}=e,{prop:{key:r,values:s,sharedData:a},tag:o}=t,i=r.content;if(!["class","style","hover-class"].includes(i)){const c=e.getPropertyOptions(o,i);if(!c)return[];const{name:p,property:d,className:h}=c,[m,g]=j();g(E);const y=h?`${e.genCastCode([`n${t.element}`],h,{dereference:!0}).join("")}`:`n${t.element}`;return g(d?`${y}.${p} = `:`${y}.${p}(`),g(...a?an(c,[e.sharedDataIdent(a.ident)],e):an(c,on(s,e),e)),d||g(")"),m}if(e.options.renderer==="nativeView")return[];const l=i==="class"||i==="hover-class",u=[`n${t.element}`,!1];if(l&&u.unshift("__sharedData"),a)u.push(e.sharedDataIdent(a.ident));else if(l&&s.length===1&&s[0].isStatic){const c=s[0].content;u.push(JSON.stringify(c.split(/\s+/).map(p=>p)))}else u.push(on(s,e));return[E,...w([n(i==="class"?"setElementClass":i==="hover-class"?"setElementHoverClass":"setElementStyle"),null],...u)]}function an(t,e,n){return Br(t.type)?n.genCastCode(e,t.type):e}function Fs(t,e){const{helper:n,sharedDataIdent:r}=e;return[E,...w(n(`set${e.helperType}DynamicProps`),"__sharedData",`n${t.element}`,r(t.sharedData.ident))]}function on(t,e){return t.length===1?A(t[0],e):K(Pe,...t.map(n=>A(n,e)))}function Ws(t,e){return e.feature&16?e.options.isCppExpr(t.value.ast)?[E,...w(e.helper("onElementRef"),`n${t.element}`,["(el: UniElement) => {",...A(t.value,e),"(el)","}"])]:t.value.sharedData?[E,...w(e.helper("onElementRef"),`n${t.element}`,e.sharedDataIdent(t.value.sharedData.ident))]:[]:[]}function Us(t){return[]}function js(t,e){if(!(e.feature&1))return[];const{helper:n}=e,{element:r,values:s,generated:a}=t,o=Js(s,e);return[E,...w(n("setElementText"),`${a?"x":"n"}${r}`,o)]}function Js(t,e){return t.flatMap((n,r)=>{let s=A(n,e);return r>0&&s.unshift(" + "),s})}function Bs(t,e){return e.feature&1?[E,`const x${t.parent} = ${e.helper(`child${e.helperType}`)}(n${t.parent})`]:[]}function Gs(t,e){return e.feature&8?[E,...w(e.helper("applyElementVShow"),`n${t.element}`,["() => (",...A(t.dir.exp,e),")"])]:[]}const Ks={text:"applyElementTextModel",dynamic:"applyElementDynamicModel"};function Hs(t,e){if(!(e.feature&4))return[];const{modelType:n,element:r,dir:{exp:s,modifiers:a}}=t;return[E,...w(e.helper(Ks[n]),`n${r}`,["() => (",...A(s,e),")"],e.sharedDataIdent(s.sharedData.vModel.eventIdent),a.length?`{ ${a.map(o=>o.content+": true").join(",")} }`:void 0)]}function Ys(t,e){switch(t.name){case"show":return Gs(t,e);case"model":return Hs(t,e);default:return[]}}function rt(t,e){const n=qs(t,e.block.operation);return n.length?zs(n,e):[]}function zs(t,e){const{helper:n}=e,r=`n${t[0].element}`,s=t.map(o),a=K(Pe,...s);return[E,...w(n("withVaporDirectives"),r,a)];function o({dir:i,name:l,asset:u}){const c=u?v.toValidAssetId(l,"directive"):A($.extend(v.createSimpleExpression(l,!1),{ast:null}),e),p=i.exp&&["() => ",...A(i.exp,e)],d=i.arg&&A(i.arg,e),h=!!i.modifiers.length&&["{ ",Xs(i.modifiers.map(m=>m.content))," }"];return K(Pe.concat("null"),c,p,d,h)}}function Xs(t){return t.map(e=>`${v.isSimpleIdentifier(e)?e:JSON.stringify(e)}: true`).join(", ")}function qs(t,e){return e.filter(n=>n.type===13&&n.element===t&&!n.builtin)}function Zs(t,e){const{helper:n,sharedDataIdent:r}=e,{root:s,props:a,slots:o,sharedData:i}=t,l=ta(o,e),[u,c]=ea(a,e),p=c.reduce((m,{name:g,value:y})=>{const S=As(e,y,void 0,!1);return[...m,`const ${g} = `,...S,E]},[]),d=[r(i.ident),void 0,l,s?"true":!1];let h=n(`create${e.helperType}Component`);return t.dynamic&&!t.dynamic.isStatic?h=n(`create${e.helperType}DynamicComponent`):t.asset&&(h=n(`create${e.helperType}ComponentWithFallback`),d.unshift(e.pageVar)),[E,...p,`const n${t.id} = `,...w(h,...d),...rt(t.id,e)]}function Qs(t,e){const{seenInlineHandlerNames:n}=t;e=nt(e);const r=n[e]||0;return n[e]=r+1,r===0?e:`${e}${r}`}function ea(t,e){const n=Object.create(null),r=[],s=t[0];if($.isArray(s))for(let a=0;a<s.length;a++){const o=s[a];o.handler&&o.values.forEach((i,l)=>{if(!v.isMemberExpression(i,e.options)){const u=Qs(e,`_on_${o.key.content.replace(/-/g,"_")}`);r.push({name:u,value:i}),n[u]=null,o.values[l]=$.extend({ast:null},v.createSimpleExpression(u))}})}return[n,r]}function ta(t,e){if(!t.length)return;const n=t[0];return n.slotType===0?st(n,e,t.length>1?t.slice(1):void 0):st({slots:{}},e,t)}function st({slots:t},e,n){const r=Object.keys(t).map(s=>[`${JSON.stringify(s)}: `,...ot(t[s],e)]);return n&&r.push(["'$': ",...na(n,e)]),K(ke,...r)}function na(t,e){return K(Es,...t.map(n=>n.slotType===0?st(n,e):n.slotType===4?n.slots.content:at(n,e,!0)))}function at(t,e,n=!1){let r;switch(t.slotType){case 1:r=ra(t,e);break;case 2:r=sa(t,e);break;case 3:r=aa(t,e);break}return n?["() => (",...r,")"]:r}function ra(t,e){const{name:n,fn:r}=t;return K(ke,["'name': ",...A(n,e)],["'fn': ",...ot(r,e)])}function sa(t,e){e.enterVFor();const{name:n,fn:r,loop:s}=t,{value:a,key:o,index:i,source:l}=s,u=a&&a.content,c=o&&o.content,p=i&&i.content,d={};u&&(d[u]=u),c&&(d[c]=c),p&&(d[p]=p);const h=K(ke,["'name': ",...e.withId(()=>{const g=e.enterBlock(r),y=A(n,e);return g(),y},d)],["'fn': ",...e.withId(()=>ot(r,e),d)]),m=[...w(e.helper(`create${e.helperType}ForSlots`),A(l,e),[...K(["(",")",", "],e.sharedDataVForVar,u||(c||p?"_":void 0),c||(p?"__":void 0),p)," => (",...h,")"])];return e.exitVFor(),m}function aa(t,e){const{condition:n,positive:r,negative:s}=t;return[...A(n,e),X,E,"? ",...at(r,e),E,": ",...s?[...at(s,e)]:["null"],q]}function ot(t,e){let n=!1,r,s,a;const{props:o,key:i,node:l}=t,u=new Set;o&&(n=!!o.ast)&&([a,s]=e.enterScope());const c={};u.forEach(d=>c[d]=n?`${r}[${JSON.stringify(d)}]`:null);let p=e.withId(()=>Re(t,e,[r]),c);return s&&s(),i&&(p=["() => {",X,E,"return ",...w(e.helper("createKeyedFragment"),["() => ",...A(i,e)],p),q,E,"}"]),l.type===1&&(p=[`${e.helper(`with${e.helperType}VaporCtx`)}(`,...p,")"]),p}function oa(t,e){const{helper:n,pageVar:r}=e,{id:s,name:a,fallback:o,noSlotted:i}=t,[l,u]=j(),c=a.isStatic?A(a,e):["() => (",...A(a,e),")"];let p;return o&&(p=Re(o,e)),u(E,`const n${s} = `,...w(n(`create${e.helperType}Slot`),r,c,"null",p,i&&"true")),l}function ln(t,e){const[n,r]=j();for(const s of t)r(...cn(s,e));return n}function cn(t,e){const[n,r]=j();return f.isBlockOperation(t)&&t.parent&&r(...ca(t,e)),r(...it(t,e)),n}function it(t,e){switch(t.type){case 2:return Ls(t,e);case 3:return Fs(t,e);case 4:return js(t,e);case 5:return bs(t,e);case 6:return ws(t,e);case 7:return Ms(t,e);case 8:return Ws(t,e);case 9:return $s(t,e);case 10:return Ss(t,e);case 15:return sn(t,e);case 16:return Vs(t,e);case 11:return Zs(t,e);case 14:return Us();case 12:return oa(t,e);case 13:return Ys(t,e);case 17:return Bs(t,e);case 18:return ua(t,e);default:const n=t;throw new Error(`Unhandled operation type in genOperation: ${n}`)}}function ia(t,e,n){const{helper:r}=e,s=t.flatMap(m=>m.expressions),[a,o,i]=j(),l=n===void 0;let u=0;const{ids:c,frag:p,varNames:d}=vs(e,s,l);for(let m=0;m<t.length;m++){const g=t[m];u+=g.operations.length;const y=e.withEffect(()=>e.withId(()=>la(g,e),c));m>0&&y.length&&o(E),a[a.length-1]===")"&&y[0]==="("&&o(";"),o(...y)}const h=a.filter(m=>m===E).length;return a.length&&(h>1||u>1||p.length>0)&&(i("{",X,E),o(q,E,"}"),t.length||i(E)),t.length&&a.length&&(i(E,`${r(`render${e.helperType}Effect`)}(() => `),o(")")),!l&&d.length&&i(E,"let ",d.join(", ")),n&&o(...e.withId(n,c)),a}function la({operations:t},e){const[n,r]=j(),s=ln(t,e);return s.filter(a=>a===E).length>1?r(...s):r(...s.filter(a=>a!==E)),n}function ca(t,e){const{parent:n,anchor:r,append:s,last:a}=t;return[E,...w(e.helper(`set${e.helperType}InsertionState`),`n${n}`,r==null?void 0:r===-1?"0":s?r===0?"null":`${r}`:`n${r}`,a&&"true")]}function ua({id:t},e){return e.feature&1?[E,`const n${t} = ${e.helper(`get${e.helperType}InsertionParent`)}()`]:[]}const J={TEXT:"text",COMMENT:"comment",ELEMENT:"element"},F={VALUE_ATTR:"value",EMPTY_STRING:"",TEXT_PLACEHOLDER:f.TEXT_PLACEHOLDER,UNKNOWN_COMMENT:"unknown",EXT_STYLE_MARKER:"ext:style"},fe={ELEMENT:"e",TEMPLATE:"t",FACTORY:"f"},un="<!--",lt=/\s/,pa=/[\s=]/,ct=/\s*\/$/;class $t{constructor(e){this.html=e,this.length=e.length,this.index=0}parse(){const e=[];for(this.index=0;this.index<this.length;)if(this.html[this.index]==="<"){const n=this.parseTag();n?(e.push(n.node),this.index=n.endIndex):this.index++}else{const n=this.parseText();n&&e.push(n)}return e}parseText(){const e=this.index,n=this.html.indexOf("<",e),r=n===-1?this.length:n;if(e===r)return null;const s=this.html.substring(e,r);return this.index=r,{type:"text",content:s}}parseTag(){return this.html.startsWith(un,this.index)?this.parseComment():this.html.startsWith("<!",this.index)?this.parseDoctype():this.parseElement()}parseComment(){const e=this.index+un.length,n=this.html.indexOf("-->",e);return n===-1?null:{node:{type:"comment",content:this.html.substring(e,n)},endIndex:n+3}}parseDoctype(){const e=this.html.indexOf(">",this.index+2);return e===-1?null:{node:{type:"comment",content:""},endIndex:e+1}}parseElement(){const e=this.html.indexOf(">",this.index);if(e===-1)return null;const n=this.html.substring(this.index+1,e),{tag:r,attrs:s,selfClosing:a}=this.parseTagContent(n);if(a)return{node:{type:"element",tag:r,attrs:s,children:[]},endIndex:e+1};const o=this.findMatchingEndTag(r,e+1);if(o===-1)return{node:{type:"element",tag:r,attrs:s,children:[]},endIndex:e+1};const i=this.html.substring(e+1,o),l=i?new $t(i).parse():[];return r==="text"&&l.length===1&&l[0].type==="text"&&l[0].content.length===1&&l[0].content[0]!==`
`&&(s["max-lines"]="1"),{node:{type:"element",tag:r,attrs:s,children:l},endIndex:o+`</${r}>`.length}}parseTagContent(e){const n=ct.test(e),r=e.replace(ct,"").trim();if(!r)return{tag:"",attrs:{},selfClosing:n};const s=r.search(lt),a=s===-1?r:r.substring(0,s);if(s===-1)return{tag:a,attrs:{},selfClosing:n};const o=r.substring(s+1),i=this.parseAttributes(o);return{tag:a,attrs:i,selfClosing:n}}parseAttributes(e){const n={};let r=0;const s=e.length;for(;r<s&&(r=this.skipWhitespace(e,r),!(r>=s));){const a=r;for(;r<s&&!pa.test(e[r]);)r++;if(r===a)break;const o=e.substring(a,r);if(r=this.skipWhitespace(e,r),r>=s||e[r]!=="="){this.isSpecialAttribute(o)||(n[o]=o);continue}if(r++,r=this.skipWhitespace(e,r),r>=s){this.isSpecialAttribute(o)||(n[o]="");continue}const i=this.parseAttributeValue(e,r);(!this.isSpecialAttribute(o)||i.value.trim()!=="")&&(n[o]=i.value),r=i.endIndex}return n}parseAttributeValue(e,n){const r=e[n];if(r==='"'||r==="'"){const s=n+1;let a=s;for(;a<e.length&&e[a]!==r;)a++;return{value:e.substring(s,a),endIndex:a<e.length?a+1:a}}else{const s=n;let a=s;for(;a<e.length&&!lt.test(e[a]);)a++;return{value:e.substring(s,a),endIndex:a}}}isSpecialAttribute(e){return e==="id"||e==="class"||e==="style"||e==="hover-class"}skipWhitespace(e,n){for(;n<e.length&&lt.test(e[n]);)n++;return n}findMatchingEndTag(e,n){const r=`<${e}`,s=`</${e}>`;let a=1,o=n;for(;a>0&&o<this.length;){const i=this.html.indexOf(r,o),l=this.html.indexOf(s,o);if(l===-1)break;if(i!==-1&&i<l){const u=this.html.indexOf(">",i);if(u!==-1&&u<l){const c=this.html.substring(i+1,u);ct.test(c)||a++}o=u+1}else{if(a--,a===0)return l;o=l+s.length}}return-1}}function pn(t){return!t||t.length!==1||t[0].type!==J.TEXT||t[0].content===" "?F.EMPTY_STRING:t[0].content||F.EMPTY_STRING}function ut(t){return!t||Object.keys(t).length===0||Object.keys(t).length===1&&F.EXT_STYLE_MARKER in t}function da(t,e){const n=$.extend({},t);return e&&(n[F.VALUE_ATTR]=e),n}function dn(t){const e="page: UniPage",n=t.options.renderer==="element"?": UniElement":": UniNativeBaseView";return{paramType:e,returnType:n}}function Ve(t){return`${fe.ELEMENT}${t.templateVariableCounter++}`}function fa(t,e,n=!0){return n&&e.resetTemplateCounters(),hn(t,e)}function fn(){return{variableName:"",statements:[]}}function hn(t,e){const n=e.options.renderer==="nativeView",r=e.renderTextContext;switch(t.type){case J.TEXT:return r.inTextElement?n?fn():ma(t.content||F.EMPTY_STRING,e):ha(t.content||F.EMPTY_STRING,e);case J.COMMENT:return mn(t.content||F.EMPTY_STRING,e);case J.ELEMENT:{if(r.inTextElement&&n)return t.tag==="text"&&(r.enterTextElement(),dt(t,e),r.exitTextElement()),fn();if(t.tag==="text"){r.enterTextElement();const s=dt(t,e);return n&&r.textElementCount===1&&r.genIncreaseNativeViewCounter()&&s.statements.push(r.genIncreaseNativeViewCounter()),r.exitTextElement(),r.textElementNames.pop(),s}return dt(t,e)}default:return mn(F.UNKNOWN_COMMENT,e)}}function ve(t){return F.EMPTY_STRING===t||t===F.TEXT_PLACEHOLDER}function pt(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&amp;/g,"&")}function ha(t,e){const n=Ve(e),r=[`const ${n} = ${e.genCreateTag("text")}`];return ve(t)||r.push(`${n}.setText(${JSON.stringify(pt(t))})`),{variableName:n,statements:r}}function ma(t,e){const n=Ve(e),r=[];if(!ve(t)){const s=e.renderTextContext.textElementNames.slice(-1)[0];r.push(`${s!=null?s:n}.setText(${JSON.stringify(pt(t))})`)}return{variableName:"",statements:r}}function mn(t,e){const n=Ve(e),r=[`const ${n} = ${e.genCreateTag("comment",JSON.stringify(t))}`];return{variableName:n,statements:r}}const ga={[J.TEXT]:Ea};function dt(t,e){const{tag:n,attrs:r,children:s}=t,a={tag:n,attrs:r,children:s},o=ga[n];return o?o(a,e):ya(a,e)}function Ea(t,e){const{tag:n,attrs:r,children:s}=t;if(s&&s.some(a=>a.type===J.ELEMENT))return ft(n,e,r,s);{const a=pn(s),o=da(r,a);return ft(n,e,o,void 0)}}function ya(t,e){const{tag:n,attrs:r,children:s}=t;return ft(n,e,r,s)}function $a(t,e,n){if(!e)return;const r={};for(const[s,a]of Object.entries(e))n.options.isIgnoreAttr(t,s)||(r[s]=a);return r}function ft(t,e,n,r){const s=Ve(e),a=t==="text",o=e.options.renderer==="nativeView";a&&e.renderTextContext.textElementNames.push(s);const i=[];i.push(`const ${s} = ${e.genCreateTag(t)}`);const l=$a(t,n,e);if(l&&!ut(l)){let u=!1;F.EXT_STYLE_MARKER in l&&(u=!0,delete l[F.EXT_STYLE_MARKER]);for(const[c,p]of Object.entries(l))if(c==="value"&&t==="text")ve(p)||i.push(`${s}.setText(${JSON.stringify(pt(p))})`);else if(c==="style"){const d=de(e.options.platform,e.options.renderer),{obj:h}=e.options.parseStaticStyle(d,t,p,!1);if(h){const m=Object.keys(h);if(u&&(Hn(d)||d==="all")){const{code:g}=e.options.parseStaticStyle("all",t,p,!0);g&&g!=="{}"&&i.push(`${e.helper("setElementExtStyle")}(${s}, ${g})`)}m.forEach(g=>{h[g].setterCode&&i.push(`${s}.${h[g].setterCode}`)})}}else{const d=e.options.parseStaticProp(de(e.options.platform,e.options.renderer),t,c,p);d&&d.code&&i.push(`${s}.${d.code.replace(new RegExp(`['"]${f.IMPORT_EXP_START}(.*?)${f.IMPORT_EXP_END}['"]`),"$1")}`)}}if(r&&r.length>0)for(const u of r){const c=!(a&&o)&&Sa(u,e);if(c)i.push(e.genAppendChild(s,c));else{const p=hn(u,e);i.push(...p.statements),i.push(e.genAppendChild(s,p.variableName))}}return{variableName:s,statements:i}}function Sa(t,e){switch(t.type){case J.TEXT:return!(e.feature&1)||ve(t.content)?e.genCreateTag("text"):null;case J.COMMENT:return e.genCreateTag("comment",JSON.stringify(t.content||F.EMPTY_STRING));case J.ELEMENT:const n=t;return Na(n)?e.genCreateTag(n.tag):null;default:return e.genCreateTag("comment",JSON.stringify(F.UNKNOWN_COMMENT))}}function Na(t){return ut(t.attrs)?t.children&&t.children.length>0?!!(t.tag===J.TEXT&&t.children.length===1&&t.children[0].type===J.TEXT&&ve(t.children[0].content)):!0:!1}function va(t,e,n){try{if(!t||typeof t!="string")return Me(e,n);const r=new $t(t).parse();return r.length===0?Me(e,n):r.length===1?Ta(r[0],e,n):Me(e,n)}catch{return Me(e,n)}}function Me(t,e){const{paramType:n,returnType:r}=dn(e);return[`const ${fe.FACTORY}${t} = (${n})${r} => {`,E,`  return ${e.genCreateTag("text",JSON.stringify(F.EMPTY_STRING))}`,E,"}"]}function Ta(t,e,n){const{paramType:r,returnType:s}=dn(n),a=Da(t,n);if(a)return[`const ${fe.FACTORY}${e} = (${r})${s} => {`,E,`  return ${a}`,E,"}"];const o=fa(t,n),i=[`const ${fe.FACTORY}${e} = (${r})${s} => {`,E];for(const l of o.statements)typeof l=="string"?i.push(`  ${l}`,E):i.push(l,E);return i.push(`  return ${o.variableName}`,E,"}"),i}function Da(t,e){switch(t.type){case J.TEXT:return e.genCreateTag("text");case J.COMMENT:return e.genCreateTag("comment",JSON.stringify(t.content||F.EMPTY_STRING));case J.ELEMENT:const n=t;return xa(n)?e.genCreateTag(n.tag):null;default:return e.genCreateTag("comment",JSON.stringify(F.UNKNOWN_COMMENT))}}function xa(t){return ut(t.attrs)?t.type===J.TEXT?!pn(t.children):!t.children||t.children.length===0:!1}const gn=t=>t[0]!=="<"&&t!==f.TEXT_PLACEHOLDER;function _a(t,e){const n=[];for(let r=0;r<t.length;r++){const s=t[r];if(!gn(s)){const a=va(s,r,e);n.push(E,...a)}}return n}function Ca(t,e,n){const{helper:r,options:s}=n,a=[];for(let o=0;o<t.length;o++){const i=t[o];if(gn(i))i===f.TEXT_NODE_PLACEHOLDER?a.push(`const ${fe.TEMPLATE}${o} = () => ${n.options.renderer==="element"?`${n.pageVar}.createTextNode()`:'""'}`):a.push(`const ${fe.TEMPLATE}${o} = (): string => "${n.options.renderer==="element"?i:""}"`);else{const l=o===e?", true":"";a.push(`const ${fe.TEMPLATE}${o} = ${r(`${s.renderer}Factory`)}(${n.pageVar}, ${fe.FACTORY}${o}${l})`)}o<t.length-1&&a.push(E)}return a}function Ia(t,e,n){return _a(Array.from(t.keys()),n)}function ht(t,e){const[n,r]=j(),{id:s,template:a,operation:o,hasDynamicChild:i}=t;return s!==void 0&&a!==void 0&&(r(E,`const n${s} = t${a}()`),r(...rt(s,e))),o&&r(...cn(o,e)),i&&r(...mt(t,e,r,`n${s}`)),n}function mt(t,e,n,r=`n${t.id}`){const{helper:s,helperType:a,options:o}=e,[i,l]=j(),{children:u}=t;let c=0,p,d=0,h=0,m=0;const g=t.tag==="text";for(let[y,S]of u.entries()){if(S.type===2){m++;continue}if(g&&o.renderer==="nativeView"&&S.tag==="text"){m++;continue}y=y-m,S.operation&&S.operation.anchor===-1&&h++,S.flags&2?c--:S.ifBranch&&d++;const D=S.flags&1?S.flags&4?S.anchor:S.id:void 0;if(D===void 0&&!S.hasDynamicChild){l(...ht(S,e));continue}const C=y+c,P=D===void 0?`p${e.block.tempId++}`:`n${D}`;if(n(E,`const ${P} = `),p)C-p[1]===1?n(...w(s(`next${a}`),p[0])):n(...w(s(`nthChild${a}`),r,String(C)));else if(C===0)n(...w(s(`child${a}`),r));else{let O=w(s(`child${a}`),r);C===1?O=w(s(`next${a}`),O):C>1&&(O=w(s(`nthChild${a}`),r,String(C))),n(...O)}D===S.anchor&&!S.hasDynamicChild&&l(...ht(S,e)),D!==void 0&&l(...rt(D,e)),p=[P,C],l(...mt(S,e,n,P))}return i}function Re(t,e,n=[],r){return["(",...n,") => {",X,...Le(t,e),q,E,"}"]}function Le(t,e,n,r){const[s,a]=j(),{dynamic:o,effect:i,operation:l,returns:u,key:c}=t,p=e.enterBlock(t);t.hasDeferredVShow&&a(E,"const deferredApplyVShows = []");for(const m of o.children)a(...ht(m,e));for(const m of o.children)m.hasDynamicChild||a(...mt(m,e,a,`n${m.id}`));if(a(...ln(l,e)),a(...ia(i.filter(m=>!m.generated),e,r)),t.hasDeferredVShow&&a(E,"deferredApplyVShows.forEach(fn => fn())"),o.needsKey)for(const m of o.children){const g=c?A(c,e):JSON.stringify(m.id);a(E,`n${m.id}.$key = `,...g)}a(E,"return ");const d=u.map(m=>`n${m}`),h=d.length>1?[...K(Pe,...d),` as Uni${e.helperType}Block[]`]:[d[0]||"null"];return a(...h),p(),s}const ba=63,wa=0;function Aa(t,e){return!1}function Pa(t,e){return t==="text"&&e==="value"}class ka{constructor(e){this.__inTextElement=!1,this.increaseNativeViewCount=0,this.textElementCount=0,this.textElementNames=[],this.options=e}set inTextElement(e){this.__inTextElement!==e&&(this.__inTextElement=e,e&&(this.increaseNativeViewCount=0))}get inTextElement(){return this.__inTextElement}enterTextElement(){this.inTextElement&&this.increaseNativeViewCount++,this.inTextElement=!0,this.textElementCount++}exitTextElement(){this.textElementCount--,this.textElementCount===0&&(this.inTextElement=!1)}genIncreaseNativeViewCounter(){return this.increaseNativeViewCount>0?`page.increaseNativeViewCounter(${this.increaseNativeViewCount})`:""}}class Oa extends wt{constructor(e,n){super(),this.ir=e,this.helpers=new Set([]),this.helper=a=>(this.helpers.add(a),`_${a}`),this.delegates=new Set,this.identifiers=Object.create(null),this.seenInlineHandlerNames=Object.create(null),this.scopeLevel=0,this.sharedDataIdent=a=>(this.effectSharedDataIdentifiers.add(a),`${this.sharedDataVar}.get_${a}(__reactivity)`),this.templateVariableCounter=0,this.templateStyleCounter=0,this.effectSharedDataIdentifiers=new Set;const r={root:"",mode:"module",platform:"app-harmony",target:"dom-c",renderer:"element",prefixIdentifiers:!0,sourceMap:!1,filename:"template.vue.html",relativeFilename:"",scopeId:null,runtimeGlobalName:"Vue",runtimeModuleName:"vue",ssrRuntimeModuleName:"vue/server-renderer",ssr:!1,isTS:!1,inSSR:!1,inline:!1,bindingMetadata:{},expressionPlugins:[],componentType:"page",className:"",scriptCppBlocks:[],parseStaticStyle:(a,o,i,l)=>({obj:{},messages:[]}),parseStaticProp:()=>{},isIgnoreAttr:()=>!1,onError:v.defaultOnError,onWarn:v.defaultOnWarn,onVueTemplateCompileLog:()=>{},isCppExpr:()=>!1};this.options=$.extend(r,n),this.block=e.block;const s=this.options.renderer==="nativeView";this.genCreateTag=s?this.genCreateNativeView:this.genCreateElement,this.genAppendChild=s?this.genAppendChildNativeView:this.genAppendChildElement,this.getPropertyOptions=us(this.options.platform,this.options.target),this.renderTextContext=new ka(this.options)}withId(e,n){const{identifiers:r}=this,s=Object.keys(n);for(const o of s)r[o]||(r[o]=[]),r[o].unshift(n[o]||o);const a=e();return s.forEach(o=>$.remove(r[o],n[o]||o)),a}enterScope(){return[this.scopeLevel++,()=>this.scopeLevel--]}get insVar(){return"__ins"}get insMethodName(){return`getCurrent${this.helperType}VaporComponentInstance`}get pageVar(){return"__page"}get helperType(){return this.options.renderer==="nativeView"?"NativeView":"Element"}sharedDataVForClass(e){return`${this.options.className}SharedData_VFor${e}`}get feature(){return this.options.renderer==="nativeView"?wa:ba}resetTemplateCounters(){this.templateVariableCounter=0,this.templateStyleCounter=0}withEffect(e){this.effectSharedDataIdentifiers.clear();const n=e();if(this.effectSharedDataIdentifiers.size){const[r,s]=j();return s(E),s(`if(${Fa(this)}) {`),s(E),s(X),s(...n),s(q),s(E),s("}"),this.effectSharedDataIdentifiers.clear(),r}return n}genCreateNativeView(e,n,r){const s=[];n&&e!=="text"&&s.push(n),r?s.push("true"):s.push("false");const a=s.join(", ");switch(e){case"view":return`page.createNativeView(${a})`;case"text":return`page.createNativeTextView(${a})`;case"image":return`page.createNativeImageView(${a})`;case"comment":return"null";case"scroll-view":return"page.createNativeScrollView()";case"native-view":return"page.createNativeCustomView()";default:return"page.createNativeView(false)"}}genCreateElement(e,n,r){const s=[];n&&e!=="comment"&&s.push(n),r?s.push("true"):e!=="comment"&&s.push("false");const a=s.join(", ");switch(e){case"view":return`page.createViewElement(${a})`;case"text":return`page.createTextElement(${a})`;case"_text":return"page.createTextNode()";case"image":return`page.createImageElement(${a})`;case"comment":return`page.createComment(${a||'""'})`;case"scroll-view":return"page.createScrollViewElement()";case"native-view":return"page.createNativeViewElement()";default:return"page.createViewElement(false)"}}genAppendChildNativeView(e,n){return e===""||n===""?"":`${this.helper("appendNativeViewChild")}(${e}, ${n})`}genAppendChildElement(e,n){return e===""||n===""?"":`${e}.appendChild(${n})`}genCastCode(e,n,r){return bt(this.options.target)?w(`UTSCPP.as<${n}${r!=null&&r.dereference?", '*'":""}>`,e):[";(",...e,"as",n,")"]}}function En(t,e){var n;e.renderer=(n=e.renderer)!=null?n:"element",e.isIgnoreAttr=e.renderer==="element"?Aa:Pa;const[r,s]=j(),a=new Oa(t,e),{helpers:o}=a,i="render"+$.capitalize(e.renderer),l=[`__sharedData: ${e.className}SharedData`,"__page: UniPage","__reactivity: VueReactivity"].join(", ");s(E,`export function ${i}(${l}): Uni${a.helperType}Block {`),s(X);const u=s(E);a.options.scriptCppBlocks.length>0&&a.feature&32&&s(...Ua(a.options.scriptCppBlocks)),s(...Ra(a));const c=Ia(t.template,t.rootTemplateIndex,a);if(s(...c),t.template.size>0){const y=Ca(Array.from(t.template.keys()),t.rootTemplateIndex,a);s(E,...y)}s(...Le(t.block,a)),s(q,E),s("}"),a.helpers.has(a.insMethodName)?r.splice(u,0,`const ${a.insVar} = ${a.helper(a.insMethodName)}()!`):r.splice(u,1);const p=Va(a),d=Ma(a)+p,h=[...d].filter(y=>y===`
`).length;h&&r.unshift(...new Array(h).fill(tn));let[m,g]=ys(r,a);return m=d+m,{code:m,ast:t,preamble:d,map:g&&g.toJSON(),helpers:o}}function Va({delegates:t,helper:e}){return t.size?w(e("delegateEvents"),...Array.from(t).map(n=>`"${n}"`)).join("")+`
`:""}function Ma({helpers:t,helper:e,options:n}){let r="";return["getRestElement","getDefaultValue"].forEach(s=>{t.delete(s)}),t.size&&(r+=`import { ${[...t].map(s=>`${s} as _${s}`).join(", ")} } from '${n.runtimeModuleName}';
`),r}function Ra({ir:t}){const e=t.node.imports,n=[];for(const r of e){const s=r.exp.content;n.push(E,`const ${s} = '${r.path}';`)}return n}const La=new Ce(2e3);function Fa(t){return Array.from(t.effectSharedDataIdentifiers).map(e=>Wa(e,t)).join(" || ")}function Wa(t,e){const{index:n,bitValue:r}=La.getGroupInfo(t);return`${e.sharedDataVar}._flag${n} & ${r}`}function Ua(t){const[e,n]=j();n(E);for(const r of t)n(`const ${r.module} = new ${r.className}()`);return e}function gt(t,e){const n=new SyntaxError(t);return e&&(n.loc={start:{...e.start},end:{...e.end},source:e.source}),n}function yn(t,e){const n=gt(t,e);return n.errorType="css",n}function $n(t,e){const n=gt(t,e);return n.errorType="prop",n}const ja={1e4:"Text or interpolation can only be used inside <text> tag.",10001:"A <text> element can only contain one text node."};function Fe(t,e,n){let r=ja[t];return gt(r,e)}function Ja(t){return t.type===1&&t.tagType===0&&t.tag==="text"}function Ba(t){return t.type===1&&t.tagType===0&&t.tag==="view"}function Ga(t){return t.tagType===0||t.tagType===1}function Ka(t,e){function n(s,a,o){var i,l;const u=Ga(a)?a:o;for(let c=0;c<s.length;c++){const p=s[c];if(p.type===2||p.type===5){if(!u)(i=e.onError)==null||i.call(e,Fe(1e4,p.loc));else if(!Ja(u)&&u.tagType!==1)if(Ba(u)){const d=p;s[c]=d}else(l=e.onError)==null||l.call(e,Fe(1e4,p.loc))}else p.type===1&&r(p,u)}}function r(s,a=null){var o,i;if(s.type===1){const l=s;if(l.tag==="text"){let u=0,c=!1;for(let p=0;p<l.children.length;p++){const d=l.children[p];if(d.type===2){if(!c&&(c=!0,u++,u>1)){(o=e.onError)==null||o.call(e,Fe(10001,l.loc));break}}else d.type===1&&(c=!1)}}n(l.children,l,a)}else if(s.type===0){const l=s;for(let u=0;u<l.children.length;u++){const c=l.children[u];c.type===2||c.type===5?(i=e.onError)==null||i.call(e,Fe(1e4,c.loc)):c.type===1&&r(c,null)}}}r(t)}const Sn=new Map;function Ha(t){return Sn.get(t)||{className:"",scriptCppBlocks:[],renderElementCode:"",renderNativeViewCode:"",renderElementSourceMap:null,renderNativeViewSourceMap:null}}function Ya(t,e,n,r,s){Sn.set(t,{className:e,scriptCppBlocks:s,renderElementCode:n.code,renderElementSourceMap:n.map,renderNativeViewCode:r.code,renderNativeViewSourceMap:r.map})}const za=Dn.platform()==="win32";function Xa(t){return za?t.replace(/\\/g,"/"):t}function qa(t,e){const n=Qa(e),r=$.isString(t)?f.parse(t,n):t;Ka(r,n);const[s,a]=Za(),{expressionPlugins:o}=n;(!o||!o.includes("typescript"))&&(n.expressionPlugins=[...o||[],"typescript"]);const i=f.transform(r,$.extend({checkStaticStyle:eo(n),checkStaticProp:to(n)},n,{nodeTransforms:[...s,...n.nodeTransforms||[]],directiveTransforms:$.extend({},a,n.directiveTransforms||{})}));i.hasTemplateRef=!1,Gn(i,n);const l=fs(i,n),u=En(i,{...n,target:de(n.platform,"nativeView"),renderer:"nativeView"}),c=En(i,{...n,target:de(n.platform,"element"),renderer:"element"});return n.filename&&n.className&&(n.emitSharedData||Ya)(Xa(n.filename),n.className,c,u,n.scriptCppBlocks),{...l,sharedData:l,nativeView:u,element:c}}function Za(){return f.getBaseTransformPreset()}function Qa(t){const e=$.extend({},t);if(e.parseStaticStyle){const n=e.parseStaticStyle,r=new Map;e.parseStaticStyle=(s,a,o,i)=>{const l=`${s}-${a}-${o}`;if(r.has(l))return r.get(l);const u=n(s,a,o,i);return r.set(l,u),u}}return e.parseStaticProp=cs(t.platform),e.scriptCppBlocks&&!e.isCppExpr&&(e.isCppExpr=n=>{if(!n||n.type!=="MemberExpression"||n.object.type!=="Identifier")return!1;const r=n.object.name;return e.scriptCppBlocks.some(s=>s.module===r)}),e}function eo(t){const e=t.parseStaticStyle,n=de(t.platform,"element"),r=de(t.platform,"nativeView");function s(a){return a.replace("ERROR: ","").replace("WARNING: ","")}return(a,o,i,l)=>{const{messages:u}=e(n,i.tag,a,!1),{messages:c}=e(r,i.tag,a,!1);u.forEach(p=>{l.options.onWarn(yn(s(p.text),o))}),c.forEach(p=>{u.some(d=>d.text===p.text)||l.options.onWarn(yn(s(p.text),o))})}}function to(t){const e=t.parseStaticProp,n=de(t.platform,"element"),r=de(t.platform,"nativeView"),s=ls(t.platform);return(a,o,i,l,u,c)=>{if(!a)return s(u.tag,o)?!0:(c.options.onWarn($n(`Property '${o}' is not supported on '<${u.tag}>'`,l)),!1);const p=e(n,u.tag,o,i),d=new Set;p&&p.errors.length>0&&p.errors.forEach(m=>{d.add(m)});const h=e(r,u.tag,o,i);return h&&h.errors.length>0&&h.errors.forEach(m=>{d.add(m)}),d.size?(d.forEach(m=>{c.options.onWarn($n(m,l))}),!1):!0}}function Te(t){return t.text||t.escapedText}function no(t){return t.name?Te(t.name):""}function ro(t,e){var n;const r=t.heritageClauses;if(!r)return"";const s=r.find(o=>o.token===e.SyntaxKind.ExtendsKeyword),a=(n=s==null?void 0:s.types[0])==null?void 0:n.expression;return!a||!e.isIdentifier(a)?"":Te(a)}function De(t,e){return t.kind===e.SyntaxKind.StringKeyword||t.kind===e.SyntaxKind.BooleanKeyword||t.kind===e.SyntaxKind.NumberKeyword||t.kind===e.SyntaxKind.UndefinedKeyword}function so(t,e){if(!e.isPropertyDeclaration(t)||t.modifiers&&t.modifiers.length>0&&t.modifiers.some(i=>i.kind===e.SyntaxKind.ReadonlyKeyword)||!t.type)return;const n=t.name;if(!e.isIdentifier(n))return;const r=Te(n),s=t.type;if(!e.isUnionTypeNode(s))return!e.isTypeReferenceNode(s)&&!De(s,e)&&!e.isLiteralTypeNode(s)&&!e.isArrayTypeNode(s)?void 0:{memberName:r,type:s,optional:!!t.questionToken};const a=s.types.filter(i=>i.kind!==e.SyntaxKind.UndefinedKeyword&&!(e.isLiteralTypeNode(i)&&i.literal.kind===e.SyntaxKind.NullKeyword));if(a.length!==1)return;const o=a[0];if(!(!e.isTypeReferenceNode(o)&&!De(o,e)&&!e.isLiteralTypeNode(o)))return{memberName:r,type:o,optional:!0}}function ge(t=1,e=2){return" ".repeat(e*t)}function Et(t,e){return t.split(`
`).map(n=>ge(e)+n).join(`
`)}function yt(t,e,n){t||(t=new Se.SourceMapGenerator);const r=new Se.SourceMapConsumer(e);return e.sources.forEach((s,a)=>{const o=t._sources;o.has(s)||(o.add(s),t.setSourceContent(s,e.sourcesContent?e.sourcesContent[a]:null))}),r.eachMapping(s=>{const a=n(s.generatedLine,s.generatedColumn);t.addMapping({generated:{line:a?a.line:s.generatedLine,column:a?a.column:s.generatedColumn},original:s.originalLine?{line:s.originalLine,column:s.originalColumn||0}:null,source:s.source||"",name:s.name||""})}),t}const Nn="ARRAY_STRING",ao=new Ce(2e3);function oo(t,e){if(e.isTypeReferenceNode(t)&&e.isIdentifier(t.typeName))switch(Te(t.typeName)){case"UniSharedDataEnum":return"uint16";case"UniSharedDataAny":return"UniSharedDataAny";case"UniSharedDataArray":return"UniSharedDataArray";case"UniSharedDataJSONObject":return"UniSharedDataJSONObject";case"UniSharedDataVFor":return"UniSharedDataVFor";case"UniSharedDataFunctionEventListener":return"UniSharedDataFunctionEventListener";case"UniSharedDataFunctionSetTemplateRef":return"UniSharedDataFunctionSetTemplateRef";case"UniElementStyles":return"UniElementStyles";case"Array":if(t.typeArguments&&t.typeArguments.length===1&&De(t.typeArguments[0],e)&&t.typeArguments[0].kind===e.SyntaxKind.StringKeyword)return Nn;default:return"UniSharedDataComponent|"+Te(t.typeName)}if(De(t,e))switch(t.kind){case e.SyntaxKind.StringKeyword:return"string";case e.SyntaxKind.BooleanKeyword:return"bool";case e.SyntaxKind.NumberKeyword:return"double";case e.SyntaxKind.UndefinedKeyword:return"null"}if(e.isArrayTypeNode(t)&&De(t.elementType,e)&&t.elementType.kind===e.SyntaxKind.StringKeyword)return Nn;if(e.isLiteralTypeNode(t)&&t.literal.kind===e.SyntaxKind.NullKeyword)return"null"}function io(t,e){const n=e.ts,r=t.name,s={files:[]};if(!r)return s;const a=no(t);if(!a)return s;const o=ro(t,n);if(!o)return s;const i=o==="UniSharedDataPage",l=o==="UniSharedDataComponent",u=i?"DEFINE_USER_PAGE_SHARED_DATA":l?"DEFINE_USER_COMPONENT_SHARED_DATA":"DEFINE_USER_SHARED_DATA",c="DEFINE_SHARED_DATA",p=c+"_MEMBER",d="DEFINE_SHARED_DATA_MEMBER_FLAG",h=u+"_CPP",m=h+"_INIT",g=c+"_CPP",y=g+"_INIT_MEMBER",S=g+"_MEMBER_SETTER",D=t.members;let C="",P="",O=`${u}(${a},
`,I=`${h}(${a},
`,Z=ge(1)+`${m}(${a},
`,H="",he=new Set;for(let V=0;V<D.length;V++){const Q=D[V],G=so(Q,n);if(!G)continue;const U=G.optional,B=G.memberName,se=G.type,ee=oo(se,n),{index:Ee,bitValue:ye}=ao.getGroupInfo(B),T="_flag"+Ee;if(he.add(T),!ee)continue;let[N,_]=ee.split("|"),b=`${p}_${N.toUpperCase()}`,L=`${S}_${N.toUpperCase()}`;(U||N==="UniSharedDataAny")&&N!=="null"&&(b+="_OR_NULL",L+="_OR_NULL"),C+=ge(1)+`${b}(${B}`,Z+=ge(2)+`${y}(${B})
`,H+=ge(1)+`${L}(${a}, ${B}`,C+=`)
`,H+=`, ${T}, ${ye})
`}P=Array.from(he).map(V=>ge(1)+`${d}(${V})
`).join("")+`
`,Z+=ge(1)+`)
`,O+=P+C+")",I+=Z+H+")";let le=null;if(i||l){I=`namespace {
${Et(`inline ${e.renderElementCode}`,1)}
${Et(`inline ${e.renderNativeViewCode}`,1)}
}
${I}`;const V=new Se.SourceMapGenerator;let Q=1;const G=Et("",1).length;e.renderElementSourceMap&&(yt(V,e.renderElementSourceMap,(U,B)=>({line:U+Q,column:B+G})),Q+=e.renderElementCode.split(`
`).length),e.renderNativeViewSourceMap&&yt(V,e.renderNativeViewSourceMap,(U,B)=>({line:U+Q,column:B+G})),le=V.toJSON()}return{files:[{code:O,name:`${a}.h`,class:a,map:null},{code:I,name:`${a}.cpp`,class:a,map:le}],groupName:l||i?a:void 0}}function vn(t,e){return e.targetLanguage==="cpp"?io(t,e):{files:[]}}function lo(t){return{files:[{name:"GenAppSharedData.h",code:`#pragma once
#include "sdk.h"

DEFINE_USER_APP_SHARED_DATA(GenAppSharedData,
  DEFINE_SHARED_DATA_MEMBER_FLAG(_flag0)
)`,classes:["GenAppSharedData"]},{name:"GenAppSharedData.cpp",code:`#include "GenAppSharedData.h"

DEFINE_USER_APP_SHARED_DATA_CPP(GenAppSharedData,
  DEFINE_USER_APP_SHARED_DATA_CPP_INIT(GenAppSharedData,
  )
)`,classes:["GenAppSharedData"]}]}}function co(t,e){const n=t.map(i=>vn(i,e)),r={name:".cpp",code:"",classes:[]},s={name:".h",code:"",classes:[]};let a="",o=null;return n.forEach(i=>{i.groupName&&(a=i.groupName),i.files.forEach(l=>{if(l.name.endsWith(".h"))s.code+=(s.code?`

`:"")+l.code,s.classes.push(l.class);else if(l.name.endsWith(".cpp")){if(l.map){const u=r.code?r.code.split(`
`).length+3:2,c=new Se.SourceMapGenerator;yt(c,l.map,(p,d)=>({line:p+u,column:d})),o=c.toJSON()}r.code+=(r.code?`

`:"")+l.code,r.classes.push(l.class)}})}),a&&(s.name=`${a}.h`,r.name=`${a}.cpp`,s.code=`#pragma once
#include "sdk.h"

${s.code}`,r.code=`#include "${s.name}"

${r.code}`,r.map=o),{files:[r,s]}}exports.parse=v.parse,exports.COMPONENT_TYPE=zn,exports.DOM2_APP_PLATFORM=It,exports.RENDERER_TYPE=Kn,exports.TARGET_LANGUAGE=Yn,exports.TARGET_PLATFORM=It,exports.compile=qa,exports.genAppSharedData=lo,exports.genSharedData=co,exports.genSharedDataClass=vn,exports.getSharedDataResult=Ha;
