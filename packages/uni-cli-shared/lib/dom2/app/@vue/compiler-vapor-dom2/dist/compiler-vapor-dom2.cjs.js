"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var y=require("@vue/compiler-dom"),p=require("@vue/compiler-vapor"),T=require("@vue/shared"),Ee=require("@babel/parser"),sn=require("@babel/types"),ct=require("estree-walker"),an=require("source-map-js");function oa(t,e){}function ia(t,e){}function on(t,e=[]){const n=t.ast||t._fastPathAst;if(n)return Ne(n);if(t.isStatic)return!0;if(t.ast===null)try{return t._fastPathAst=Ee.parseExpression(t.content,{plugins:e}),Ne(t._fastPathAst)}catch{}return!1}function Ne(t){switch(t=y.unwrapTSNode(t),t.type){case"UnaryExpression":return t.operator==="void"?!1:Ne(t.argument);case"ParenthesizedExpression":return Ne(t.expression);case"StringLiteral":case"NumericLiteral":case"BooleanLiteral":case"NullLiteral":case"BigIntLiteral":return!0}return!1}function Te(t){try{return!!new Function(`return ${t.content}`)()}catch{}return null}function ut(t){try{const e=new Function(`return ${t.content}`)();return typeof e=="string"?e:null}catch{}return null}function ln(t,e){W(t.key,e),t.values.length>1&&["class","style"].includes(t.key.content)?t.sharedData={ident:e.nextIdent()}:dt(t.values,e)}function dt(t,e,n=!1,r=!1){t.forEach(s=>{W(s,e,n,r)})}function W(t,e,n=!1,r=!1){(n||!on(t))&&(t.sharedData={ident:e.nextIdent()})}function cn(t,e){t.delegate=!1,W(t.key,e),t.sharedData={ident:e.nextIdent()}}function un(t,e){W(t.event,e,!0)}function dn(t,e){W(t.source,e,!0);const n=e.enterIdent();t.keyProp&&W(t.keyProp,e,!0),Pe(t.render,e),n()}function fn(t,e){W(t.value,e)}function ft(t,e){const{condition:n,positive:r,negative:s}=t;Te(n)===null&&W(n,e,!0),oe(r,e),s&&(s.type===1?oe(s,e):ft(s,e))}function pn(t,e){ln(t.prop,e)}function hn(t,e){t.sharedData={ident:e.nextIdent()}}function gn({node:t,value:e},n){t.tagType===0&&W(e,n,!0)}function la(t,e){}function mn(t,e){dt(t.values,e,!1,!0)}function ca(t,e){}function En(t,e){t.sharedData={ident:e.nextIdent()},t.slots.forEach(n=>{switch(n.slotType){case 0:Object.keys(n.slots).forEach(s=>{oe(n.slots[s],e)});break;case 1:ut(n.name)||(n.name.sharedData={ident:e.nextIdent()}),oe(n.fn,e);break;case 2:W(n.loop.source,e);const r=e.enterIdent();ut(n.name)||(n.name.sharedData={ident:e.nextIdent()}),oe(n.fn,e),r();break;case 3:pt(n,e);break}})}function pt(t,e){Te(t.condition)===null&&W(t.condition,e,!0),oe(t.positive.fn,e),t.negative&&(t.negative.slotType===3?pt(t.negative,e):oe(t.negative.fn,e))}function yn(t,e){const{fallback:n,name:r}=t;W(r,e),n&&oe(n,e)}function $n({dir:{exp:t}},e){t&&W(t,e)}function Sn({dir:t},e){const n=t.exp;W(n,e,!0),n.sharedData.vModel={eventIdent:e.nextIdent()}}function Nn(t,e){switch(t.name){case"show":return $n(t,e);case"model":return Sn(t,e)}}function ht(t,e){for(const n of t)gt(n,e)}function gt(t,e){Tn(t,e)}function Tn(t,e){switch(t.type){case 2:return pn(t,e);case 3:return hn(t,e);case 4:return mn(t,e);case 5:return cn(t,e);case 6:return un(t,e);case 7:return fn(t,e);case 8:return gn(t,e);case 9:return void 0;case 10:return void 0;case 15:return ft(t,e);case 16:return dn(t,e);case 11:return En(t,e);case 14:return void 0;case 12:return yn(t,e);case 13:return Nn(t,e);case 17:return void 0;default:const n=t;throw new Error(`Unhandled operation type in genOperation: ${n}`)}}function _n(t,e){for(const n of t)vn(n,e)}function vn({operations:t},e){ht(t,e)}function Re(t,e){const{operation:n}=t;n&&gt(n,e)}function mt(t,e){const{children:n}=t;let r=0;const s=[];for(const[,a]of n.entries()){a.flags&2&&r--;const o=a.flags&1?a.flags&4?a.anchor:a.id:void 0;if(o===void 0&&!a.hasDynamicChild){Re(a,e);continue}o===a.anchor&&Re(a,e),s.push(a)}for(const a of s)mt(a,e)}function oe(t,e){Pe(t,e)}function Pe(t,e){const{dynamic:n,effect:r,operation:s}=t,a=e.enterBlock(t);for(const o of n.children)Re(o,e);for(const o of n.children)mt(o,e);ht(s,e),_n(r,e),a()}class _e{constructor(e=1e3,n=30){if(this._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",this._nextIds=[0],this._generated=[],this._currentIndex=0,e<0)throw new Error("\u9884\u751F\u6210\u6570\u91CF\u4E0D\u80FD\u4E3A\u8D1F\u6570");this._groupSize=n,e>0&&this._pregenerate(e)}_generateId(){const e=[];for(const n of this._nextIds)e.unshift(this._chars[n]);return e.join("")}_generateNextValidId(){let e;do e=this._generateId(),this._increment();while(Dn.has(e));return e}_pregenerate(e){this._generated=new Array(e);for(let n=0;n<e;n++)this._generated[n]=this._generateNextValidId()}next(){if(this._currentIndex<this._generated.length)return this._generated[this._currentIndex++];const e=this._generateNextValidId();return this._generated.push(e),this._currentIndex++,e}getIndexOf(e){return this._generated.indexOf(e)}getGroupInfo(e){const n=this.getIndexOf(e);return n===-1?null:{index:Math.floor(n/this._groupSize),bitValue:1<<n%this._groupSize}}reset(){this._nextIds=[0],this._generated=[],this._currentIndex=0}get generatedCount(){return this._generated.length}get currentIndex(){return this._currentIndex}get hasPregenerated(){return this._currentIndex<this._generated.length}get generatedList(){return this._generated}_increment(){for(let e=0;e<this._nextIds.length;e++)if(++this._nextIds[e]>=this._chars.length)this._nextIds[e]=0;else return;this._nextIds.push(0)}*[Symbol.iterator](){for(;;)yield this.next()}}const Dn=new Set(["abstract","arguments","await","boolean","break","byte","case","catch","char","class","const","continue","debugger","default","delete","do","double","else","enum","eval","export","extends","false","final","finally","float","for","function","goto","if","implements","import","in","instanceof","int","interface","let","long","native","new","null","package","private","protected","public","return","short","static","super","switch","synchronized","this","throw","throws","transient","true","try","typeof","var","void","volatile","while","with","yield"]);class In{constructor(e,n){this._ident=new _e,this._identCache=new Map,this.ir=e,this.options=n,this.block=e.block,this._identCache.set(this._ident,new Map)}enterBlock(e){const n=this.block;return this.block=e,()=>this.block=n}enterIdent(){const e=this._ident;return this._ident=new _e,this._identCache.set(this._ident,new Map),()=>this._ident=e}nextIdent(){return this._ident.next()}}function xn(t,e){const n=new In(t,e);Pe(t.block,n)}const Cn={ELEMENT:"element",NATIVE_VIEW:"nativeView"},Et={APP_ANDROID:"app-android",APP_HARMONY:"app-harmony",APP_IOS:"app-ios"};function Le(t,e){switch(t){case"app-harmony":return e==="element"?"dom-c":"nv-c";case"app-android":return e==="element"?"dom-kt":"nv-kt";case"app-ios":return e==="element"?"dom-c":"nv-c"}}const bn={TS:"ts",CPP:"cpp",KOTLIN:"kotlin",SWIFT:"swift"},On={APP:"app",PAGE:"page",COMPONENT:"component"};class yt{constructor(){this.vForCount=-1}enterVFor(){return this.vForCount++,this.vForCount}get sharedDataVar(){const{node:e}=this.block;let n=!1;return"__vFor"in e&&(n=e.__vFor),e.__vFor=n=e.type===1&&e.tagType===3&&e.props.some(r=>r.type===7&&r.name==="for"),n?this.sharedDataVForVar:"__sharedData"}get sharedDataVForVar(){return`__sharedData_VFor${this.vForCount}`}get sharedDataVForItemVar(){return`__vForItem${this.vForCount}`}}function An({parent:t,elements:e,anchor:n},{helper:r}){let s=e.map(a=>`n${a}`).join(", ");return e.length>1&&(s=`[${s}]`),[p.NEWLINE,...p.genCall(r("insert"),s,`n${t}`,n===void 0?void 0:`n${n}`)]}function wn(t,{helper:e}){return[p.NEWLINE,...p.genCall(e("prepend"),`n${t.parent}`,...t.elements.map(n=>`n${n}`))]}function D(t,e,n){const{content:r,ast:s,isStatic:a,loc:o}=t;if(a)return[[JSON.stringify(r),-2,o]];if(!t.content.trim()||s===!1||p.isConstantExpression(t))return[[r,-2,o],n&&` = ${n}`];if(s===null)return $t(r,e,o,n);const i=[],l=new Map,c=[];y.walkIdentifiers(s,d=>{i.push(d),l.set(d,c.slice())},!1,c);let u=!1;if(i.length){const[d,f]=p.buildCodeFragment(),h=s&&y.TS_NODE_TYPES.includes(s.type);return i.sort((g,m)=>g.start-m.start).forEach((g,m)=>{const N=g.start-1,O=g.end-1,v=i[m-1];if(!(h&&m===0)){const I=r.slice(v?v.end-1:0,N);I.length&&f([I,-3])}const A=r.slice(N,O),V=l.get(g),P=V[V.length-1];u||(u=P&&(P.type==="MemberExpression"||P.type==="OptionalMemberExpression")),f(...$t(A,e,{start:y.advancePositionWithClone(t.loc.start,A,N),end:y.advancePositionWithClone(t.loc.start,A,O),source:A},u?void 0:n,g,P,V)),m===i.length-1&&O<r.length&&!h&&f([r.slice(O),-3])}),n&&u&&f(` = ${n}`),d}else return[[r,-3,o]]}function $t(t,e,n,r,s,a,o){const{options:i,helper:l,identifiers:c}=e,{inline:u,bindingMetadata:d}=i;let f=t;const h=c[t];if(h&&h.length){const v=h[0];return T.isString(v)?a&&a.type==="ObjectProperty"&&a.shorthand?[[`${f}: ${v}`,-2,n]]:[[v,-2,n]]:D(v,e,r)}let g;y.isStaticProperty(a)&&a.shorthand&&(g=`${t}: `);const m=d&&d[t];if(u)switch(m){case"setup-let":f=t=r?`_isRef(${t}) ? (${t}.value = ${r}) : (${t} = ${r})`:O();break;case"setup-ref":f=t=N(`${t}.value`);break;case"setup-maybe-ref":const v=a&&y.isInDestructureAssignment(a,o||[]),A=a&&a.type==="AssignmentExpression"&&a.left===s,V=a&&a.type==="UpdateExpression"&&a.argument===s;t=A||V||v?f=`${t}.value`:r?`${l("isRef")}(${t}) ? (${t}.value = ${r}) : null`:O();break;case"props":t=T.genPropsAccessExp(t);break;case"props-aliased":t=T.genPropsAccessExp(d.__propsAliases[t]);break;default:t=N(t)}else Mn(t)&&(m==="props-aliased"?t=`$props['${d.__propsAliases[t]}']`:t=`${m==="props"?"$props":"_ctx"}.${t}`),t=N(t);return[g,[t,-2,n,f]];function N(v){return r?`${v} = ${r}`:v}function O(){return`${l("unref")}(${t})`}}function Mn(t){return!(T.isGloballyAllowed(t)||t==="require"||t==="$props"||t==="$emit"||t==="$attrs"||t==="$slots")}function kn(t,e,n){const{seenVariable:r,variableToExpMap:s,expToVariableMap:a,seenIdentifier:o,updatedVariable:i}=Vn(e),l=Rn(t,r,s,a,o,i),c=Ln(t,e,l,i,a);return Fn([...l,...c],t,n)}function Vn(t){const e=Object.create(null),n=new Map,r=new Map,s=new Set,a=new Set,o=(i,l,c,u,d=[])=>{c&&s.add(i),e[i]=(e[i]||0)+1,n.set(i,(n.get(i)||new Set).add(l));const f=r.get(l)||[];f.push({name:i,loc:u}),r.set(l,f),d.some(h=>h.type==="UpdateExpression"||h.type==="AssignmentExpression")&&a.add(i)};for(const i of t){if(!i.ast){i.ast===null&&o(i.content,i,!0);continue}y.walkIdentifiers(i.ast,(l,c,u)=>{if(c&&St(c)){const d=ie(c,f=>{o(f.name,i,!0,{start:f.start,end:f.end})});o(d,i,!1,{start:c.start,end:c.end},u)}else u.some(St)||o(l.name,i,!0,{start:l.start,end:l.end},u)})}return{seenVariable:e,seenIdentifier:s,variableToExpMap:n,expToVariableMap:r,updatedVariable:a}}function Rn(t,e,n,r,s,a){const o=[],i=new Map;for(const[l,c]of n)if(!a.has(l)&&e[l]>1&&c.size>0){const u=s.has(l),d=u?l:Fe(l);c.forEach(f=>{if(f.ast&&d!==l){const h=i.get(f)||[];h.push({name:d,locs:r.get(f).reduce((g,m)=>(m.name===l&&m.loc&&g.push(m.loc),g),[])}),i.set(f,h)}}),!o.some(f=>f.name===d)&&(!u||Pn(l,r,c))&&o.push({name:d,isIdentifier:u,value:T.extend({ast:u?null:ve(t,l)},y.createSimpleExpression(l)),rawName:l,exps:c,seenCount:e[l]})}for(const[l,c]of i)c.flatMap(({name:u,locs:d})=>d.map(({start:f,end:h})=>({start:f,end:h,name:u}))).sort((u,d)=>d.end-u.end).forEach(({start:u,end:d,name:f})=>{l.content=l.content.slice(0,u-1)+f+l.content.slice(d-1)}),l.ast=ve(t,l.content);return o}function Pn(t,e,n){const r=Array.from(n,a=>e.get(a).map(o=>o.name));if(r.every(a=>a.length===1)||r.some(a=>a.filter(o=>o===t).length>1))return!0;const s=r[0];return r.some(a=>a.length!==s.length)?!(r.some(a=>a.length>s.length&&a.every(o=>s.includes(o)))||r.some(a=>s.length>a.length&&s.every(o=>a.includes(o)))):!r.some(a=>a.some(o=>s.includes(o)))}function Ln(t,e,n,r,s){const a=[],o=e.reduce((i,l)=>{const c=s.get(l).map(u=>u.name);return l.ast&&l.ast.type!=="Identifier"&&!(c&&c.some(u=>r.has(u)))&&(i[l.content]=(i[l.content]||0)+1),i},Object.create(null));return Object.entries(o).forEach(([i,l])=>{if(l>1){const c=Fe(i);if(!a.some(u=>u.name===c)){const u={};for(let f=n.length-1;f>=0;f--){const h=n[f];!h.exps||!h.seenCount||[...h.exps].every(g=>g.content===i&&h.seenCount===l)&&(u[h.name]=h.rawName,n.splice(f,1))}const d=T.extend({},e.find(f=>f.content===i));Object.keys(u).forEach(f=>{d.content=d.content.replace(f,u[f]),d.ast&&(d.ast=ve(t,d.content))}),a.push({name:c,value:d})}e.forEach(u=>{u.content===i?(u.content=c,u.ast=null):u.content.includes(i)&&(u.content=u.content.replace(new RegExp(Wn(i),"g"),c),u.ast=ve(t,u.content))})}}),a}function Fn(t,e,n){const[r,s]=p.buildCodeFragment(),a=Object.create(null),o=new Set;return t.forEach(({name:i,isIdentifier:l,value:c})=>{if(l){const u=a[i]=`_${i}`;o.add(u),n&&s("const "),s(`${u} = `,...D(c,e),p.NEWLINE)}}),t.forEach(({name:i,isIdentifier:l,value:c})=>{if(!l){const u=a[i]=`_${i}`;o.add(u),n&&s("const "),s(`${u} = `,...e.withId(()=>D(c,e),a),p.NEWLINE)}}),{ids:a,frag:r,varNames:[...o]}}function Wn(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ve(t,e){const n=t.options.expressionPlugins,r={plugins:n?[...n,"typescript"]:["typescript"]};return Ee.parseExpression(`(${e})`,r)}function Fe(t){return`${t.replace(/[^a-zA-Z0-9]/g,"_").replace(/_+/g,"_").replace(/_+$/,"")}`}function ie(t,e){if(!t)return"";switch(t.type){case"Identifier":return e(t),t.name;case"StringLiteral":return t.extra?t.extra.raw:t.value;case"NumericLiteral":return t.value.toString();case"BinaryExpression":return`${ie(t.left,e)} ${t.operator} ${ie(t.right,e)}`;case"CallExpression":return`${ie(t.callee,e)}(${t.arguments.map(s=>ie(s,e)).join(", ")})`;case"MemberExpression":case"OptionalMemberExpression":const n=ie(t.object,e),r=t.computed?`[${ie(t.property,e)}]`:`.${ie(t.property,T.NOOP)}`;return`${n}${r}`;default:return""}}const St=t=>t.type==="MemberExpression"||t.type==="OptionalMemberExpression";function Nt(t,e,n,r){return t.sharedData?p.genCall(e.helper("setSharedData"),e.sharedDataVar,JSON.stringify(t.sharedData.ident),n?p.genCall(n,D(t,e)):D(t,e)):D(t,e)}function Jn(t,e){const{key:n,keyOverride:r,value:s,modifiers:a,sharedData:o}=t,i=We(e,s,a);return[p.NEWLINE,...n.sharedData?p.genCall(e.helper("setSharedData"),e.sharedDataVar,JSON.stringify(n.sharedData.ident),l()).concat(p.NEWLINE):[],...p.genCall(e.helper("setSharedDataEvent"),e.sharedDataVar,JSON.stringify(o.ident),i)];function l(){const c=D(n,e);if(r){const u=JSON.stringify(r[0]),d=JSON.stringify(r[1]),f=["(",...c,")"];return[...f,` === ${u} ? ${d} : `,...f]}else return D(n,e)}}function jn(t,e){return[p.NEWLINE,...p.genCall(e.helper("setSharedDataDynamicEvents"),e.sharedDataVar,JSON.stringify(t.event.sharedData.ident),D(t.event,e))]}function We(t,e,n={nonKeys:[],keys:[]},r=!1){let s=["() => {}"];if(e&&e.content.trim())if(y.isMemberExpression(e,t.options))s=D(e,t),!Un(e,t)&&!r&&(e.ast&&e.ast.type==="TSAsExpression"?s=["(e: any) => (",e.content,")(e)"]:s=["(e: any) => ",...s,"(e)"]);else if(y.isFnExpression(e,t.options))s=D(e,t);else{const a=e.content.includes("$event"),o=e.content.includes(";"),i=a?t.withId(()=>D(e,t),{$event:null}):D(e,t);s=[a?"($event: any) => ":"() => ",o?"{":"(",...i,o?"}":")"]}return r&&s.unshift("() => "),s}function Un(t,e){if(t.ast===null&&e.options.bindingMetadata[t.content]==="setup-const")return!0}function Bn(t,e){const{helper:n}=e,{source:r,value:s,key:a,index:o,render:i,keyProp:l,once:c,id:u,component:d,onlyChild:f}=t,h=e.sharedDataVar;let g=null;const m=a&&a.content,N=o&&o.content,O=["() => (",...D(r,e),")"],v=ne(),A=e.enterVFor(),[V,P]=e.enterScope(),I={},j=`_for_item${A}`;I[j]=null,v.forEach(($,S)=>{let _=`${j}.value${$?$.path:""}`;if($)if($.helper&&(I[$.helper]=null,_=`${$.helper}(${_}, ${$.helperArgs})`),$.dynamic){const x=I[S]=y.createSimpleExpression(_),L=e.options.expressionPlugins;x.ast=Ee.parseExpression(`(${_})`,{plugins:L?[...L,"typescript"]:["typescript"]})}else I[S]=_;else I[S]=_});const Y=[e.sharedDataVForVar,", ",j];if(m){const $=`_for_key${A}`;Y.push(`, ${$}`),I[m]=`${$}.value`,I[$]=null}if(N){const $=`_for_index${A}`;Y.push(`, ${$}`),I[N]=`${$}.value`,I[$]=null}const ce=p.genCall(n("setSharedData"),h,JSON.stringify(r.sharedData.ident),vt(e)),G=me(l,e,e.sharedDataVForVar),{selectorPatterns:B,keyOnlyBindingPatterns:te}=Tt(i,l,I),pe=[],F=[];for(let $=0;$<B.length;$++){const{selector:S}=B[$],_=`_selector${u}_${$}`;pe.push(`let ${_}: (oper: () => void) => void`,p.NEWLINE),$===0&&F.push("({ createSelector }) => {",p.INDENT_START),F.push(p.NEWLINE,`${_} = `,...p.genCall("createSelector",["() => ",...D(S,e)])),$===B.length-1&&F.push(p.INDENT_END,p.NEWLINE,"}")}const he=e.withId(()=>{const $=[];return $.push("(",...Y,") => {",p.INDENT_START),B.length||te.length?$.push(...xe(i,e,!1,()=>{const S=[];for(let _=0;_<B.length;_++){const{effect:x}=B[_];S.push(p.NEWLINE,`_selector${u}_${_}(() => {`,p.INDENT_START);for(const L of x.operations)S.push(...Ye(L,e));S.push(p.INDENT_END,p.NEWLINE,"})")}for(const{effect:_}of te)for(const x of _.operations)S.push(...Ye(x,e));return S})):$.push(...xe(i,e)),$.push(p.INDENT_END,p.NEWLINE,"}"),$},I);P();let X=0;return f&&(X|=1),d&&(X|=2),c&&(X|=4),[p.NEWLINE,...pe,...p.genCall([n("createSharedDataFor"),"undefined"],ce,O,he,G,X?String(X):void 0,F.length?F:void 0)];function ne(){const $=new Map;return s&&(g=s&&s.content,s.ast?y.walkIdentifiers(s.ast,(S,_,x,L,re)=>{if(re){let q="",H=!1,se,ue;for(let ae=0;ae<x.length;ae++){const M=x[ae],w=x[ae+1]||S;if(M.type==="ObjectProperty"&&M.value===w)M.key.type==="StringLiteral"?q+=`[${JSON.stringify(M.key.value)}]`:M.computed?(H=!0,q+=`[${s.content.slice(M.key.start-1,M.key.end-1)}]`):q+=`.${M.key.name}`;else if(M.type==="ArrayPattern"){const k=M.elements.indexOf(w);w.type==="RestElement"?q+=`.slice(${k})`:q+=`[${k}]`}else M.type==="ObjectPattern"&&w.type==="RestElement"&&(se=e.helper("getSharedDataRestElement"),ue="["+M.properties.filter(k=>k.type==="ObjectProperty").map(k=>k.key.type==="StringLiteral"?JSON.stringify(k.key.value):k.computed?(H=!0,s.content.slice(k.key.start-1,k.key.end-1)):JSON.stringify(k.key.name)).join(", ")+"]");w.type==="AssignmentPattern"&&(M.type==="ObjectProperty"||M.type==="ArrayPattern")&&(H=!0,se=e.helper("getSharedDataDefaultValue"),ue=s.content.slice(w.right.start-1,w.right.end-1))}$.set(S.name,{path:q,dynamic:H,helper:se,helperArgs:ue})}},!0):$.set(g,null)),$}function me($,S,_){if(!$)return!1;const x=S.withId(()=>p.genCall(S.helper("setSharedData"),_,JSON.stringify($.sharedData.ident),D($,S)),ge());return[...p.genMulti(["(",")",", "],_,g||(m||N?"_":void 0),m||(N?"__":void 0),N)," => (",...x,")"]}function ge(){const $={};return m&&($[m]=null),N&&($[N]=null),v.forEach((S,_)=>$[_]=null),$}}function Tt(t,e,n){const r=[],s=[];return t.effect.forEach(a=>{if(e!==void 0){const o=Yn(a,e.ast,n);o&&(r.push(o),a.generated=!0);const i=Kn(a,e.ast);i&&(s.push(i),a.generated=!0)}}),{keyOnlyBindingPatterns:s,selectorPatterns:r}}function Kn(t,e){if(t.expressions.length===1){const n=t.expressions[0].ast;if(typeof n=="object"&&n!==null&&ye(n,e))return{effect:t}}}function Yn(t,e,n){if(t.expressions.length===1){const r=t.expressions[0].ast;if(typeof r=="object"&&r){const a=[];if(ct.walk(r,{enter(o){if(typeof o=="object"&&o&&o.type==="BinaryExpression"&&o.operator==="==="&&o.left.type!=="PrivateName"){const{left:i,right:l}=o;for(const[c,u]of[[i,l],[l,i]]){const d=ye(c,e),f=ye(u,e),h=_t(u,n);d&&!f&&!h.locals.length&&a.push([c,u])}}}}),a.length===1){const[o,i]=a[0],l=t.expressions[0].content;let c=!1;const u=new Map,d=[];if(y.walkIdentifiers(r,f=>{f.start!==o.start&&f.start!==i.start&&(c=!0),u.set(f,d.slice())},!1,d),!c){const f=l.slice(i.start-1,i.end-1);return{effect:t,selector:{content:f,ast:T.extend({},i,{start:1,end:f.length+1}),loc:i.loc,isStatic:!1}}}}}const s=t.expressions[0].content;if(typeof r=="object"&&r&&r.type==="ConditionalExpression"&&r.test.type==="BinaryExpression"&&r.test.operator==="==="&&r.test.left.type!=="PrivateName"&&y.isStaticNode(r.consequent)&&y.isStaticNode(r.alternate)){const a=r.test.left,o=r.test.right;for(const[i,l]of[[a,o],[o,a]]){const c=ye(i,e),u=ye(l,e),d=_t(l,n);if(c&&!u&&!d.locals.length)return{effect:t,selector:{content:s.slice(l.start-1,l.end-1),ast:l,loc:l.loc,isStatic:!1}}}}}}function _t(t,e){let n=[],r=[];const s=[],a=new Map,o=[];y.walkIdentifiers(t,i=>{s.push(i),a.set(i,o.slice())},!1,o);for(const i of s)T.isGloballyAllowed(i.name)||(e[i.name]?r.push(i.name):n.push(i.name));return{globals:n,locals:r}}function ye(t,e){let n=!0;return ct.walk(t,{enter(r){if(sn.isNodesEquivalent(r,e)){this.skip();return}r.type==="Identifier"&&(n=!1)}}),n}function vt(t){return`${t.helper("createSharedDataVFor")}(${t.sharedDataScopeVar}, () => useSharedData<\`${t.sharedDataVForClassType}\`>(${t.sharedDataScopeVar}))`}function Gn(t,e){var n;const{helper:r}=e,{value:s}=t;return[p.NEWLINE,...(n=s.sharedData)!=null&&n.ident?p.genCall(r("setSharedData"),e.sharedDataVar,JSON.stringify(s.sharedData.ident),D(s,e)):[]]}function Dt(t,e,n=!1){const{helper:r}=e,{condition:s,positive:a,negative:o,once:i}=t,[l,c]=p.buildCodeFragment(),u=["() => ",...It(s,e),""];let d=Ie(a,e),f=!1;return o&&(o.type===1?f=Ie(o,e):f=["() => ",...Dt(o,e,!0)]),n||c(p.NEWLINE),c(...p.genCall(r("createSharedDataIf"),u,d,f,i&&"true")),l}function It(t,e){return t.sharedData?p.genCall(e.helper("setSharedData"),e.sharedDataVar,JSON.stringify(t.sharedData.ident),p.genCall(e.helper("toSharedDataBoolean"),D(t,e))):[JSON.stringify(Te(t))]}const Z={setText:{name:"setText"},setHtml:{name:"setHtml"},setClass:{name:"setClass"},setStyle:{name:"setStyle"},setValue:{name:"setValue"},setAttr:{name:"setAttr",needKey:!0},setProp:{name:"setProp",needKey:!0},setDOMProp:{name:"setDOMProp",needKey:!0}};function Hn(t,e){const{prop:{key:n,values:r,modifier:s,sharedData:a},tag:o}=t,i=Xn(o,n.content,s),[l,c]=p.buildCodeFragment();return a?(c(p.NEWLINE,...p.genCall(e.helper(Je(i.name)),e.sharedDataVar,JSON.stringify(a.ident),De(r,e))),l):(r.filter(u=>{var d;return(d=u.sharedData)==null?void 0:d.ident}).forEach(u=>{c(p.NEWLINE,...p.genCall(e.helper(Je(i.name)),e.sharedDataVar,JSON.stringify(u.sharedData.ident),De([u],e)))}),l)}function zn(t,e){const{helper:n}=e,r=t.props.map(s=>Array.isArray(s)?xt(s,e):s.kind===1?xt([s],e):D(s.value,e));return[p.NEWLINE,...p.genCall(n(Je("setDynamicProps")),e.sharedDataVar,JSON.stringify(t.sharedData.ident),p.genMulti(p.DELIMITERS_ARRAY,...r))]}function xt(t,e){return p.genMulti(p.DELIMITERS_OBJECT,...t.map(n=>[...Ct(n,e),": ",...De(n.values,e)]))}function Ct({key:t,modifier:e,runtimeCamelize:n,handler:r,handlerModifiers:s},a){const{helper:o}=a,i=s?s.map(T.capitalize).join(""):"";if(t.isStatic){const c=(r?T.toHandlerKey(t.content):t.content)+i;return[[y.isSimpleIdentifier(c)?c:JSON.stringify(c),-2,t.loc]]}let l=D(t,a);return n&&(l=p.genCall(o("camelize"),l)),r&&(l=p.genCall(o("toHandlerKey"),l)),["[",e&&`${JSON.stringify(e)} + `,...l,i?` + ${JSON.stringify(i)}`:void 0,"]"]}function De(t,e){return t.length===1?D(t[0],e):p.genMulti(p.DELIMITERS_ARRAY,...t.map(n=>D(n,e)))}function Xn(t,e,n){const r=t.toUpperCase();return n?n==="."?bt(e,r)||Z.setDOMProp:Z.setAttr:bt(e,r)||(/aria[A-Z]/.test(e)?Z.setDOMProp:T.isSVGTag(t)||T.shouldSetAsAttr(r,e)||e.includes("-")?Z.setAttr:Z.setProp)}function bt(t,e){if(t==="value"&&T.canSetValueDirectly(e))return Z.setValue;if(t==="class")return Z.setClass;if(t==="style")return Z.setStyle;if(t==="innerHTML")return Z.setHtml;if(t==="textContent")return Z.setText}function Je(t){switch(t){case"setClass":return"setSharedDataClass";case"setStyle":return"setSharedDataStyle";case"setText":case"setHtml":case"setValue":case"setAttr":case"setProp":case"setDOMProp":return"setSharedDataAttr";case"setDynamicProps":return"setSharedDataDynamicProps";default:const e=t;throw new Error(`Unhandled operation type in genOperation: ${e}`)}}const Ot="_setTemplateRef";function qn(t,e){let n=p.genCall(Ot,`n${t.element}`,Qn(t.value,e),t.effect?`r${t.element}`:t.refFor?"void 0":void 0,t.refFor&&"true");return t.value.sharedData&&(n=p.genCall(e.helper("setSharedDataTemplateRef"),e.sharedDataVar,JSON.stringify(t.value.sharedData.ident),[`(n${t.element}: number) => {`,...n,"}"])),[p.NEWLINE,t.effect&&`r${t.element} = `,...n]}function Zn(t){return[p.NEWLINE,`let r${t.id}: any | null`]}function Qn(t,e){if(t&&e.options.inline){const n=e.options.bindingMetadata[t.content];if(n==="setup-let"||n==="setup-ref"||n==="setup-maybe-ref")return[t.content]}return D(t,e)}function er(t,e){const{helper:n}=e,{values:r}=t,[s,a]=p.buildCodeFragment(),o=new Set;return r.filter(i=>{var l;return(l=i.sharedData)==null?void 0:l.ident}).forEach(i=>{const l=i.sharedData.ident;o.has(l)||(o.add(l),a(p.NEWLINE,...p.genCall(n("setSharedData"),e.sharedDataVar,JSON.stringify(i.sharedData.ident),p.genCall(e.helper("toDisplayString"),D(i,e)))))}),s}function tr(t,e){return[]}function nr({dir:{exp:t}},e){return t?[p.NEWLINE,...p.genCall(e.helper("renderSharedDataEffect"),["() => { ",...p.genCall(e.helper("setSharedData"),e.sharedDataVar,JSON.stringify(t.sharedData.ident),p.genCall(e.helper("toSharedDataBoolean"),D(t,e)))," }"])]:[]}function rr(t,e){const{dir:{exp:n,modifiers:r}}=t,s=n.sharedData;return[p.NEWLINE,...p.genCall(e.helper("setSharedDataEvent"),e.sharedDataVar,JSON.stringify(s.vModel.eventIdent),p.genCall(e.helper("setSharedDataModel"),e.sharedDataVar,JSON.stringify(s.ident),["() => (",...D(n,e),")"],At(n,e),r.length?`{ ${r.map(a=>a.content+": true").join(",")} }`:void 0))]}function At(t,e){return[`${e.options.isTS?"(_value: any)":"_value"} => (`,...D(t,e,"_value"),")"]}function sr(t,e){switch(t.name){case"show":return nr(t,e);case"model":return rr(t,e);default:return[]}}function ar(t){return t.map(e=>`${y.isSimpleIdentifier(e)?e:JSON.stringify(e)}: true`).join(", ")}function or(t,e){const{helper:n}=e,r=m(),{root:s,props:a,slots:o,sharedData:i}=t,l=dr(o,e),[c,u]=lr(a,e),d=e.withId(()=>wt(a,e),c),f=u.reduce((N,{name:O,value:v})=>{const A=We(e,v,void 0,!1);return[...N,`const ${O} = `,...A,p.NEWLINE]},[]),h=t.dynamic&&!t.dynamic.isStatic,g=t.asset;return[p.NEWLINE,...f,`const n${t.id} = `,...p.genCall(n(h?"createSharedDataDynamicComponent":g?"createSharedDataComponentWithFallback":"createSharedDataComponent"),r,d,l,s?"true":!1),p.NEWLINE,...p.genCall(n("setSharedData"),e.sharedDataVar,JSON.stringify(i.ident),[`n${t.id}`,g?"?.sharedData":".sharedData"])];function m(){return t.dynamic?t.dynamic.isStatic?p.genCall(n("resolveDynamicComponent"),D(t.dynamic,e)):["() => (",...D(t.dynamic,e),")"]:t.asset?y.toValidAssetId(t.tag,"component"):D(T.extend(y.createSimpleExpression(t.tag,!1),{ast:null}),e)}}function ir(t,e){const{seenInlineHandlerNames:n}=t;e=Fe(e);const r=n[e]||0;return n[e]=r+1,r===0?e:`${e}${r}`}function lr(t,e){const n=Object.create(null),r=[],s=t[0];if(T.isArray(s))for(let a=0;a<s.length;a++){const o=s[a];o.handler&&o.values.forEach((i,l)=>{if(!y.isMemberExpression(i,e.options)){const c=ir(e,`_on_${o.key.content}`);r.push({name:c,value:i}),n[c]=null,o.values[l]=T.extend({ast:null},y.createSimpleExpression(c))}})}return[n,r]}function wt(t,e){const n=t[0];if(T.isArray(n))return!n.length&&t.length===1?void 0:je(n,e,Mt(t.slice(1),e));if(t.length)return je([],e,Mt(t,e))}function je(t,e,n){const r=t.map(s=>kt(s,e,!0));return n&&r.push(["$: ",...n]),p.genMulti(r.length>1?p.DELIMITERS_OBJECT_NEWLINE:p.DELIMITERS_OBJECT,...r)}function Mt(t,e){const{helper:n}=e,r=[];for(const s of t){let a;if(T.isArray(s)){s.length&&r.push(je(s,e));continue}else s.kind===1?a=p.genMulti(p.DELIMITERS_OBJECT,kt(s,e)):(a=D(s.value,e),s.handler&&(a=p.genCall(n("toHandlers"),a)));r.push(["() => (",...a,")"])}if(r.length)return p.genMulti(p.DELIMITERS_ARRAY_NEWLINE,...r)}function kt(t,e,n){const r=De(t.values,e);return[...Ct(t,e),": ",...t.handler?We(e,t.values[0],void 0,!0):n?["() => (",...r,")"]:r,...t.model?[...cr(t,e),...ur(t,e)]:[]]}function cr(t,e){const n=t.key.isStatic?[JSON.stringify(`onUpdate:${T.camelize(t.key.content)}`)]:['["onUpdate:" + ',...D(t.key,e),"]"],r=At(t.values[0],e);return[",",p.NEWLINE,...n,": () => ",...r]}function ur(t,e){const{key:n,modelModifiers:r}=t;if(!r||!r.length)return[];const s=n.isStatic?n.content==="modelValue"?["modelModifiers"]:[`${n.content}Modifiers`]:["[",...D(n,e),' + "Modifiers"]'],a=ar(r);return[",",p.NEWLINE,...s,`: () => ({ ${a} })`]}function dr(t,e){if(!t.length)return;const n=t[0];return n.slotType===0?Ue(n,e,t.length>1?t.slice(1):void 0):Ue({slots:{}},e,t)}function Ue({slots:t},e,n){const r=Object.keys(t).map(s=>[`${JSON.stringify(s)}: `,...Ke(t[s],e)]);return n&&r.push(["$: ",...fr(n,e)]),p.genMulti(p.DELIMITERS_OBJECT_NEWLINE,...r)}function fr(t,e){return p.genMulti(p.DELIMITERS_ARRAY_NEWLINE,...t.map(n=>n.slotType===0?Ue(n,e):n.slotType===4?n.slots.content:Be(n,e,!0)))}function Be(t,e,n=!1){let r;switch(t.slotType){case 1:r=pr(t,e);break;case 2:r=hr(t,e);break;case 3:r=gr(t,e);break}return n?["() => (",...r,")"]:r}function pr(t,e){const{name:n,fn:r}=t;return p.genMulti(p.DELIMITERS_OBJECT_NEWLINE,["name: ",...Nt(n,e,e.helper("toDisplayString"))],["fn: ",...Ke(r,e)])}function hr(t,e){e.enterVFor();const{name:n,fn:r,loop:s}=t,{value:a,key:o,index:i,source:l}=s,c=a&&a.content,u=o&&o.content,d=i&&i.content,f={};c&&(f[c]=c),u&&(f[u]=u),d&&(f[d]=d);const h=p.genMulti(p.DELIMITERS_OBJECT_NEWLINE,["name: ",...e.withId(()=>{if(!n.sharedData)return D(n,e);const g=e.enterBlock(r),m=Nt(n,e,e.helper("toDisplayString"));return g(),m},f)],["fn: ",...e.withId(()=>Ke(r,e),f)]);return[...p.genCall(e.helper("createSharedDataForSlots"),p.genCall(e.helper("setSharedData"),e.sharedDataVar,JSON.stringify(l.sharedData.ident),vt(e)),D(l,e),[...p.genMulti(["(",")",", "],e.sharedDataVForVar,c||(u||d?"_":void 0),u||(d?"__":void 0),d)," => (",...h,")"])]}function gr(t,e){const{condition:n,positive:r,negative:s}=t;return[...It(n,e),p.INDENT_START,p.NEWLINE,"? ",...Be(r,e),p.NEWLINE,": ",...s?[...Be(s,e)]:["void 0"],p.INDENT_END]}function Ke(t,e){let n=!1,r,s,a,o;const{props:i}=t,l=new Set;i&&(r=i.content,(n=!!i.ast)?([o,a]=e.enterScope(),s=`_slotProps${o}`,y.walkIdentifiers(i.ast,(d,f,h,g,m)=>{m&&l.add(d.name)},!0)):l.add(s=r));const c={};l.forEach(d=>c[d]=n?`${s}[${JSON.stringify(d)}]`:null);const u=e.withId(()=>Ie(t,e,[s]),c);return a&&a(),u}function mr(t,e){const{helper:n}=e,{name:r,fallback:s}=t,[a,o]=p.buildCodeFragment(),i=r.sharedData?["() => (",...p.genCall(e.helper("setSharedData"),e.sharedDataVar,JSON.stringify(r.sharedData.ident),D(r,e)),")"]:D(r,e);let l;return s&&(l=Ie(s,e)),o(p.NEWLINE,...p.genCall(n("createSharedDataSlot"),i,wt(t.props,e)||"null",l)),a}function Vt(t,e){const[n,r]=p.buildCodeFragment();for(const s of t)r(...Rt(s,e));return n}function Rt(t,e){const[n,r]=p.buildCodeFragment();return r(...Ye(t,e)),n}function Ye(t,e){switch(t.type){case 2:return Hn(t,e);case 3:return zn(t,e);case 4:return er(t,e);case 5:return Jn(t,e);case 6:return jn(t,e);case 7:return Gn(t,e);case 8:return qn(t,e);case 9:return An(t,e);case 10:return wn(t,e);case 15:return Dt(t,e);case 16:return Bn(t,e);case 11:return or(t,e);case 14:return Zn(t);case 12:return mr(t,e);case 13:return sr(t,e);case 17:return tr();default:const n=t;throw new Error(`Unhandled operation type in genOperation: ${n}`)}}function Er(t,e,n){const{helper:r}=e,s=t.flatMap(h=>h.expressions),[a,o,i]=p.buildCodeFragment(),l=n===void 0;let c=0;const{ids:u,frag:d,varNames:f}=kn(e,s,l);o(...d);for(let h=0;h<t.length;h++){const g=t[h];c+=g.operations.length;const m=e.withId(()=>yr(g,e),u);h>0&&o(p.NEWLINE),a[a.length-1]===")"&&m[0]==="("&&o(";"),o(...m)}return(a.filter(h=>h===p.NEWLINE).length>1||c>1||d.length>0)&&(i("{",p.INDENT_START,p.NEWLINE),o(p.INDENT_END,p.NEWLINE,"}"),t.length||i(p.NEWLINE)),t.length&&(i(p.NEWLINE,`${r("renderSharedDataEffect")}(() => `),o(")")),!l&&f.length&&i(p.NEWLINE,"let ",f.join(", ")),n&&o(...e.withId(n,u)),a}function yr({operations:t},e){const[n,r]=p.buildCodeFragment(),s=Vt(t,e);return s.filter(a=>a===p.NEWLINE).length>1?r(...s):r(...s.filter(a=>a!==p.NEWLINE)),n}function Ge(t,e){const[n,r]=p.buildCodeFragment(),{operation:s}=t;return s&&r(...Rt(s,e)),n}function Pt(t,e){const[n,r]=p.buildCodeFragment(),{children:s}=t;let a=0;const o=[];for(const[i,l]of s.entries()){l.flags&2&&a--;const c=l.flags&1?l.flags&4?l.anchor:l.id:void 0;if(c===void 0&&!l.hasDynamicChild){r(...Ge(l,e));continue}c===l.anchor&&r(...Ge(l,e)),o.push(l)}if(o.length)for(const i of o)r(...Pt(i,e));return n}function Ie(t,e,n=[],r){return["(",...n,") => {",p.INDENT_START,...xe(t,e,r),p.INDENT_END,p.NEWLINE,"}"]}function xe(t,e,n,r){const[s,a]=p.buildCodeFragment(),{dynamic:o,effect:i,operation:l}=t,c=e.enterBlock(t);if(n){for(let d of e.ir.component){const f=y.toValidAssetId(d,"component"),h=d.endsWith("__self");h&&(d=d.slice(0,-6)),a(p.NEWLINE,`const ${f} = `,...p.genCall(e.helper("resolveComponent"),JSON.stringify(d),h?"true":void 0))}u("directive","resolveDirective")}for(const d of o.children)a(...Ge(d,e));for(const d of o.children)a(...Pt(d,e));return a(...Vt(l,e)),a(...Er(i.filter(d=>!d.generated),e,r)),c(),s;function u(d,f){for(const h of e.ir[d])a(p.NEWLINE,`const ${y.toValidAssetId(h,d)} = `,...p.genCall(e.helper(f),JSON.stringify(h)))}}class $r extends yt{constructor(e,n){super(),this.ir=e,this.helpers=new Set([]),this.helper=s=>(this.helpers.add(s),`_${s}`),this.delegates=new Set,this.identifiers=Object.create(null),this.seenInlineHandlerNames=Object.create(null),this.scopeLevel=0;const r={root:"",mode:"module",platform:"app-harmony",prefixIdentifiers:!0,sourceMap:!1,filename:"template.vue.html",scopeId:null,runtimeGlobalName:"Vue",runtimeModuleName:"vue",ssrRuntimeModuleName:"vue/server-renderer",ssr:!1,isTS:!1,inSSR:!1,inline:!1,bindingMetadata:{},expressionPlugins:[],componentType:"page",className:"",onError:y.defaultOnError,onWarn:y.defaultOnWarn};this.options=T.extend(r,n),this.block=e.block}withId(e,n){const{identifiers:r}=this,s=Object.keys(n);for(const o of s)r[o]||(r[o]=[]),r[o].unshift(n[o]||o);const a=e();return s.forEach(o=>T.remove(r[o],n[o]||o)),a}enterBlock(e){const n=this.block;return this.block=e,()=>this.block=n}enterScope(){return[this.scopeLevel++,()=>this.scopeLevel--]}get sharedDataScopeVar(){return"__sharedDataScope"}get sharedDataVForClassType(){return`\${__SHARED_DATA_CLASS_NAME_TYPE}_VFor${this.vForCount}`}}function Sr(t,e){const[n,r]=p.buildCodeFragment(),s=new $r(t,e),{helpers:a}=s,{inline:o}=e;r(p.NEWLINE,"return (function renderSharedData(): UniSharedData { 'raw js'"),r(p.INDENT_START),e.componentType==="page"?(r(p.NEWLINE,`const __sharedData = useSharedDataPage<__SHARED_DATA_CLASS_NAME_TYPE>(${s.helper("useSharedDataPageId")}())`),r(p.NEWLINE,`const __sharedDataScope = ${s.helper("useSharedDataScope")}(__sharedData)`)):(r(p.NEWLINE,`const __sharedDataScope = ${s.helper("useSharedDataScope")}()`),r(p.NEWLINE,"const __sharedData = useSharedDataComponent<__SHARED_DATA_CLASS_NAME_TYPE>(__sharedDataScope)")),t.hasTemplateRef&&r(p.NEWLINE,`const ${Ot} = ${s.helper("createSharedDataTemplateRefSetter")}()`),r(...xe(t.block,s,!0)),r(p.NEWLINE,"return __sharedData"),r(p.INDENT_END,p.NEWLINE),r("})()");const i=Nr(s)+Tr(s),l=[...i].filter(d=>d===`
`).length;l&&!o&&n.unshift(...new Array(l).fill(p.LF));const[c,u]=p.codeFragmentToString(n,s);return{code:c,ast:t,preamble:i,map:u&&u.toJSON(),helpers:a}}function Nr({helpers:t,options:e}){let n="";return t.size&&(n+=`import { ${[...t].map(r=>`${r} as _${r}`).join(", ")} } from '${e.runtimeModuleName}';
`),n}function Tr(t){return`
const __className = '${t.options.className}' as const
type __SHARED_DATA_CLASS_NAME_TYPE = \`\${typeof __className}SharedData\`
`}const E=Symbol("newline"),Lt=Symbol("line feed"),Q=Symbol("indent start"),ee=Symbol("indent end");function U(...t){const e=t.push.bind(t),n=t.unshift.bind(t);return[t,e,n]}function K([t,e,n,r],...s){if(r){for(;s.length>0&&!s[s.length-1];)s.pop();s=s.map(i=>i||r)}else s=s.filter(Boolean);const a=[];o(t);for(let[i,l]of s.entries())o(l),i<s.length-1&&o(n);return o(e),a;function o(i){T.isArray(i)||(i=[i]),a.push(...i)}}const Ce=["[","]",", "],_r=[["[",Q,E],[ee,E,"]"],[", ",E]],be=[["{",Q,E],[ee,E,"}"],[", ",E]];function b(t,...e){const n=T.isArray(t),r=n?t[0]:t,s=n?t[1]:"null";return[r,...K(["(",")",", ",s],...e)]}function vr(t,e){const{options:{sourceMap:n}}=e,r=e.options.relativeFilename||e.options.filename;let s;n&&(s=new an.SourceMapGenerator,s.setSourceContent(r,e.ir.source),s._sources.add(r));let a="";const o={line:1,column:1,offset:0};let i=0;for(let c of t){if(!c)continue;if(c===E)c=[`
${"  ".repeat(i)}`,0];else if(c===Q){i++;continue}else if(c===ee){i--;continue}else if(c===Lt){o.line++,o.column=0,o.offset++;continue}T.isString(c)&&(c=[c]);let[u,d=-2,f,h]=c;a+=u,s&&(f&&l(f.start,h),d===-3?y.advancePositionWithMutation(o,u):(o.offset+=u.length,d===-2?o.column+=u.length:(d===-1&&(d=u.length-1),o.line++,o.column=u.length-d)),f&&f!==y.locStub&&l(f.end))}return[a,s];function l(c,u=null){const{_names:d,_mappings:f}=s;u!==null&&!d.has(u)&&d.add(u),f.add({originalLine:c.line,originalColumn:c.column-1,generatedLine:o.line,generatedColumn:o.column-1,source:r,name:u})}}function Dr({parent:t,elements:e,anchor:n},{helper:r}){let s=e.map(a=>`n${a}`).join(", ");return e.length>1&&(s=`[${s}]`),[E,...b(r("insert"),s,`n${t}`,n===void 0?void 0:`n${n}`)]}function Ir(t,{helper:e}){return[E,...b(e("prepend"),`n${t.parent}`,...t.elements.map(n=>`n${n}`))]}function C(t,e,n){const{content:r,ast:s,isStatic:a,loc:o,sharedData:i}=t;if(i)return[[e.sharedDataIdent(i.ident),-2,o]];if(a)return[[JSON.stringify(r),-2,o]];if(!t.content.trim()||s===!1||p.isConstantExpression(t))return[[r,-2,o],n&&` = ${n}`];if(s===null)return Ft(r,e,o,n);const l=[],c=new Map,u=[];y.walkIdentifiers(s,f=>{l.push(f),c.set(f,u.slice())},!1,u);let d=!1;if(l.length){const[f,h]=U(),g=s&&y.TS_NODE_TYPES.includes(s.type);return l.sort((m,N)=>m.start-N.start).forEach((m,N)=>{const O=m.start-1,v=m.end-1,A=l[N-1];if(!(g&&N===0)){const j=r.slice(A?A.end-1:0,O);j.length&&h([j,-3])}const V=r.slice(O,v),P=c.get(m),I=P[P.length-1];d||(d=I&&(I.type==="MemberExpression"||I.type==="OptionalMemberExpression")),h(...Ft(V,e,{start:y.advancePositionWithClone(t.loc.start,V,O),end:y.advancePositionWithClone(t.loc.start,V,v),source:V},d?void 0:n,m,I,P)),N===l.length-1&&v<r.length&&!g&&h([r.slice(v),-3])}),n&&d&&h(` = ${n}`),f}else return[[r,-3,o]]}function Ft(t,e,n,r,s,a,o){const{options:i,helper:l,identifiers:c}=e,{inline:u,bindingMetadata:d}=i;let f=t;const h=c[t];if(h&&h.length){const v=h[0];return T.isString(v)?a&&a.type==="ObjectProperty"&&a.shorthand?[[`${f}: ${v}`,-2,n]]:[[v,-2,n]]:C(v,e,r)}let g;y.isStaticProperty(a)&&a.shorthand&&(g=`${t}: `);const m=d&&d[t];if(u)switch(m){case"setup-let":f=t=r?`_isRef(${t}) ? (${t}.value = ${r}) : (${t} = ${r})`:O();break;case"setup-ref":f=t=N(`${t}.value`);break;case"setup-maybe-ref":const v=a&&y.isInDestructureAssignment(a,o||[]),A=a&&a.type==="AssignmentExpression"&&a.left===s,V=a&&a.type==="UpdateExpression"&&a.argument===s;t=A||V||v?f=`${t}.value`:r?`${l("isRef")}(${t}) ? (${t}.value = ${r}) : null`:O();break;case"props":t=T.genPropsAccessExp(t);break;case"props-aliased":t=T.genPropsAccessExp(d.__propsAliases[t]);break;default:t=N(t)}else xr(t)&&(m==="props-aliased"?t=`$props['${d.__propsAliases[t]}']`:t=`${m==="props"?"$props":"_ctx"}.${t}`),t=N(t);return[g,[t,-2,n,f]];function N(v){return r?`${v} = ${r}`:v}function O(){return`${l("unref")}(${t})`}}function xr(t){return!(T.isGloballyAllowed(t)||t==="require"||t==="$props"||t==="$emit"||t==="$attrs"||t==="$slots")}function Cr(t,e,n){const{seenVariable:r,variableToExpMap:s,expToVariableMap:a,seenIdentifier:o,updatedVariable:i}=br(e),l=Or(t,r,s,a,o,i),c=wr(t,e,l,i,a);return Mr([...l,...c],t,n)}function br(t){const e=Object.create(null),n=new Map,r=new Map,s=new Set,a=new Set,o=(i,l,c,u,d=[])=>{c&&s.add(i),e[i]=(e[i]||0)+1,n.set(i,(n.get(i)||new Set).add(l));const f=r.get(l)||[];f.push({name:i,loc:u}),r.set(l,f),d.some(h=>h.type==="UpdateExpression"||h.type==="AssignmentExpression")&&a.add(i)};for(const i of t){if(!i.ast){i.ast===null&&o(i.content,i,!0);continue}y.walkIdentifiers(i.ast,(l,c,u)=>{if(c&&Wt(c)){const d=le(c,f=>{o(f.name,i,!0,{start:f.start,end:f.end})});o(d,i,!1,{start:c.start,end:c.end},u)}else u.some(Wt)||o(l.name,i,!0,{start:l.start,end:l.end},u)})}return{seenVariable:e,seenIdentifier:s,variableToExpMap:n,expToVariableMap:r,updatedVariable:a}}function Or(t,e,n,r,s,a){const o=[],i=new Map;for(const[l,c]of n)if(!a.has(l)&&e[l]>1&&c.size>0){const u=s.has(l),d=u?l:He(l);c.forEach(f=>{if(f.ast&&d!==l){const h=i.get(f)||[];h.push({name:d,locs:r.get(f).reduce((g,m)=>(m.name===l&&m.loc&&g.push(m.loc),g),[])}),i.set(f,h)}}),!o.some(f=>f.name===d)&&(!u||Ar(l,r,c))&&o.push({name:d,isIdentifier:u,value:T.extend({ast:u?null:Oe(t,l)},y.createSimpleExpression(l)),rawName:l,exps:c,seenCount:e[l]})}for(const[l,c]of i)c.flatMap(({name:u,locs:d})=>d.map(({start:f,end:h})=>({start:f,end:h,name:u}))).sort((u,d)=>d.end-u.end).forEach(({start:u,end:d,name:f})=>{l.content=l.content.slice(0,u-1)+f+l.content.slice(d-1)}),l.ast=Oe(t,l.content);return o}function Ar(t,e,n){const r=Array.from(n,a=>e.get(a).map(o=>o.name));if(r.every(a=>a.length===1)||r.some(a=>a.filter(o=>o===t).length>1))return!0;const s=r[0];return r.some(a=>a.length!==s.length)?!(r.some(a=>a.length>s.length&&a.every(o=>s.includes(o)))||r.some(a=>s.length>a.length&&s.every(o=>a.includes(o)))):!r.some(a=>a.some(o=>s.includes(o)))}function wr(t,e,n,r,s){const a=[],o=e.reduce((i,l)=>{const c=s.get(l).map(u=>u.name);return l.ast&&l.ast.type!=="Identifier"&&!(c&&c.some(u=>r.has(u)))&&(i[l.content]=(i[l.content]||0)+1),i},Object.create(null));return Object.entries(o).forEach(([i,l])=>{if(l>1){const c=He(i);if(!a.some(u=>u.name===c)){const u={};for(let f=n.length-1;f>=0;f--){const h=n[f];!h.exps||!h.seenCount||[...h.exps].every(g=>g.content===i&&h.seenCount===l)&&(u[h.name]=h.rawName,n.splice(f,1))}const d=T.extend({},e.find(f=>f.content===i));Object.keys(u).forEach(f=>{d.content=d.content.replace(f,u[f]),d.ast&&(d.ast=Oe(t,d.content))}),a.push({name:c,value:d})}e.forEach(u=>{u.content===i?(u.content=c,u.ast=null):u.content.includes(i)&&(u.content=u.content.replace(new RegExp(kr(i),"g"),c),u.ast=Oe(t,u.content))})}}),a}function Mr(t,e,n){const[r,s]=U(),a=Object.create(null),o=new Set;return t.forEach(({name:i,isIdentifier:l,value:c})=>{if(l){const u=a[i]=`_${i}`;o.add(u),n&&s("const "),s(`${u} = `,...C(c,e),E)}}),t.forEach(({name:i,isIdentifier:l,value:c})=>{if(!l){const u=a[i]=`_${i}`;o.add(u),n&&s("const "),s(`${u} = `,...e.withId(()=>C(c,e),a),E)}}),{ids:a,frag:r,varNames:[...o]}}function kr(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Oe(t,e){const n=t.options.expressionPlugins,r={plugins:n?[...n,"typescript"]:["typescript"]};return Ee.parseExpression(`(${e})`,r)}function He(t){return`${t.replace(/[^a-zA-Z0-9]/g,"_").replace(/_+/g,"_").replace(/_+$/,"")}`}function le(t,e){if(!t)return"";switch(t.type){case"Identifier":return e(t),t.name;case"StringLiteral":return t.extra?t.extra.raw:t.value;case"NumericLiteral":return t.value.toString();case"BinaryExpression":return`${le(t.left,e)} ${t.operator} ${le(t.right,e)}`;case"CallExpression":return`${le(t.callee,e)}(${t.arguments.map(s=>le(s,e)).join(", ")})`;case"MemberExpression":case"OptionalMemberExpression":const n=le(t.object,e),r=t.computed?`[${le(t.property,e)}]`:`.${le(t.property,T.NOOP)}`;return`${n}${r}`;default:return""}}const Wt=t=>t.type==="MemberExpression"||t.type==="OptionalMemberExpression";function Vr(t,e){if(!(e.feature&2))return[];const{element:n,key:r,keyOverride:s,modifiers:a,delegate:o,effect:i,sharedData:l}=t,c=f(),u=h(),d=`e${l.ident}${t.element}`;return[E,`const ${d} = ${e.sharedDataIdent(l.ident)}`,E,...b(e.helper(o?"delegate":"onElement"),`n${n}`,c,["(event: UniEvent) => {",`${d}(event)`,"}"],u)];function f(){const g=C(r,e);if(s){const m=JSON.stringify(s[0]),N=JSON.stringify(s[1]),O=["(",...g,")"];return[...O,` === ${m} ? ${N} : `,...O]}else return C(r,e)}function h(){let{options:g}=a;if(!(!g.length&&!i))return K(be,i&&["effect: true"],...g.map(m=>[`${m}: true`]))}}function Rr(t,e){if(!(e.feature&2))return[];const{helper:n,sharedDataIdent:r}=e;return[E,...b(n("setElementDynamicEvents"),`n${t.element}`,r(t.event.sharedData.ident))]}function Pr(t,e,n={nonKeys:[],keys:[]},r=!1){let s=["() => {}"];if(e&&e.content.trim())if(y.isMemberExpression(e,t.options))s=C(e,t),!Wr(e,t)&&!r&&(s=["e => ",...s,"(e)"]);else if(y.isFnExpression(e,t.options))s=C(e,t);else{const i=e.content.includes("$event"),l=e.content.includes(";"),c=i?t.withId(()=>C(e,t),{$event:null}):C(e,t);s=[i?"$event => ":"() => ",l?"{":"(",...c,l?"}":")"]}const{keys:a,nonKeys:o}=n;return o.length&&(s=Lr(t,s,o)),a.length&&(s=Fr(t,s,a)),r&&s.unshift("() => "),s}function Lr(t,e,n){return b(t.helper("withModifiers"),e,JSON.stringify(n))}function Fr(t,e,n){return b(t.helper("withKeys"),e,JSON.stringify(n))}function Wr(t,e){if(t.ast===null&&e.options.bindingMetadata[t.content]==="setup-const")return!0}function Jr(t,e){const{helper:n,factoryVar:r}=e,{source:s,value:a,key:o,index:i,render:l,keyProp:c,once:u,id:d,component:f,onlyChild:h}=t;let g=null;const m=o&&o.content,N=i&&i.content,O=["() => (",...C(s,e),")"],v=me(),A=e.enterVFor(),[V,P]=e.enterScope(),I={},j=`_for_item${A}`;I[j]=null,v.forEach((S,_)=>{let x=`${j}.value${S?S.path:""}`;if(S)if(S.helper&&(I[S.helper]=null,x=`${S.helper}(${x}, ${S.helperArgs})`),S.dynamic){const L=I[_]=y.createSimpleExpression(x),re=e.options.expressionPlugins;L.ast=Ee.parseExpression(`(${x})`,{plugins:re?[...re,"typescript"]:["typescript"]})}else I[_]=x;else I[_]=x});const Y=[e.sharedDataVForItemVar],ce=`const ${e.sharedDataVForVar} = useSharedDataVFor<UniSharedData, ${e.sharedDataVForClass}>(${e.sharedDataVForItemVar})`,G=`_for_key${A}`;Y.push(`, ${G}`),m&&(I[m]=`${G}.value`,I[G]=null);const B=`_for_index${A}`;Y.push(`, ${B}`),N&&(I[N]=`${B}.value`,I[B]=null);const te=e.enterBlock(l),pe=ge(c,e.sharedDataVForItemVar);te();const{selectorPatterns:F,keyOnlyBindingPatterns:he}=Tt(l,c,I),X=e.withId(()=>{const S=[];return S.push("(",...Y,") => {",Q,E,ce,E),F.length||he.length?S.push(...Ve(l,e,!1,()=>{const _=[];for(let x=0;x<F.length;x++){const{effect:L}=F[x],re=[];for(const q of L.operations)re.push(...Qe(q,e));re.length&&(_.push(E,n(`render${e.helperType}Effect`),"(() => {",Q),_.push(...re),_.push(ee,E,"})"))}for(const{effect:x}of he)for(const L of x.operations)_.push(...Qe(L,e));return _})):S.push(...Ve(l,e)),S.push(ee,E,"}"),S},I);P();let ne=0;return h&&(ne|=1),f&&(ne|=2),u&&(ne|=4),[E,`const n${d} = `,...b([n(`create${e.helperType}For`),"undefined"],r,O,X,pe,ne?String(ne):void 0,void 0)];function me(){const S=new Map;return a&&(g=a&&a.content,a.ast?y.walkIdentifiers(a.ast,(_,x,L,re,q)=>{if(q){let H="",se=!1,ue,ae;for(let M=0;M<L.length;M++){const w=L[M],k=L[M+1]||_;if(w.type==="ObjectProperty"&&w.value===k)w.key.type==="StringLiteral"?H+=`[${JSON.stringify(w.key.value)}]`:w.computed?(se=!0,H+=`[${a.content.slice(w.key.start-1,w.key.end-1)}]`):H+=`.${w.key.name}`;else if(w.type==="ArrayPattern"){const z=w.elements.indexOf(k);k.type==="RestElement"?H+=`.slice(${z})`:H+=`[${z}]`}else w.type==="ObjectPattern"&&k.type==="RestElement"&&(ue=e.helper("getRestElement"),ae="["+w.properties.filter(z=>z.type==="ObjectProperty").map(z=>z.key.type==="StringLiteral"?JSON.stringify(z.key.value):z.computed?(se=!0,a.content.slice(z.key.start-1,z.key.end-1)):JSON.stringify(z.key.name)).join(", ")+"]");k.type==="AssignmentPattern"&&(w.type==="ObjectProperty"||w.type==="ArrayPattern")&&(se=!0,ue=e.helper("getDefaultValue"),ae=a.content.slice(k.right.start-1,k.right.end-1))}S.set(_.name,{path:H,dynamic:se,helper:ue,helperArgs:ae})}},!0):S.set(g,null)),S}function ge(S,_){if(!S)return!1;const x=e.withId(()=>C(S,e),$());return[...K(["(",")",", "],_,"_","__")," => {",E,ce,E,"return ",...x,"}"]}function $(){const S={};return m&&(S[m]=null),N&&(S[N]=null),v.forEach((_,x)=>S[x]=null),S}}function jr(t,e){const{helper:n}=e,{value:r,element:s}=t;return[E,...b(n("setHtml"),`n${s}`,C(r,e))]}function Jt(t,e,n=!1){const{helper:r,factoryVar:s}=e,{condition:a,positive:o,negative:i,once:l}=t,[c,u]=U(),d=["() => (",...Ur(a,e),")"];let f=ke(o,e),h=!1;return i&&(i.type===1?h=ke(i,e):h=["() => ",...Jt(i,e,!0)]),n||u(E,`const n${t.id} = `),u(...b(r(`create${e.helperType}If`),s,d,f,h,l&&"true")),c}function Ur(t,e){return t.sharedData?C(t,e):[JSON.stringify(Te(t))]}const Ae={setElementClass:{name:"setElementClass"},setElementStyle:{name:"setElementStyle"},setElementAttr:{name:"setElementAttr",needKey:!0}},jt={setNativeViewAttr:{name:"setNativeViewAttr",needKey:!0}};function Br(t,e){const{helper:n}=e,{prop:{key:r,values:s,modifier:a,sharedData:o},tag:i}=t,l=r.content;if(l==="class"&&!(e.feature&16))return[];if(l==="id"&&!(e.feature&32))return[];const c=e.options.renderer==="nativeView"?Hr(i,l,a):Gr(i,l,a);if(!c)return[];if(o)return[E,...b([n(c.name),null],`n${t.element}`,c.needKey?C(r,e):!1,e.sharedDataIdent(o.ident))];const u=Yr(s,e);return[E,...b([n(c.name),null],`n${t.element}`,c.needKey?C(r,e):!1,u)]}function Kr(t,e){const{helper:n,sharedDataIdent:r}=e;return[E,...b(n(`set${e.helperType}DynamicProps`),`n${t.element}`,r(t.sharedData.ident))]}function Yr(t,e){return t.length===1?C(t[0],e):K(Ce,...t.map(n=>C(n,e)))}function Gr(t,e,n){return t.toUpperCase(),n?n==="."&&Ut(e)||Ae.setElementAttr:Ut(e)||Ae.setElementAttr}function Ut(t,e){if(t==="class")return Ae.setElementClass;if(t==="style")return Ae.setElementStyle}function Hr(t,e,n){if(e!=="style")return t.toUpperCase(),n&&n==="."&&void 0||jt.setNativeViewAttr}function zr(t,e){return t.value.sharedData?[E,e.sharedDataIdent(t.value.sharedData.ident)+`(n${t.element}.getNodeId())`]:[]}function Xr(t){return[]}function qr(t,e){if(!(e.feature&1))return[];const{helper:n}=e,{element:r,values:s,generated:a}=t,o=Zr(s,e);return[E,...b(n("setElementText"),`${a?"x":"n"}${r}`,o)]}function Zr(t,e){return t.flatMap((n,r)=>{let s=C(n,e);return r>0&&s.unshift(" + "),s})}function Qr(t,e){return e.feature&1?[E,`const x${t.parent} = ${e.helper(`child${e.helperType}`)}(n${t.parent})`]:[]}function es(t,e){return e.feature&8?[E,...b(e.helper("applyElementVShow"),`n${t.element}`,["() => (",...C(t.dir.exp,e),")"])]:[]}const ts={text:"applyElementTextModel",dynamic:"applyElementDynamicModel"};function ns(t,e){if(!(e.feature&4))return[];const{modelType:n,element:r,dir:{exp:s,modifiers:a}}=t;return[E,...b(e.helper(ts[n]),`n${r}`,["() => (",...C(s,e),")"],e.sharedDataIdent(s.sharedData.vModel.eventIdent),a.length?`{ ${a.map(o=>o.content+": true").join(",")} }`:void 0)]}function rs(t,e){switch(t.name){case"show":return es(t,e);case"model":return ns(t,e);default:return[]}}function ze(t,e){const n=os(t,e.block.operation);return n.length?ss(n,e):[]}function ss(t,e){const{helper:n}=e,r=`n${t[0].element}`,s=t.map(o),a=K(Ce,...s);return[E,...b(n("withVaporDirectives"),r,a)];function o({dir:i,name:l,asset:c}){const u=c?y.toValidAssetId(l,"directive"):C(T.extend(y.createSimpleExpression(l,!1),{ast:null}),e),d=i.exp&&["() => ",...C(i.exp,e)],f=i.arg&&C(i.arg,e),h=!!i.modifiers.length&&["{ ",as(i.modifiers.map(g=>g.content))," }"];return K(Ce.concat("void 0"),u,d,f,h)}}function as(t){return t.map(e=>`${y.isSimpleIdentifier(e)?e:JSON.stringify(e)}: true`).join(", ")}function os(t,e){return e.filter(n=>n.type===13&&n.element===t&&!n.builtin)}function is(t,e){const{helper:n,sharedDataIdent:r}=e,{root:s,props:a,slots:o,sharedData:i}=t,l=us(o,e),[c,u]=cs(a,e),d=u.reduce((f,{name:h,value:g})=>{const m=Pr(e,g,void 0,!1);return[...f,`const ${h} = `,...m,E]},[]);return[E,...d,`const n${t.id} = `,...b(t.dynamic&&!t.dynamic.isStatic?n(`create${e.helperType}DynamicComponent`):t.asset?n(`create${e.helperType}ComponentWithFallback`):n(`create${e.helperType}Component`),r(i.ident),void 0,l,s?"true":!1),...ze(t.id,e)]}function ls(t,e){const{seenInlineHandlerNames:n}=t;e=He(e);const r=n[e]||0;return n[e]=r+1,r===0?e:`${e}${r}`}function cs(t,e){const n=Object.create(null),r=[],s=t[0];if(T.isArray(s))for(let a=0;a<s.length;a++){const o=s[a];o.handler&&o.values.forEach((i,l)=>{if(!y.isMemberExpression(i,e.options)){const c=ls(e,`_on_${o.key.content}`);r.push({name:c,value:i}),n[c]=null,o.values[l]=T.extend({ast:null},y.createSimpleExpression(c))}})}return[n,r]}function us(t,e){if(!t.length)return;const n=t[0];return n.slotType===0?Xe(n,e,t.length>1?t.slice(1):void 0):Xe({slots:{}},e,t)}function Xe({slots:t},e,n){const r=Object.keys(t).map(s=>[`${JSON.stringify(s)}: `,...Ze(t[s],e)]);return n&&r.push(["$: ",...ds(n,e)]),K(be,...r)}function ds(t,e){return K(_r,...t.map(n=>n.slotType===0?Xe(n,e):n.slotType===4?n.slots.content:qe(n,e,!0)))}function qe(t,e,n=!1){let r;switch(t.slotType){case 1:r=fs(t,e);break;case 2:r=ps(t,e);break;case 3:r=hs(t,e);break}return n?["() => (",...r,")"]:r}function fs(t,e){const{name:n,fn:r}=t;return K(be,["name: ",...C(n,e)],["fn: ",...Ze(r,e)])}function ps(t,e){e.enterVFor();const{name:n,fn:r,loop:s}=t,{value:a,key:o,index:i,source:l}=s,c=a&&a.content,u=o&&o.content,d=i&&i.content,f={};c&&(f[c]=c),u&&(f[u]=u),d&&(f[d]=d);const h=K(be,["name: ",...e.withId(()=>{const g=e.enterBlock(r),m=C(n,e);return g(),m},f)],["fn: ",...e.withId(()=>Ze(r,e),f)]);return[...b(e.helper(`create${e.helperType}ForSlots`),C(l,e),[...K(["(",")",", "],e.sharedDataVForVar,c||(u||d?"_":void 0),u||(d?"__":void 0),d)," => (",...h,")"])]}function hs(t,e){const{condition:n,positive:r,negative:s}=t;return[...C(n,e),Q,E,"? ",...qe(r,e),E,": ",...s?[...qe(s,e)]:["void 0"],ee]}function Ze(t,e){let n=!1,r,s,a,o;const{props:i}=t,l=new Set;i&&(r=i.content,(n=!!i.ast)?([o,a]=e.enterScope(),s=`_slotProps${o}`,y.walkIdentifiers(i.ast,(d,f,h,g,m)=>{m&&l.add(d.name)},!0)):l.add(s=r));const c={};l.forEach(d=>c[d]=n?`${s}[${JSON.stringify(d)}]`:null);const u=e.withId(()=>ke(t,e,[s]),c);return a&&a(),u}function gs(t,e){const{helper:n}=e,{id:r,name:s,fallback:a}=t,[o,i]=U(),l=s.isStatic?C(s,e):["() => (",...C(s,e),")"];let c;return a&&(c=ke(a,e)),i(E,`const n${r} = `,...b(n(`create${e.helperType}Slot`),l,"null",c)),o}function Bt(t,e){const[n,r]=U();for(const s of t)r(...Kt(s,e));return n}function Kt(t,e){const[n,r]=U();return p.isBlockOperation(t)&&t.parent&&r(...ys(t,e)),r(...Qe(t,e)),n}function Qe(t,e){switch(t.type){case 2:return Br(t,e);case 3:return Kr(t,e);case 4:return qr(t,e);case 5:return Vr(t,e);case 6:return Rr(t,e);case 7:return jr(t,e);case 8:return zr(t,e);case 9:return Dr(t,e);case 10:return Ir(t,e);case 15:return Jt(t,e);case 16:return Jr(t,e);case 11:return is(t,e);case 14:return Xr();case 12:return gs(t,e);case 13:return rs(t,e);case 17:return Qr(t,e);default:const n=t;throw new Error(`Unhandled operation type in genOperation: ${n}`)}}function ms(t,e,n){const{helper:r}=e,s=t.flatMap(g=>g.expressions),[a,o,i]=U(),l=n===void 0;let c=0;const{ids:u,frag:d,varNames:f}=Cr(e,s,l);for(let g=0;g<t.length;g++){const m=t[g];c+=m.operations.length;const N=e.withEffect(()=>e.withId(()=>Es(m,e),u));g>0&&N.length&&o(E),a[a.length-1]===")"&&N[0]==="("&&o(";"),o(...N)}const h=a.filter(g=>g===E).length;return a.length&&(h>1||c>1||d.length>0)&&(i("{",Q,E),o(ee,E,"}"),t.length||i(E)),t.length&&a.length&&(i(E,`${r(`render${e.helperType}Effect`)}(() => `),o(")")),!l&&f.length&&i(E,"let ",f.join(", ")),n&&o(...e.withId(n,u)),a}function Es({operations:t},e){const[n,r]=U(),s=Bt(t,e);return s.filter(a=>a===E).length>1?r(...s):r(...s.filter(a=>a!==E)),n}function ys(t,e){return[E,...b(e.helper(`set${e.helperType}InsertionState`),`n${t.parent}`,t.anchor==null?void 0:t.anchor===-1?"0":`n${t.anchor}`)]}const J={TEXT:"text",BUTTON:"button",COMMENT:"comment",ELEMENT:"element"},R={VALUE_ATTR:"value",EMPTY_STRING:"",TEXT_PLACEHOLDER:p.TEXT_PLACEHOLDER,UNKNOWN_COMMENT:"unknown",EXT_STYLE_MARKER:"ext:style"},de={ELEMENT:"e",STYLE:"s",TEMPLATE:"t",FACTORY:"f"},Yt="<!--",Gt="-->",Ht="<!",et=/\s/,$s=/[\s=]/,tt=/\s*\/$/;class lt{constructor(e){this.html=e,this.length=e.length,this.index=0}parse(){const e=[];for(this.index=0;this.index<this.length;)if(this.html[this.index]==="<"){const n=this.parseTag();n?(e.push(n.node),this.index=n.endIndex):this.index++}else{const n=this.parseText();n&&e.push(n)}return e}parseText(){const e=this.index,n=this.html.indexOf("<",e),r=n===-1?this.length:n;if(e===r)return null;const s=this.html.substring(e,r);return this.index=r,{type:"text",content:s}}parseTag(){return this.html.startsWith(Yt,this.index)?this.parseComment():this.html.startsWith(Ht,this.index)?this.parseDoctype():this.parseElement()}parseComment(){const e=this.index+Yt.length,n=this.html.indexOf(Gt,e);return n===-1?null:{node:{type:"comment",content:this.html.substring(e,n)},endIndex:n+Gt.length}}parseDoctype(){const e=this.html.indexOf(">",this.index+Ht.length);return e===-1?null:{node:{type:"comment",content:""},endIndex:e+1}}parseElement(){const e=this.html.indexOf(">",this.index);if(e===-1)return null;const n=this.html.substring(this.index+1,e),{tag:r,attrs:s,selfClosing:a}=this.parseTagContent(n);if(a)return{node:{type:"element",tag:r,attrs:s,children:[]},endIndex:e+1};const o=this.findMatchingEndTag(r,e+1);if(o===-1)return{node:{type:"element",tag:r,attrs:s,children:[]},endIndex:e+1};const i=this.html.substring(e+1,o),l=i?new lt(i).parse():[];return{node:{type:"element",tag:r,attrs:s,children:l},endIndex:o+`</${r}>`.length}}parseTagContent(e){const n=tt.test(e),r=e.replace(tt,"").trim();if(!r)return{tag:"",attrs:{},selfClosing:n};const s=r.search(et),a=s===-1?r:r.substring(0,s);if(s===-1)return{tag:a,attrs:{},selfClosing:n};const o=r.substring(s+1),i=this.parseAttributes(o);return{tag:a,attrs:i,selfClosing:n}}parseAttributes(e){const n={};let r=0;const s=e.length;for(;r<s&&(r=this.skipWhitespace(e,r),!(r>=s));){const a=r;for(;r<s&&!$s.test(e[r]);)r++;if(r===a)break;const o=e.substring(a,r);if(r=this.skipWhitespace(e,r),r>=s||e[r]!=="="){this.isSpecialAttribute(o)||(n[o]=o);continue}if(r++,r=this.skipWhitespace(e,r),r>=s){this.isSpecialAttribute(o)||(n[o]="");continue}const i=this.parseAttributeValue(e,r);(!this.isSpecialAttribute(o)||i.value.trim()!=="")&&(n[o]=i.value),r=i.endIndex}return n}parseAttributeValue(e,n){const r=e[n];if(r==='"'||r==="'"){const s=n+1;let a=s;for(;a<e.length&&e[a]!==r;)a++;return{value:e.substring(s,a),endIndex:a<e.length?a+1:a}}else{const s=n;let a=s;for(;a<e.length&&!et.test(e[a]);)a++;return{value:e.substring(s,a),endIndex:a}}}isSpecialAttribute(e){return e==="id"||e==="class"||e==="style"}skipWhitespace(e,n){for(;n<e.length&&et.test(e[n]);)n++;return n}findMatchingEndTag(e,n){const r=`<${e}`,s=`</${e}>`;let a=1,o=n;for(;a>0&&o<this.length;){const i=this.html.indexOf(r,o),l=this.html.indexOf(s,o);if(l===-1)break;if(i!==-1&&i<l){const c=this.html.indexOf(">",i);if(c!==-1&&c<l){const u=this.html.substring(i+1,c);tt.test(u)||a++}o=c+1}else{if(a--,a===0)return l;o=l+s.length}}return-1}}function nt(t){return!t||t.length!==1||t[0].type!==J.TEXT||t[0].content===" "?R.EMPTY_STRING:t[0].content||R.EMPTY_STRING}function rt(t){return!t||Object.keys(t).length===0||Object.keys(t).length===1&&R.EXT_STYLE_MARKER in t}function zt(t,e){const n=T.extend({},t);return e&&(n[R.VALUE_ATTR]=e),n}function Xt(t){const e="page: UniPage",n=t.options.renderer==="element"?": UniElement":": UniNativeBaseView";return{paramType:e,returnType:n}}function st(t){return`${de.ELEMENT}${t.templateVariableCounter++}`}function Ss(t){return`${de.STYLE}${t.templateStyleCounter++}`}function at(t,e){const n=new SyntaxError(t);return n.loc=e,n}function Ns(t,e,n=!0){return n&&e.resetTemplateCounters(),qt(t,e)}function qt(t,e){switch(t.type){case J.TEXT:return Ts(t.content||R.EMPTY_STRING,e);case J.COMMENT:return Zt(t.content||R.EMPTY_STRING,e);case J.ELEMENT:return vs(t,e);default:return Zt(R.UNKNOWN_COMMENT,e)}}function ot(t){return R.EMPTY_STRING===t||t===R.TEXT_PLACEHOLDER}function Ts(t,e){const n=st(e),r=[`const ${n} = ${e.genCreateTag("text")}`];return ot(t)||r.push(`${n}.setText(${JSON.stringify(t)})`),{variableName:n,statements:r}}function Zt(t,e){const n=st(e),r=[`const ${n} = ${e.genCreateTag("comment",JSON.stringify(t))}`];return{variableName:n,statements:r}}const _s={[J.TEXT]:Ds,[J.BUTTON]:Is};function vs(t,e){const{tag:n,attrs:r,children:s}=t,a={tag:n,attrs:r,children:s},o=_s[n];return o?o(a,e):xs(a,e)}function Ds(t,e){const{tag:n,attrs:r,children:s}=t;if(s&&s.some(a=>a.type===J.ELEMENT))return we(n,e,r,s);{const a=nt(s),o=zt(r,a);return we(n,e,o,void 0)}}function Is(t,e){const n=nt(t.children),r=zt(t.attrs,n);return we(t.tag,e,r,void 0)}function xs(t,e){const{tag:n,attrs:r,children:s}=t;return we(n,e,r,s)}function Cs(t,e){if(!t)return;const n={};for(const[r,s]of Object.entries(t))e.options.isIgnoreAttr(r)||(n[r]=s);return n}function we(t,e,n,r){const s=st(e),a=[];a.push(`const ${s} = ${e.genCreateTag(t)}`);const o=Cs(n,e);if(o&&!rt(o)){let i=!1;R.EXT_STYLE_MARKER in o&&(i=!0,delete o[R.EXT_STYLE_MARKER]);for(const[l,c]of Object.entries(o))if(l==="value"&&t==="text")ot(c)||a.push(`${s}.setText(${JSON.stringify(c)})`);else if(l==="style"){const{obj:u,messages:d}=e.options.parseStaticStyle(Le(e.options.platform,e.options.renderer),t,c);if(d&&d.length&&d.forEach(f=>{e.options.onWarn(at(f.text))}),u){const f=Object.keys(u);if(i){const h=Ss(e);a.push(`const ${h} = ${JSON.stringify(f.reduce((g,m)=>(g[m]=u[m].valueCode,g),{}))}`),a.push(`${s}.ext.set('style', ${h})`)}f.forEach(h=>{a.push(`${s}.${u[h].setterCode}`)})}else a.push(`${s}.setAttribute(${JSON.stringify(l)}, ${JSON.stringify(c)})`)}else a.push(`${s}.setAttribute(${JSON.stringify(l)}, ${JSON.stringify(c)})`)}if(r&&r.length>0)for(const i of r){const l=bs(i,e);if(l)a.push(e.genAppendChild(s,l));else{const c=qt(i,e);a.push(...c.statements),a.push(e.genAppendChild(s,c.variableName))}}return{variableName:s,statements:a}}function bs(t,e){switch(t.type){case J.TEXT:return!(e.feature&1)||ot(t.content)?e.genCreateTag("text"):null;case J.COMMENT:return e.genCreateTag("comment",JSON.stringify(t.content||R.EMPTY_STRING));case J.ELEMENT:const n=t;return Os(n)?e.genCreateTag(n.tag):null;default:return e.genCreateTag("comment",JSON.stringify(R.UNKNOWN_COMMENT))}}function Os(t){return!(!rt(t.attrs)||t.children&&t.children.length>0)}function As(t,e,n){try{if(!t||typeof t!="string")return Me(e,n);const r=new lt(t).parse();return r.length===0?Me(e,n):r.length===1?ws(r[0],e,n):Me(e,n)}catch{return Me(e,n)}}function Me(t,e){const{paramType:n,returnType:r}=Xt(e);return[`const ${de.FACTORY}${t} = (${n})${r} => {`,E,`  return ${e.genCreateTag("text",JSON.stringify(R.EMPTY_STRING))}`,E,"}"]}function ws(t,e,n){const{paramType:r,returnType:s}=Xt(n),a=Ms(t,n);if(a)return[`const ${de.FACTORY}${e} = (${r})${s} => {`,E,`  return ${a}`,E,"}"];const o=Ns(t,n),i=[`const ${de.FACTORY}${e} = (${r})${s} => {`,E];for(const l of o.statements)typeof l=="string"?i.push(`  ${l}`,E):i.push(l,E);return i.push(`  return ${o.variableName}`,E,"}"),i}function Ms(t,e){switch(t.type){case J.TEXT:return e.genCreateTag("text");case J.COMMENT:return e.genCreateTag("comment",JSON.stringify(t.content||R.EMPTY_STRING));case J.ELEMENT:const n=t;return ks(n)?e.genCreateTag(n.tag):null;default:return e.genCreateTag("comment",JSON.stringify(R.UNKNOWN_COMMENT))}}function ks(t){return rt(t.attrs)?t.tag===J.TEXT?!nt(t.children):!t.children||t.children.length===0:!1}function Vs(t,e){const n=[];for(let r=0;r<t.length;r++){const s=As(t[r],r,e);n.push(E,...s)}return n}function Rs(t,e,n){const{helper:r,options:s}=n,a=[];for(let o=0;o<t.length;o++){const i=o===e?", true":"";a.push(`const ${de.TEMPLATE}${o} = ${r(`${s.renderer}Factory`)}(${n.factoryVar}, ${de.FACTORY}${o}${i})`),o<t.length-1&&a.push(E)}return a}function Ps(t,e,n){return Vs(t,n)}function it(t,e){const[n,r]=U(),{id:s,template:a,operation:o}=t;return s!==void 0&&a!==void 0&&(r(E,`const n${s} = t${a}()`),r(...ze(s,e))),o&&r(...Kt(o,e)),n}function Qt(t,e,n,r=`n${t.id}`){const{helper:s}=e,[a,o]=U(),{children:i}=t;let l=0,c;const u=[];for(const[d,f]of i.entries()){f.flags&2&&l--;const h=f.flags&1?f.flags&4?f.anchor:f.id:void 0;if(h===void 0&&!f.hasDynamicChild){o(...it(f,e));continue}const g=Number(d)+l,m=h===void 0?`p${e.block.tempId++}`:`n${h}`;if(n(E,`const ${m} = `),c)g-c[1]===1?n(...b(s(`next${e.helperType}`),c[0])):n(...b(s(`nthChild${e.helperType}`),r,String(g)));else if(g===0)n(...b(s(`child${e.helperType}`),r));else{let N=b(s(`child${e.helperType}`),r);g===1?N=b(s(`next${e.helperType}`),N):g>1&&(N=b(s(`nthChild${e.helperType}`),r,String(g))),n(...N)}h===f.anchor&&o(...it(f,e)),h!==void 0&&o(...ze(h,e)),c=[m,g],u.push([f,m])}if(u.length)for(const[d,f]of u)o(...Qt(d,e,n,f));return a}function ke(t,e,n=[],r){return["(",...n,") => {",Q,...Ve(t,e),ee,E,"}"]}function Ve(t,e,n,r){const[s,a]=U(),{dynamic:o,effect:i,operation:l,returns:c}=t,u=e.enterBlock(t);for(const h of o.children)a(...it(h,e));for(const h of o.children)a(...Qt(h,e,a,`n${h.id}`));a(...Bt(l,e)),a(...ms(i.filter(h=>!h.generated),e,r)),a(E,"return ");const d=c.map(h=>`n${h}`),f=d.length>1?[...K(Ce,...d),` as Uni${e.helperType}Block[]`]:[d[0]||"null"];return a(...f),u(),s}const Ls=63,Fs=0;function Ws(t){return!1}const Js=["class","id"];function js(t){return t==="style"?!1:Js.includes(t)||!0}class Us extends yt{constructor(e,n){super(),this.ir=e,this.helpers=new Set([]),this.helper=a=>(this.helpers.add(a),`_${a}`),this.delegates=new Set,this.identifiers=Object.create(null),this.seenInlineHandlerNames=Object.create(null),this.scopeLevel=0,this.sharedDataIdent=a=>(this.effectSharedDataIdentifiers.add(a),`${this.sharedDataVar}.get_${a}(__reactivity)`),this.templateVariableCounter=0,this.templateStyleCounter=0,this.effectSharedDataIdentifiers=new Set;const r={root:"",mode:"module",platform:"app-harmony",renderer:"element",prefixIdentifiers:!0,sourceMap:!1,filename:"template.vue.html",scopeId:null,runtimeGlobalName:"Vue",runtimeModuleName:"vue",ssrRuntimeModuleName:"vue/server-renderer",ssr:!1,isTS:!1,inSSR:!1,inline:!1,bindingMetadata:{},expressionPlugins:[],componentType:"page",className:"",parseStaticStyle:(a,o,i)=>({obj:{},messages:[]}),isIgnoreAttr:()=>!1,onError:y.defaultOnError,onWarn:y.defaultOnWarn};this.options=T.extend(r,n),this.block=e.block;const s=this.options.renderer==="nativeView";this.genCreateTag=s?this.genCreateNativeView:this.genCreateElement,this.genAppendChild=s?this.genAppendChildNativeView:this.genAppendChildElement}withId(e,n){const{identifiers:r}=this,s=Object.keys(n);for(const o of s)r[o]||(r[o]=[]),r[o].unshift(n[o]||o);const a=e();return s.forEach(o=>T.remove(r[o],n[o]||o)),a}enterBlock(e){const n=this.block;return this.block=e,()=>this.block=n}enterScope(){return[this.scopeLevel++,()=>this.scopeLevel--]}get factoryVar(){return"__page"}get helperType(){return this.options.renderer==="nativeView"?"NativeView":"Element"}get sharedDataVForClass(){return`${this.options.className}SharedData_VFor${this.vForCount}`}get feature(){return this.options.renderer==="nativeView"?Fs:Ls}resetTemplateCounters(){this.templateVariableCounter=0,this.templateStyleCounter=0}withEffect(e){this.effectSharedDataIdentifiers.clear();const n=e();if(this.effectSharedDataIdentifiers.size){const[r,s]=U();return s(E),s(`if(${Gs(this)}) {`),s(E),s(Q),s(...n),s(ee),s(E),s("}"),this.effectSharedDataIdentifiers.clear(),r}return n}genCreateNativeView(e,n,r){const s=[];n&&e!=="text"&&s.push(n),r?s.push("true"):s.push("false");const a=s.join(", ");switch(e){case"view":return`page.createNativeView(${a})`;case"text":return`page.createNativeTextView(${a})`;case"image":return`page.createNativeImageView(${a})`;case"scroll-view":return`page.createNativeScrollView(${a})`;case"native-view":return`page.createNativeCustomView(${a})`;default:throw new Error(`Invalid tag: ${e}`)}}genCreateElement(e,n,r){const s=[];n&&e!=="comment"&&s.push(n),r?s.push("true"):e!=="comment"&&s.push("false");const a=s.join(", ");switch(e){case"view":return`page.createViewElement(${a})`;case"text":return`page.createTextElement(${a})`;case"image":return`page.createImageElement(${a})`;case"comment":return`page.createComment(${a||'""'})`;case"scroll-view":return`page.createScrollViewElement(${a})`;default:return console.log(`Invalid tag: ${e}`),"page.createViewElement(false)"}}genAppendChildNativeView(e,n){return`${this.helper("appendNativeViewChild")}(${e}, ${n})`}genAppendChildElement(e,n){return`${e}.appendChild(${n})`}}function en(t,e){var n;e.renderer=(n=e.renderer)!=null?n:"element",e.isIgnoreAttr=e.renderer==="element"?Ws:js;const[r,s]=U(),a=new Us(t,e),{helpers:o}=a,i="render"+T.capitalize(e.renderer),l=[`__sharedData: ${e.className}SharedData`,"__page: UniPage","__reactivity: VueReactivity"].join(", ");s(E,`export function ${i}(${l}): Uni${a.helperType}Block {`),s(Q);const c=Ps(t.template,t.rootTemplateIndex,a);if(s(...c),t.template.length>0){const m=Rs(t.template,t.rootTemplateIndex,a);s(E,...m)}s(...Ve(t.block,a)),s(ee,E),s("}");const u=Bs(a),d=Ks(a)+u,f=[...d].filter(m=>m===`
`).length;f&&r.unshift(...new Array(f).fill(Lt));let[h,g]=vr(r,a);return h=d+h,{code:h,ast:t,preamble:d,map:g&&g.toJSON(),helpers:o}}function Bs({delegates:t,helper:e}){return t.size?b(e("delegateEvents"),...Array.from(t).map(n=>`"${n}"`)).join("")+`
`:""}function Ks({helpers:t,helper:e,options:n}){let r="";return["getRestElement","getDefaultValue"].forEach(s=>{t.delete(s)}),t.size&&(r+=`import { ${[...t].map(s=>`${s} as _${s}`).join(", ")} } from '${n.runtimeModuleName}';
`),r}const Ys=new _e(2e3);function Gs(t){return Array.from(t.effectSharedDataIdentifiers).map(e=>Hs(e,t)).join(" || ")}function Hs(t,e){const{index:n,bitValue:r}=Ys.getGroupInfo(t);return`${e.sharedDataVar}._flag${n} & ${r}`}function zs(t,e){const n=qs(e),r=T.isString(t)?p.parse(t,n):t,[s,a]=Xs(),{expressionPlugins:o}=e;(!o||!o.includes("typescript"))&&(n.expressionPlugins=[...o||[],"typescript"]);const i=p.transform(r,T.extend({checkStaticStyle:Zs(e)},n,{nodeTransforms:[...s,...e.nodeTransforms||[]],directiveTransforms:T.extend({},a,e.directiveTransforms||{})}));xn(i,{platform:e.platform,bindingMetadata:e.bindingMetadata||T.EMPTY_OBJ});const l=Sr(i,n),c=en(i,{...n,renderer:"nativeView"}),u=en(i,{...n,renderer:"element"});return e.emitElement&&e.emitElement(u),e.emitNativeView&&e.emitNativeView(c),{...l,sharedData:l,nativeView:c,element:u}}function Xs(){return p.getBaseTransformPreset()}function qs(t){const e=T.extend({},t);if(e.parseStaticStyle){const n=e.parseStaticStyle,r=new Map;e.parseStaticStyle=(s,a,o)=>{const i=`${s}-${a}-${o}`;if(r.has(i))return r.get(i);const l=n(s,a,o);return r.set(i,l),l}}return e}function Zs(t){const e=t.parseStaticStyle,n=Le(t.platform,"element"),r=Le(t.platform,"nativeView");return(s,a,o)=>{const{messages:i}=e(n,s.tag,a),{messages:l}=e(r,s.tag,a);i.forEach(c=>{o.onWarn(at(c.text,s.loc))}),l.forEach(c=>{i.some(u=>u.text===c.text)||o.onWarn(at(c.text,s.loc))})}}function $e(t){return t.text||t.escapedText}function Qs(t){return t.name?$e(t.name):""}function ea(t,e){var n;const r=t.heritageClauses;if(!r)return"";const s=r.find(o=>o.token===e.SyntaxKind.ExtendsKeyword),a=(n=s==null?void 0:s.types[0])==null?void 0:n.expression;return!a||!e.isIdentifier(a)?"":$e(a)}function Se(t,e){return t.kind===e.SyntaxKind.StringKeyword||t.kind===e.SyntaxKind.BooleanKeyword||t.kind===e.SyntaxKind.NumberKeyword||t.kind===e.SyntaxKind.UndefinedKeyword}function ta(t,e){if(!e.isPropertyDeclaration(t)||t.modifiers&&t.modifiers.length>0&&t.modifiers.some(i=>i.kind===e.SyntaxKind.ReadonlyKeyword)||!t.type)return;const n=t.name;if(!e.isIdentifier(n))return;const r=$e(n),s=t.type;if(!e.isUnionTypeNode(s))return!e.isTypeReferenceNode(s)&&!Se(s,e)&&!e.isLiteralTypeNode(s)&&!e.isArrayTypeNode(s)?void 0:{memberName:r,type:s,optional:!!t.questionToken};const a=s.types.filter(i=>i.kind!==e.SyntaxKind.UndefinedKeyword&&!(e.isLiteralTypeNode(i)&&i.literal.kind===e.SyntaxKind.NullKeyword));if(a.length!==1)return;const o=a[0];if(!(!e.isTypeReferenceNode(o)&&!Se(o,e)&&!e.isLiteralTypeNode(o)))return{memberName:r,type:o,optional:!0}}function fe(t=1,e=2){return" ".repeat(e*t)}function tn(t,e){return t.split(`
`).map(n=>fe(e)+n).join(`
`)}const nn="ARRAY_STRING",na=new _e(2e3);function ra(t,e){if(e.isTypeReferenceNode(t)&&e.isIdentifier(t.typeName))switch($e(t.typeName)){case"UniSharedDataAny":return"UniSharedDataAny";case"UniSharedDataArray":return"UniSharedDataArray";case"UniSharedDataJSONObject":return"UniSharedDataJSONObject";case"UniSharedDataVFor":return"UniSharedDataVFor";case"UniSharedDataFunctionEventListener":return"UniSharedDataFunctionEventListener";case"UniSharedDataFunctionSetTemplateRef":return"UniSharedDataFunctionSetTemplateRef";case"UniElementStyles":return"UniElementStyles";case"Array":if(t.typeArguments&&t.typeArguments.length===1&&Se(t.typeArguments[0],e)&&t.typeArguments[0].kind===e.SyntaxKind.StringKeyword)return nn;default:return"UniSharedDataComponent|"+$e(t.typeName)}if(Se(t,e))switch(t.kind){case e.SyntaxKind.StringKeyword:return"string";case e.SyntaxKind.BooleanKeyword:return"bool";case e.SyntaxKind.NumberKeyword:return"double";case e.SyntaxKind.UndefinedKeyword:return"null"}if(e.isArrayTypeNode(t)&&Se(t.elementType,e)&&t.elementType.kind===e.SyntaxKind.StringKeyword)return nn;if(e.isLiteralTypeNode(t)&&t.literal.kind===e.SyntaxKind.NullKeyword)return"null"}function sa(t,e){const n=e.ts,r=t.name,s={files:[]};if(!r)return s;const a=Qs(t);if(!a)return s;const o=ea(t,n);if(!o)return s;const i=o==="UniSharedDataPage",l=o==="UniSharedDataComponent",c=i?"DEFINE_USER_PAGE_SHARED_DATA":l?"DEFINE_USER_COMPONENT_SHARED_DATA":"DEFINE_USER_SHARED_DATA",u="DEFINE_SHARED_DATA",d=u+"_MEMBER",f="DEFINE_SHARED_DATA_MEMBER_FLAG",h=c+"_CPP",g=h+"_INIT",m=u+"_CPP",N=m+"_INIT_MEMBER",O=m+"_MEMBER_SETTER",v=t.members;let A="",V="",P=`${c}(${a},
`,I=`${h}(${a},
`,j=fe(1)+`${g}(${a},
`,Y="",ce=new Set;for(let G=0;G<v.length;G++){const B=v[G],te=ta(B,n);if(!te)continue;const pe=te.optional,F=te.memberName,he=te.type,X=ra(he,n),{index:ne,bitValue:me}=na.getGroupInfo(F),ge="_flag"+ne;if(ce.add(ge),!X)continue;let[$,S]=X.split("|"),_=`${d}_${$.toUpperCase()}`,x=`${O}_${$.toUpperCase()}`;(pe||$==="UniSharedDataAny")&&$!=="null"&&(_+="_OR_NULL",x+="_OR_NULL"),A+=fe(1)+`${_}(${F}`,j+=fe(2)+`${N}(${F})
`,Y+=fe(1)+`${x}(${a}, ${F}`,A+=`)
`,Y+=`, ${ge}, ${me})
`}return V=Array.from(ce).map(G=>fe(1)+`${f}(${G})
`).join("")+`
`,j+=fe(1)+`)
`,P+=V+A+")",I+=j+Y+")",(i||l)&&(I=`namespace {
${tn(`inline ${e.renderElementCode}`,1)}
${tn(`inline ${e.renderNativeViewCode}`,1)}
}
${I}`),{files:[{code:P,name:`${a}.h`,class:a},{code:I,name:`${a}.cpp`,class:a}],groupName:l||i?a:void 0}}function rn(t,e){return e.targetLanguage==="cpp"?sa(t,e):{files:[]}}function aa(t,e){const n=t.map(o=>rn(o,e)),r={name:".cpp",code:"",classes:[]},s={name:".h",code:"",classes:[]};let a="";return n.forEach(o=>{o.groupName&&(a=o.groupName),o.files.forEach(i=>{i.name.endsWith(".h")?(s.code+=(s.code?`

`:"")+i.code,s.classes.push(i.class)):i.name.endsWith(".cpp")&&(r.code+=(r.code?`

`:"")+i.code,r.classes.push(i.class))})}),a&&(s.name=`${a}.h`,r.name=`${a}.cpp`,s.code=`#pragma once
#include "sdk.h"

${s.code}`,r.code=`#include "${s.name}"

${r.code}`),{files:[r,s]}}exports.parse=y.parse,exports.COMPONENT_TYPE=On,exports.DOM2_APP_PLATFORM=Et,exports.RENDERER_TYPE=Cn,exports.TARGET_LANGUAGE=bn,exports.TARGET_PLATFORM=Et,exports.compile=zs,exports.genSharedData=aa,exports.genSharedDataClass=rn;
