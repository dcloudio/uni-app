"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var $=require("@vue/compiler-dom"),f=require("@vue/compiler-vapor"),E=require("@vue/shared"),$e=require("@babel/parser"),En=require("@babel/types"),dt=require("estree-walker"),$n=require("tinycolor2"),Sn=require("source-map-js");function Fa(t,e){}function Wa(t,e){}function Nn(t,e=[]){const n=t.ast||t._fastPathAst;if(n)return De(n);if(t.isStatic)return!0;if(t.ast===null)try{return t._fastPathAst=$e.parseExpression(t.content,{plugins:e}),De(t._fastPathAst)}catch{}return!1}function De(t){switch(t=$.unwrapTSNode(t),t.type){case"UnaryExpression":return t.operator==="void"?!1:De(t.argument);case"ParenthesizedExpression":return De(t.expression);case"StringLiteral":case"NumericLiteral":case"BooleanLiteral":case"NullLiteral":case"BigIntLiteral":return!0}return!1}function _e(t){try{return!!new Function(`return ${t.content}`)()}catch{}return null}function ft(t){try{const e=new Function(`return ${t.content}`)();return typeof e=="string"?e:null}catch{}return null}function vn(t,e){W(t.key,e),t.values.length>1&&["class","style"].includes(t.key.content)?t.sharedData={ident:e.nextIdent()}:ht(t.values,e)}function ht(t,e,n=!1,r=!1){t.forEach(s=>{W(s,e,n,r)})}function W(t,e,n=!1,r=!1){(n||!Nn(t))&&(t.sharedData={ident:e.nextIdent()})}function Tn(t,e){t.delegate=!1,W(t.key,e),t.sharedData={ident:e.nextIdent()}}function Dn(t,e){W(t.event,e,!0)}function _n(t,e){W(t.source,e,!0);const n=e.enterIdent();t.keyProp&&W(t.keyProp,e,!0),Fe(t.render,e),n()}function In(t,e){W(t.value,e)}function mt(t,e){const{condition:n,positive:r,negative:s}=t;_e(n)===null&&W(n,e,!0),ie(r,e),s&&(s.type===1?ie(s,e):mt(s,e))}function xn(t,e){vn(t.prop,e)}function bn(t,e){t.sharedData={ident:e.nextIdent()}}function Cn({node:t,value:e},n){t.tagType===0&&W(e,n,!0)}function ja(t,e){}function wn(t,e){ht(t.values,e,!1,!0)}function Ua(t,e){}function Pn(t,e){t.sharedData={ident:e.nextIdent()},t.slots.forEach(n=>{switch(n.slotType){case 0:Object.keys(n.slots).forEach(s=>{ie(n.slots[s],e)});break;case 1:ft(n.name)||(n.name.sharedData={ident:e.nextIdent()}),ie(n.fn,e);break;case 2:W(n.loop.source,e);const r=e.enterIdent();ft(n.name)||(n.name.sharedData={ident:e.nextIdent()}),ie(n.fn,e),r();break;case 3:gt(n,e);break}})}function gt(t,e){_e(t.condition)===null&&W(t.condition,e,!0),ie(t.positive.fn,e),t.negative&&(t.negative.slotType===3?gt(t.negative,e):ie(t.negative.fn,e))}function On(t,e){const{fallback:n,name:r}=t;W(r,e),n&&ie(n,e)}function An({dir:{exp:t}},e){t&&W(t,e)}function kn({dir:t},e){const n=t.exp;W(n,e,!0),n.sharedData.vModel={eventIdent:e.nextIdent()}}function Mn(t,e){switch(t.name){case"show":return An(t,e);case"model":return kn(t,e)}}function yt(t,e){for(const n of t)Et(n,e)}function Et(t,e){Vn(t,e)}function Vn(t,e){switch(t.type){case 2:return xn(t,e);case 3:return bn(t,e);case 4:return wn(t,e);case 5:return Tn(t,e);case 6:return Dn(t,e);case 7:return In(t,e);case 8:return Cn(t,e);case 9:return void 0;case 10:return void 0;case 15:return mt(t,e);case 16:return _n(t,e);case 11:return Pn(t,e);case 14:return void 0;case 12:return On(t,e);case 13:return Mn(t,e);case 17:return void 0;default:const n=t;throw new Error(`Unhandled operation type in genOperation: ${n}`)}}function Rn(t,e){for(const n of t)Ln(n,e)}function Ln({operations:t},e){yt(t,e)}function Le(t,e){const{operation:n}=t;n&&Et(n,e)}function $t(t,e){const{children:n}=t;let r=0;const s=[];for(const[,a]of n.entries()){a.flags&2&&r--;const o=a.flags&1?a.flags&4?a.anchor:a.id:void 0;if(o===void 0&&!a.hasDynamicChild){Le(a,e);continue}o===a.anchor&&Le(a,e),s.push(a)}for(const a of s)$t(a,e)}function ie(t,e){Fe(t,e)}function Fe(t,e){const{dynamic:n,effect:r,operation:s}=t,a=e.enterBlock(t);for(const o of n.children)Le(o,e);for(const o of n.children)$t(o,e);yt(s,e),Rn(r,e),a()}class Ie{constructor(e=1e3,n=30){if(this._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",this._nextIds=[0],this._generated=[],this._currentIndex=0,e<0)throw new Error("\u9884\u751F\u6210\u6570\u91CF\u4E0D\u80FD\u4E3A\u8D1F\u6570");this._groupSize=n,e>0&&this._pregenerate(e)}_generateId(){const e=[];for(const n of this._nextIds)e.unshift(this._chars[n]);return e.join("")}_generateNextValidId(){let e;do e=this._generateId(),this._increment();while(Fn.has(e));return e}_pregenerate(e){this._generated=new Array(e);for(let n=0;n<e;n++)this._generated[n]=this._generateNextValidId()}next(){if(this._currentIndex<this._generated.length)return this._generated[this._currentIndex++];const e=this._generateNextValidId();return this._generated.push(e),this._currentIndex++,e}getIndexOf(e){return this._generated.indexOf(e)}getGroupInfo(e){const n=this.getIndexOf(e);return n===-1?null:{index:Math.floor(n/this._groupSize),bitValue:1<<n%this._groupSize}}reset(){this._nextIds=[0],this._generated=[],this._currentIndex=0}get generatedCount(){return this._generated.length}get currentIndex(){return this._currentIndex}get hasPregenerated(){return this._currentIndex<this._generated.length}get generatedList(){return this._generated}_increment(){for(let e=0;e<this._nextIds.length;e++)if(++this._nextIds[e]>=this._chars.length)this._nextIds[e]=0;else return;this._nextIds.push(0)}*[Symbol.iterator](){for(;;)yield this.next()}}const Fn=new Set(["abstract","arguments","await","boolean","break","byte","case","catch","char","class","const","continue","debugger","default","delete","do","double","else","enum","eval","export","extends","false","final","finally","float","for","function","goto","if","implements","import","in","instanceof","int","interface","let","long","native","new","null","package","private","protected","public","return","short","static","super","switch","synchronized","this","throw","throws","transient","true","try","typeof","var","void","volatile","while","with","yield"]);class Wn{constructor(e,n){this._ident=new Ie,this._identCache=new Map,this.ir=e,this.options=n,this.block=e.block,this._identCache.set(this._ident,new Map)}enterBlock(e){const n=this.block;return this.block=e,()=>this.block=n}enterIdent(){const e=this._ident;return this._ident=new Ie,this._identCache.set(this._ident,new Map),()=>this._ident=e}nextIdent(){return this._ident.next()}}function jn(t,e){const n=new Wn(t,e);Fe(t.block,n)}const Un={ELEMENT:"element",NATIVE_VIEW:"nativeView"},St={APP_ANDROID:"app-android",APP_HARMONY:"app-harmony",APP_IOS:"app-ios"};function ce(t,e){switch(t){case"app-harmony":return e==="element"?"dom-c":"nv-c";case"app-android":return e==="element"?"dom-kt":"nv-kt";case"app-ios":return e==="element"?"dom-c":"nv-c"}}function Nt(t){return t==="dom-c"||t==="nv-c"||t==="txt-c"}const Jn={TS:"ts",CPP:"cpp",KOTLIN:"kotlin",SWIFT:"swift"},Bn={APP:"app",PAGE:"page",COMPONENT:"component"};class vt{constructor(){this.vForCount=-1}enterVFor(){return this.vForCount++,this.vForCount}get sharedDataVar(){const{node:e}=this.block;let n=!1;return"__vFor"in e&&(n=e.__vFor),e.__vFor=n=e.type===1&&e.tagType===3&&e.props.some(r=>r.type===7&&r.name==="for"),n?this.sharedDataVForVar:"__sharedData"}get sharedDataVForVar(){return`__sharedData_VFor${this.vForCount}`}get sharedDataVForItemVar(){return`__vForItem${this.vForCount}`}}function Kn({parent:t,elements:e,anchor:n},{helper:r}){let s=e.map(a=>`n${a}`).join(", ");return e.length>1&&(s=`[${s}]`),[f.NEWLINE,...f.genCall(r("insert"),s,`n${t}`,n===void 0?void 0:`n${n}`)]}function Gn(t,{helper:e}){return[f.NEWLINE,...f.genCall(e("prepend"),`n${t.parent}`,...t.elements.map(n=>`n${n}`))]}function _(t,e,n){const{content:r,ast:s,isStatic:a,loc:o}=t;if(a)return[[JSON.stringify(r),-2,o]];if(!t.content.trim()||s===!1||f.isConstantExpression(t))return[[r,-2,o],n&&` = ${n}`];if(s===null)return Tt(r,e,o,n);const i=[],c=new Map,l=[];$.walkIdentifiers(s,p=>{i.push(p),c.set(p,l.slice())},!1,l);let u=!1;if(i.length){const[p,d]=f.buildCodeFragment(),h=s&&$.TS_NODE_TYPES.includes(s.type);return i.sort((m,g)=>m.start-g.start).forEach((m,g)=>{const S=m.start-1,w=m.end-1,D=i[g-1];if(!(h&&g===0)){const I=r.slice(D?D.end-1:0,S);I.length&&d([I,-3])}const P=r.slice(S,w),M=c.get(m),R=M[M.length-1];u||(u=R&&(R.type==="MemberExpression"||R.type==="OptionalMemberExpression")),d(...Tt(P,e,{start:$.advancePositionWithClone(t.loc.start,P,S),end:$.advancePositionWithClone(t.loc.start,P,w),source:P},u?void 0:n,m,R,M)),g===i.length-1&&w<r.length&&!h&&d([r.slice(w),-3])}),n&&u&&d(` = ${n}`),p}else return[[r,-3,o]]}function Tt(t,e,n,r,s,a,o){const{options:i,helper:c,identifiers:l}=e,{inline:u,bindingMetadata:p}=i;let d=t;const h=l[t];if(h&&h.length){const D=h[0];return E.isString(D)?a&&a.type==="ObjectProperty"&&a.shorthand?[[`${d}: ${D}`,-2,n]]:[[D,-2,n]]:_(D,e,r)}let m;$.isStaticProperty(a)&&a.shorthand&&(m=`${t}: `);const g=p&&p[t];if(u)switch(g){case"setup-let":d=t=r?`_isRef(${t}) ? (${t}.value = ${r}) : (${t} = ${r})`:w();break;case"setup-ref":d=t=S(`${t}.value`);break;case"setup-maybe-ref":const D=a&&$.isInDestructureAssignment(a,o||[]),P=a&&a.type==="AssignmentExpression"&&a.left===s,M=a&&a.type==="UpdateExpression"&&a.argument===s;t=P||M||D?d=`${t}.value`:r?`${c("isRef")}(${t}) ? (${t}.value = ${r}) : null`:w();break;case"props":t=E.genPropsAccessExp(t);break;case"props-aliased":t=E.genPropsAccessExp(p.__propsAliases[t]);break;default:t=S(t)}else Yn(t)&&(g==="props-aliased"?t=`$props['${p.__propsAliases[t]}']`:t=`${g==="props"?"$props":"_ctx"}.${t}`),t=S(t);return[m,[t,-2,n,d]];function S(D){return r?`${D} = ${r}`:D}function w(){return`${c("unref")}(${t})`}}function Yn(t){return!(E.isGloballyAllowed(t)||t==="require"||t==="$props"||t==="$emit"||t==="$attrs"||t==="$slots")}function Hn(t,e,n){const{seenVariable:r,variableToExpMap:s,expToVariableMap:a,seenIdentifier:o,updatedVariable:i}=zn(e),c=Xn(t,r,s,a,o,i),l=Zn(t,e,c,i,a);return Qn([...c,...l],t,n)}function zn(t){const e=Object.create(null),n=new Map,r=new Map,s=new Set,a=new Set,o=(i,c,l,u,p=[])=>{l&&s.add(i),e[i]=(e[i]||0)+1,n.set(i,(n.get(i)||new Set).add(c));const d=r.get(c)||[];d.push({name:i,loc:u}),r.set(c,d),p.some(h=>h.type==="UpdateExpression"||h.type==="AssignmentExpression")&&a.add(i)};for(const i of t){if(!i.ast){i.ast===null&&o(i.content,i,!0);continue}$.walkIdentifiers(i.ast,(c,l,u)=>{if(l&&Dt(l)){const p=le(l,d=>{o(d.name,i,!0,{start:d.start,end:d.end})});o(p,i,!1,{start:l.start,end:l.end},u)}else u.some(Dt)||o(c.name,i,!0,{start:c.start,end:c.end},u)})}return{seenVariable:e,seenIdentifier:s,variableToExpMap:n,expToVariableMap:r,updatedVariable:a}}function Xn(t,e,n,r,s,a){const o=[],i=new Map;for(const[c,l]of n)if(!a.has(c)&&e[c]>1&&l.size>0){const u=s.has(c),p=u?c:We(c);l.forEach(d=>{if(d.ast&&p!==c){const h=i.get(d)||[];h.push({name:p,locs:r.get(d).reduce((m,g)=>(g.name===c&&g.loc&&m.push(g.loc),m),[])}),i.set(d,h)}}),!o.some(d=>d.name===p)&&(!u||qn(c,r,l))&&o.push({name:p,isIdentifier:u,value:E.extend({ast:u?null:xe(t,c)},$.createSimpleExpression(c)),rawName:c,exps:l,seenCount:e[c]})}for(const[c,l]of i)l.flatMap(({name:u,locs:p})=>p.map(({start:d,end:h})=>({start:d,end:h,name:u}))).sort((u,p)=>p.end-u.end).forEach(({start:u,end:p,name:d})=>{c.content=c.content.slice(0,u-1)+d+c.content.slice(p-1)}),c.ast=xe(t,c.content);return o}function qn(t,e,n){const r=Array.from(n,a=>e.get(a).map(o=>o.name));if(r.every(a=>a.length===1)||r.some(a=>a.filter(o=>o===t).length>1))return!0;const s=r[0];return r.some(a=>a.length!==s.length)?!(r.some(a=>a.length>s.length&&a.every(o=>s.includes(o)))||r.some(a=>s.length>a.length&&s.every(o=>a.includes(o)))):!r.some(a=>a.some(o=>s.includes(o)))}function Zn(t,e,n,r,s){const a=[],o=e.reduce((i,c)=>{const l=s.get(c).map(u=>u.name);return c.ast&&c.ast.type!=="Identifier"&&!(l&&l.some(u=>r.has(u)))&&(i[c.content]=(i[c.content]||0)+1),i},Object.create(null));return Object.entries(o).forEach(([i,c])=>{if(c>1){const l=We(i);if(!a.some(u=>u.name===l)){const u={};for(let d=n.length-1;d>=0;d--){const h=n[d];!h.exps||!h.seenCount||[...h.exps].every(m=>m.content===i&&h.seenCount===c)&&(u[h.name]=h.rawName,n.splice(d,1))}const p=E.extend({},e.find(d=>d.content===i));Object.keys(u).forEach(d=>{p.content=p.content.replace(d,u[d]),p.ast&&(p.ast=xe(t,p.content))}),a.push({name:l,value:p})}e.forEach(u=>{u.content===i?(u.content=l,u.ast=null):u.content.includes(i)&&(u.content=u.content.replace(new RegExp(er(i),"g"),l),u.ast=xe(t,u.content))})}}),a}function Qn(t,e,n){const[r,s]=f.buildCodeFragment(),a=Object.create(null),o=new Set;return t.forEach(({name:i,isIdentifier:c,value:l})=>{if(c){const u=a[i]=`_${i}`;o.add(u),n&&s("const "),s(`${u} = `,..._(l,e),f.NEWLINE)}}),t.forEach(({name:i,isIdentifier:c,value:l})=>{if(!c){const u=a[i]=`_${i}`;o.add(u),n&&s("const "),s(`${u} = `,...e.withId(()=>_(l,e),a),f.NEWLINE)}}),{ids:a,frag:r,varNames:[...o]}}function er(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function xe(t,e){const n=t.options.expressionPlugins,r={plugins:n?[...n,"typescript"]:["typescript"]};return $e.parseExpression(`(${e})`,r)}function We(t){return`${t.replace(/[^a-zA-Z0-9]/g,"_").replace(/_+/g,"_").replace(/_+$/,"")}`}function le(t,e){if(!t)return"";switch(t.type){case"Identifier":return e(t),t.name;case"StringLiteral":return t.extra?t.extra.raw:t.value;case"NumericLiteral":return t.value.toString();case"BinaryExpression":return`${le(t.left,e)} ${t.operator} ${le(t.right,e)}`;case"CallExpression":return`${le(t.callee,e)}(${t.arguments.map(s=>le(s,e)).join(", ")})`;case"MemberExpression":case"OptionalMemberExpression":const n=le(t.object,e),r=t.computed?`[${le(t.property,e)}]`:`.${le(t.property,E.NOOP)}`;return`${n}${r}`;default:return""}}const Dt=t=>t.type==="MemberExpression"||t.type==="OptionalMemberExpression";function _t(t,e,n,r){return t.sharedData?f.genCall(e.helper("setSharedData"),e.sharedDataVar,JSON.stringify(t.sharedData.ident),n?f.genCall(n,_(t,e)):_(t,e)):_(t,e)}function tr(t,e){const{key:n,keyOverride:r,value:s,modifiers:a,sharedData:o}=t,i=je(e,s,a);return[f.NEWLINE,...n.sharedData?f.genCall(e.helper("setSharedData"),e.sharedDataVar,JSON.stringify(n.sharedData.ident),c()).concat(f.NEWLINE):[],...f.genCall(e.helper("setSharedDataEvent"),e.sharedDataVar,JSON.stringify(o.ident),i)];function c(){const l=_(n,e);if(r){const u=JSON.stringify(r[0]),p=JSON.stringify(r[1]),d=["(",...l,")"];return[...d,` === ${u} ? ${p} : `,...d]}else return _(n,e)}}function nr(t,e){return[f.NEWLINE,...f.genCall(e.helper("setSharedDataDynamicEvents"),e.sharedDataVar,JSON.stringify(t.event.sharedData.ident),_(t.event,e))]}function je(t,e,n={nonKeys:[],keys:[]},r=!1){let s=["() => {}"];if(e&&e.content.trim())if($.isMemberExpression(e,t.options))s=_(e,t),!rr(e,t)&&!r&&(e.ast&&e.ast.type==="TSAsExpression"?s=["(e: any) => (",e.content,")(e)"]:s=["(e: any) => ",...s,"(e)"]);else if($.isFnExpression(e,t.options))s=_(e,t);else{const a=e.content.includes("$event"),o=e.content.includes(";"),i=a?t.withId(()=>_(e,t),{$event:null}):_(e,t);s=[a?"($event: any) => ":"() => ",o?"{":"(",...i,o?"}":")"]}return r&&s.unshift("() => "),s}function rr(t,e){if(t.ast===null&&e.options.bindingMetadata[t.content]==="setup-const")return!0}function sr(t,e){const{helper:n}=e,{source:r,value:s,key:a,index:o,render:i,keyProp:c,once:l,id:u,component:p,onlyChild:d}=t,h=e.sharedDataVar;let m=null;const g=a&&a.content,S=o&&o.content,w=["() => (",..._(r,e),")"],D=re(),P=e.enterVFor(),[M,R]=e.enterScope(),I={},J=`_for_item${P}`;I[J]=null,D.forEach((N,v)=>{let T=`${J}.value${N?N.path:""}`;if(N)if(N.helper&&(I[N.helper]=null,T=`${N.helper}(${T}, ${N.helperArgs})`),N.dynamic){const x=I[v]=$.createSimpleExpression(T),L=e.options.expressionPlugins;x.ast=$e.parseExpression(`(${T})`,{plugins:L?[...L,"typescript"]:["typescript"]})}else I[v]=T;else I[v]=T});const G=[e.sharedDataVForVar,", ",J];if(g){const N=`_for_key${P}`;G.push(`, ${N}`),I[g]=`${N}.value`,I[N]=null}if(S){const N=`_for_index${P}`;G.push(`, ${N}`),I[S]=`${N}.value`,I[N]=null}const pe=f.genCall(n("setSharedData"),h,JSON.stringify(r.sharedData.ident),bt(e)),Y=Ee(c,e,e.sharedDataVForVar),{selectorPatterns:B,keyOnlyBindingPatterns:ne}=It(i,c,I),he=[],F=[];for(let N=0;N<B.length;N++){const{selector:v}=B[N],T=`_selector${u}_${N}`;he.push(`let ${T}: (oper: () => void) => void`,f.NEWLINE),N===0&&F.push("({ createSelector }) => {",f.INDENT_START),F.push(f.NEWLINE,`${T} = `,...f.genCall("createSelector",["() => ",..._(v,e)])),N===B.length-1&&F.push(f.INDENT_END,f.NEWLINE,"}")}const me=e.withId(()=>{const N=[];return N.push("(",...G,") => {",f.INDENT_START),B.length||ne.length?N.push(...we(i,e,!1,()=>{const v=[];for(let T=0;T<B.length;T++){const{effect:x}=B[T];v.push(f.NEWLINE,`_selector${u}_${T}(() => {`,f.INDENT_START);for(const L of x.operations)v.push(...Ye(L,e));v.push(f.INDENT_END,f.NEWLINE,"})")}for(const{effect:T}of ne)for(const x of T.operations)v.push(...Ye(x,e));return v})):N.push(...we(i,e)),N.push(f.INDENT_END,f.NEWLINE,"}"),N},I);R();let X=0;return d&&(X|=1),p&&(X|=2),l&&(X|=4),[f.NEWLINE,...he,...f.genCall([n("createSharedDataFor"),"undefined"],pe,w,me,Y,X?String(X):void 0,F.length?F:void 0)];function re(){const N=new Map;return s&&(m=s&&s.content,s.ast?$.walkIdentifiers(s.ast,(v,T,x,L,se)=>{if(se){let q="",H=!1,ae,de;for(let oe=0;oe<x.length;oe++){const A=x[oe],O=x[oe+1]||v;if(A.type==="ObjectProperty"&&A.value===O)A.key.type==="StringLiteral"?q+=`[${JSON.stringify(A.key.value)}]`:A.computed?(H=!0,q+=`[${s.content.slice(A.key.start-1,A.key.end-1)}]`):q+=`.${A.key.name}`;else if(A.type==="ArrayPattern"){const k=A.elements.indexOf(O);O.type==="RestElement"?q+=`.slice(${k})`:q+=`[${k}]`}else A.type==="ObjectPattern"&&O.type==="RestElement"&&(ae=e.helper("getSharedDataRestElement"),de="["+A.properties.filter(k=>k.type==="ObjectProperty").map(k=>k.key.type==="StringLiteral"?JSON.stringify(k.key.value):k.computed?(H=!0,s.content.slice(k.key.start-1,k.key.end-1)):JSON.stringify(k.key.name)).join(", ")+"]");O.type==="AssignmentPattern"&&(A.type==="ObjectProperty"||A.type==="ArrayPattern")&&(H=!0,ae=e.helper("getSharedDataDefaultValue"),de=s.content.slice(O.right.start-1,O.right.end-1))}N.set(v.name,{path:q,dynamic:H,helper:ae,helperArgs:de})}},!0):N.set(m,null)),N}function Ee(N,v,T){if(!N)return!1;const x=v.withId(()=>f.genCall(v.helper("setSharedData"),T,JSON.stringify(N.sharedData.ident),_(N,v)),ge());return[...f.genMulti(["(",")",", "],T,m||(g||S?"_":void 0),g||(S?"__":void 0),S)," => (",...x,")"]}function ge(){const N={};return g&&(N[g]=null),S&&(N[S]=null),D.forEach((v,T)=>N[T]=null),N}}function It(t,e,n){const r=[],s=[];return t.effect.forEach(a=>{if(e!==void 0){const o=or(a,e.ast,n);o&&(r.push(o),a.generated=!0);const i=ar(a,e.ast);i&&(s.push(i),a.generated=!0)}}),{keyOnlyBindingPatterns:s,selectorPatterns:r}}function ar(t,e){if(t.expressions.length===1){const n=t.expressions[0].ast;if(typeof n=="object"&&n!==null&&Se(n,e))return{effect:t}}}function or(t,e,n){if(t.expressions.length===1){const r=t.expressions[0].ast;if(typeof r=="object"&&r){const a=[];if(dt.walk(r,{enter(o){if(typeof o=="object"&&o&&o.type==="BinaryExpression"&&o.operator==="==="&&o.left.type!=="PrivateName"){const{left:i,right:c}=o;for(const[l,u]of[[i,c],[c,i]]){const p=Se(l,e),d=Se(u,e),h=xt(u,n);p&&!d&&!h.locals.length&&a.push([l,u])}}}}),a.length===1){const[o,i]=a[0],c=t.expressions[0].content;let l=!1;const u=new Map,p=[];if($.walkIdentifiers(r,d=>{d.start!==o.start&&d.start!==i.start&&(l=!0),u.set(d,p.slice())},!1,p),!l){const d=c.slice(i.start-1,i.end-1);return{effect:t,selector:{content:d,ast:E.extend({},i,{start:1,end:d.length+1}),loc:i.loc,isStatic:!1}}}}}const s=t.expressions[0].content;if(typeof r=="object"&&r&&r.type==="ConditionalExpression"&&r.test.type==="BinaryExpression"&&r.test.operator==="==="&&r.test.left.type!=="PrivateName"&&$.isStaticNode(r.consequent)&&$.isStaticNode(r.alternate)){const a=r.test.left,o=r.test.right;for(const[i,c]of[[a,o],[o,a]]){const l=Se(i,e),u=Se(c,e),p=xt(c,n);if(l&&!u&&!p.locals.length)return{effect:t,selector:{content:s.slice(c.start-1,c.end-1),ast:c,loc:c.loc,isStatic:!1}}}}}}function xt(t,e){let n=[],r=[];const s=[],a=new Map,o=[];$.walkIdentifiers(t,i=>{s.push(i),a.set(i,o.slice())},!1,o);for(const i of s)E.isGloballyAllowed(i.name)||(e[i.name]?r.push(i.name):n.push(i.name));return{globals:n,locals:r}}function Se(t,e){let n=!0;return dt.walk(t,{enter(r){if(En.isNodesEquivalent(r,e)){this.skip();return}r.type==="Identifier"&&(n=!1)}}),n}function bt(t){return`${t.helper("createSharedDataVFor")}(${t.sharedDataScopeVar}, () => useSharedData<\`${t.sharedDataVForClassType}\`>(${t.sharedDataScopeVar}))`}function ir(t,e){var n;const{helper:r}=e,{value:s}=t;return[f.NEWLINE,...(n=s.sharedData)!=null&&n.ident?f.genCall(r("setSharedData"),e.sharedDataVar,JSON.stringify(s.sharedData.ident),_(s,e)):[]]}function Ct(t,e,n=!1){const{helper:r}=e,{condition:s,positive:a,negative:o,once:i}=t,[c,l]=f.buildCodeFragment(),u=["() => ",...wt(s,e),""];let p=Ce(a,e),d=!1;return o&&(o.type===1?d=Ce(o,e):d=["() => ",...Ct(o,e,!0)]),n||l(f.NEWLINE),l(...f.genCall(r("createSharedDataIf"),u,p,d,i&&"true")),c}function wt(t,e){return t.sharedData?f.genCall(e.helper("setSharedData"),e.sharedDataVar,JSON.stringify(t.sharedData.ident),f.genCall(e.helper("toSharedDataBoolean"),_(t,e))):[JSON.stringify(_e(t))]}const Z={setText:{name:"setText"},setHtml:{name:"setHtml"},setClass:{name:"setClass"},setStyle:{name:"setStyle"},setValue:{name:"setValue"},setAttr:{name:"setAttr",needKey:!0},setProp:{name:"setProp",needKey:!0},setDOMProp:{name:"setDOMProp",needKey:!0}};function cr(t,e){const{prop:{key:n,values:r,modifier:s,sharedData:a},tag:o}=t,i=pr(o,n.content,s),c=e.getPropertyType(o,n.content),[l,u]=f.buildCodeFragment();return a?(u(f.NEWLINE,...f.genCall(e.helper(Ue(i.name)),e.sharedDataVar,JSON.stringify(a.ident),Pt(c,o,n.content,be(r,e),e))),l):(r.filter(p=>{var d;return(d=p.sharedData)==null?void 0:d.ident}).forEach(p=>{u(f.NEWLINE,...f.genCall(e.helper(Ue(i.name)),e.sharedDataVar,JSON.stringify(p.sharedData.ident),Pt(c,o,n.content,be([p],e),e)))}),l)}function Pt(t,e,n,r,s){return!t||t==="Array<string>"?r:t==="enum"?lr(e,n,r,s):f.genCall(s.helper(`toSharedData${E.capitalize(t)}`),r)}function lr(t,e,n,r){return f.genCall(r.helper(`toSharedData${E.capitalize(E.camelize(t))}${E.capitalize(E.camelize(e))}`),n)}function ur(t,e){const{helper:n}=e,r=t.props.map(s=>Array.isArray(s)?Ot(s,e):s.kind===1?Ot([s],e):_(s.value,e));return[f.NEWLINE,...f.genCall(n(Ue("setDynamicProps")),e.sharedDataVar,JSON.stringify(t.sharedData.ident),f.genMulti(f.DELIMITERS_ARRAY,...r))]}function Ot(t,e){return f.genMulti(f.DELIMITERS_OBJECT,...t.map(n=>[...At(n,e),": ",...be(n.values,e)]))}function At({key:t,modifier:e,runtimeCamelize:n,handler:r,handlerModifiers:s},a){const{helper:o}=a,i=s?s.map(E.capitalize).join(""):"";if(t.isStatic){const l=(r?E.toHandlerKey(t.content):t.content)+i;return[[$.isSimpleIdentifier(l)?l:JSON.stringify(l),-2,t.loc]]}let c=_(t,a);return n&&(c=f.genCall(o("camelize"),c)),r&&(c=f.genCall(o("toHandlerKey"),c)),["[",e&&`${JSON.stringify(e)} + `,...c,i?` + ${JSON.stringify(i)}`:void 0,"]"]}function be(t,e){return t.length===1?_(t[0],e):f.genMulti(f.DELIMITERS_ARRAY,...t.map(n=>_(n,e)))}function pr(t,e,n){const r=t.toUpperCase();return n?n==="."?kt(e,r)||Z.setDOMProp:Z.setAttr:kt(e,r)||(/aria[A-Z]/.test(e)?Z.setDOMProp:E.isSVGTag(t)||E.shouldSetAsAttr(r,e)||e.includes("-")?Z.setAttr:Z.setProp)}function kt(t,e){if(t==="value"&&E.canSetValueDirectly(e))return Z.setValue;if(t==="class")return Z.setClass;if(t==="style")return Z.setStyle;if(t==="innerHTML")return Z.setHtml;if(t==="textContent")return Z.setText}function Ue(t){switch(t){case"setClass":return"setSharedDataClass";case"setStyle":return"setSharedDataStyle";case"setText":case"setHtml":case"setValue":case"setAttr":case"setProp":case"setDOMProp":return"setSharedDataAttr";case"setDynamicProps":return"setSharedDataDynamicProps";default:const e=t;throw new Error(`Unhandled operation type in genOperation: ${e}`)}}const Mt="_setTemplateRef";function dr(t,e){let n=f.genCall(Mt,`n${t.element}`,hr(t.value,e),t.effect?`r${t.element}`:t.refFor?"void 0":void 0,t.refFor&&"true");return t.value.sharedData&&(n=f.genCall(e.helper("setSharedDataTemplateRef"),e.sharedDataVar,JSON.stringify(t.value.sharedData.ident),[`(n${t.element}: number) => {`,...n,"}"])),[f.NEWLINE,t.effect&&`r${t.element} = `,...n]}function fr(t){return[f.NEWLINE,`let r${t.id}: any | null`]}function hr(t,e){if(t&&e.options.inline){const n=e.options.bindingMetadata[t.content];if(n==="setup-let"||n==="setup-ref"||n==="setup-maybe-ref")return[t.content]}return _(t,e)}function mr(t,e){const{helper:n}=e,{values:r}=t,[s,a]=f.buildCodeFragment(),o=new Set;return r.filter(i=>{var c;return(c=i.sharedData)==null?void 0:c.ident}).forEach(i=>{const c=i.sharedData.ident;o.has(c)||(o.add(c),a(f.NEWLINE,...f.genCall(n("setSharedData"),e.sharedDataVar,JSON.stringify(i.sharedData.ident),f.genCall(e.helper("toDisplayString"),_(i,e)))))}),s}function gr(t,e){return[]}function yr({dir:{exp:t}},e){return t?[f.NEWLINE,...f.genCall(e.helper("renderSharedDataEffect"),["() => { ",...f.genCall(e.helper("setSharedData"),e.sharedDataVar,JSON.stringify(t.sharedData.ident),f.genCall(e.helper("toSharedDataBoolean"),_(t,e)))," }"])]:[]}function Er(t,e){const{dir:{exp:n,modifiers:r}}=t,s=n.sharedData;return[f.NEWLINE,...f.genCall(e.helper("setSharedDataEvent"),e.sharedDataVar,JSON.stringify(s.vModel.eventIdent),f.genCall(e.helper("setSharedDataModel"),e.sharedDataVar,JSON.stringify(s.ident),["() => (",..._(n,e),")"],Vt(n,e),r.length?`{ ${r.map(a=>a.content+": true").join(",")} }`:void 0))]}function Vt(t,e){return[`${e.options.isTS?"(_value: any)":"_value"} => (`,..._(t,e,"_value"),")"]}function $r(t,e){switch(t.name){case"show":return yr(t,e);case"model":return Er(t,e);default:return[]}}function Sr(t){return t.map(e=>`${$.isSimpleIdentifier(e)?e:JSON.stringify(e)}: true`).join(", ")}function Nr(t,e){const{helper:n}=e,r=g(),{root:s,props:a,slots:o,sharedData:i}=t,c=Ir(o,e),[l,u]=Tr(a,e),p=e.withId(()=>Rt(a,e),l),d=u.reduce((S,{name:w,value:D})=>{const P=je(e,D,void 0,!1);return[...S,`const ${w} = `,...P,f.NEWLINE]},[]),h=t.dynamic&&!t.dynamic.isStatic,m=t.asset;return[f.NEWLINE,...d,`const n${t.id} = `,...f.genCall(n(h?"createSharedDataDynamicComponent":m?"createSharedDataComponentWithFallback":"createSharedDataComponent"),r,p,c,s?"true":!1),f.NEWLINE,...f.genCall(n("setSharedData"),e.sharedDataVar,JSON.stringify(i.ident),[`n${t.id}`,m?"?.sharedData":".sharedData"])];function g(){return t.dynamic?t.dynamic.isStatic?f.genCall(n("resolveDynamicComponent"),_(t.dynamic,e)):["() => (",..._(t.dynamic,e),")"]:t.asset?$.toValidAssetId(t.tag,"component"):_(E.extend($.createSimpleExpression(t.tag,!1),{ast:null}),e)}}function vr(t,e){const{seenInlineHandlerNames:n}=t;e=We(e);const r=n[e]||0;return n[e]=r+1,r===0?e:`${e}${r}`}function Tr(t,e){const n=Object.create(null),r=[],s=t[0];if(E.isArray(s))for(let a=0;a<s.length;a++){const o=s[a];o.handler&&o.values.forEach((i,c)=>{if(!$.isMemberExpression(i,e.options)){const l=vr(e,`_on_${o.key.content}`);r.push({name:l,value:i}),n[l]=null,o.values[c]=E.extend({ast:null},$.createSimpleExpression(l))}})}return[n,r]}function Rt(t,e){const n=t[0];if(E.isArray(n))return!n.length&&t.length===1?void 0:Je(n,e,Lt(t.slice(1),e));if(t.length)return Je([],e,Lt(t,e))}function Je(t,e,n){const r=t.map(s=>Ft(s,e,!0));return n&&r.push(["$: ",...n]),f.genMulti(r.length>1?f.DELIMITERS_OBJECT_NEWLINE:f.DELIMITERS_OBJECT,...r)}function Lt(t,e){const{helper:n}=e,r=[];for(const s of t){let a;if(E.isArray(s)){s.length&&r.push(Je(s,e));continue}else s.kind===1?a=f.genMulti(f.DELIMITERS_OBJECT,Ft(s,e)):(a=_(s.value,e),s.handler&&(a=f.genCall(n("toHandlers"),a)));r.push(["() => (",...a,")"])}if(r.length)return f.genMulti(f.DELIMITERS_ARRAY_NEWLINE,...r)}function Ft(t,e,n){const r=be(t.values,e);return[...At(t,e),": ",...t.handler?je(e,t.values[0],void 0,!0):n?["() => (",...r,")"]:r,...t.model?[...Dr(t,e),..._r(t,e)]:[]]}function Dr(t,e){const n=t.key.isStatic?[JSON.stringify(`onUpdate:${E.camelize(t.key.content)}`)]:['["onUpdate:" + ',..._(t.key,e),"]"],r=Vt(t.values[0],e);return[",",f.NEWLINE,...n,": () => ",...r]}function _r(t,e){const{key:n,modelModifiers:r}=t;if(!r||!r.length)return[];const s=n.isStatic?n.content==="modelValue"?["modelModifiers"]:[`${n.content}Modifiers`]:["[",..._(n,e),' + "Modifiers"]'],a=Sr(r);return[",",f.NEWLINE,...s,`: () => ({ ${a} })`]}function Ir(t,e){if(!t.length)return;const n=t[0];return n.slotType===0?Be(n,e,t.length>1?t.slice(1):void 0):Be({slots:{}},e,t)}function Be({slots:t},e,n){const r=Object.keys(t).map(s=>[`${JSON.stringify(s)}: `,...Ge(t[s],e)]);return n&&r.push(["$: ",...xr(n,e)]),f.genMulti(f.DELIMITERS_OBJECT_NEWLINE,...r)}function xr(t,e){return f.genMulti(f.DELIMITERS_ARRAY_NEWLINE,...t.map(n=>n.slotType===0?Be(n,e):n.slotType===4?n.slots.content:Ke(n,e,!0)))}function Ke(t,e,n=!1){let r;switch(t.slotType){case 1:r=br(t,e);break;case 2:r=Cr(t,e);break;case 3:r=wr(t,e);break}return n?["() => (",...r,")"]:r}function br(t,e){const{name:n,fn:r}=t;return f.genMulti(f.DELIMITERS_OBJECT_NEWLINE,["name: ",..._t(n,e,e.helper("toDisplayString"))],["fn: ",...Ge(r,e)])}function Cr(t,e){e.enterVFor();const{name:n,fn:r,loop:s}=t,{value:a,key:o,index:i,source:c}=s,l=a&&a.content,u=o&&o.content,p=i&&i.content,d={};l&&(d[l]=l),u&&(d[u]=u),p&&(d[p]=p);const h=f.genMulti(f.DELIMITERS_OBJECT_NEWLINE,["name: ",...e.withId(()=>{if(!n.sharedData)return _(n,e);const m=e.enterBlock(r),g=_t(n,e,e.helper("toDisplayString"));return m(),g},d)],["fn: ",...e.withId(()=>Ge(r,e),d)]);return[...f.genCall(e.helper("createSharedDataForSlots"),f.genCall(e.helper("setSharedData"),e.sharedDataVar,JSON.stringify(c.sharedData.ident),bt(e)),_(c,e),[...f.genMulti(["(",")",", "],e.sharedDataVForVar,l||(u||p?"_":void 0),u||(p?"__":void 0),p)," => (",...h,")"])]}function wr(t,e){const{condition:n,positive:r,negative:s}=t;return[...wt(n,e),f.INDENT_START,f.NEWLINE,"? ",...Ke(r,e),f.NEWLINE,": ",...s?[...Ke(s,e)]:["void 0"],f.INDENT_END]}function Ge(t,e){let n=!1,r,s,a,o;const{props:i}=t,c=new Set;i&&(r=i.content,(n=!!i.ast)?([o,a]=e.enterScope(),s=`_slotProps${o}`,$.walkIdentifiers(i.ast,(p,d,h,m,g)=>{g&&c.add(p.name)},!0)):c.add(s=r));const l={};c.forEach(p=>l[p]=n?`${s}[${JSON.stringify(p)}]`:null);const u=e.withId(()=>Ce(t,e,[s]),l);return a&&a(),u}function Pr(t,e){const{helper:n}=e,{name:r,fallback:s}=t,[a,o]=f.buildCodeFragment(),i=r.sharedData?["() => (",...f.genCall(e.helper("setSharedData"),e.sharedDataVar,JSON.stringify(r.sharedData.ident),_(r,e)),")"]:_(r,e);let c;return s&&(c=Ce(s,e)),o(f.NEWLINE,...f.genCall(n("createSharedDataSlot"),i,Rt(t.props,e)||"null",c)),a}function Wt(t,e){const[n,r]=f.buildCodeFragment();for(const s of t)r(...jt(s,e));return n}function jt(t,e){const[n,r]=f.buildCodeFragment();return r(...Ye(t,e)),n}function Ye(t,e){switch(t.type){case 2:return cr(t,e);case 3:return ur(t,e);case 4:return mr(t,e);case 5:return tr(t,e);case 6:return nr(t,e);case 7:return ir(t,e);case 8:return dr(t,e);case 9:return Kn(t,e);case 10:return Gn(t,e);case 15:return Ct(t,e);case 16:return sr(t,e);case 11:return Nr(t,e);case 14:return fr(t);case 12:return Pr(t,e);case 13:return $r(t,e);case 17:return gr();default:const n=t;throw new Error(`Unhandled operation type in genOperation: ${n}`)}}function Or(t,e,n){const{helper:r}=e,s=t.flatMap(h=>h.expressions),[a,o,i]=f.buildCodeFragment(),c=n===void 0;let l=0;const{ids:u,frag:p,varNames:d}=Hn(e,s,c);o(...p);for(let h=0;h<t.length;h++){const m=t[h];l+=m.operations.length;const g=e.withId(()=>Ar(m,e),u);h>0&&o(f.NEWLINE),a[a.length-1]===")"&&g[0]==="("&&o(";"),o(...g)}return(a.filter(h=>h===f.NEWLINE).length>1||l>1||p.length>0)&&(i("{",f.INDENT_START,f.NEWLINE),o(f.INDENT_END,f.NEWLINE,"}"),t.length||i(f.NEWLINE)),t.length&&(i(f.NEWLINE,`${r("renderSharedDataEffect")}(() => `),o(")")),!c&&d.length&&i(f.NEWLINE,"let ",d.join(", ")),n&&o(...e.withId(n,u)),a}function Ar({operations:t},e){const[n,r]=f.buildCodeFragment(),s=Wt(t,e);return s.filter(a=>a===f.NEWLINE).length>1?r(...s):r(...s.filter(a=>a!==f.NEWLINE)),n}function He(t,e){const[n,r]=f.buildCodeFragment(),{operation:s}=t;return s&&r(...jt(s,e)),n}function Ut(t,e){const[n,r]=f.buildCodeFragment(),{children:s}=t;let a=0;const o=[];for(const[i,c]of s.entries()){c.flags&2&&a--;const l=c.flags&1?c.flags&4?c.anchor:c.id:void 0;if(l===void 0&&!c.hasDynamicChild){r(...He(c,e));continue}l===c.anchor&&r(...He(c,e)),o.push(c)}if(o.length)for(const i of o)r(...Ut(i,e));return n}function Ce(t,e,n=[],r){return["(",...n,") => {",f.INDENT_START,...we(t,e,r),f.INDENT_END,f.NEWLINE,"}"]}function we(t,e,n,r){const[s,a]=f.buildCodeFragment(),{dynamic:o,effect:i,operation:c}=t,l=e.enterBlock(t);if(n){for(let p of e.ir.component){const d=$.toValidAssetId(p,"component"),h=p.endsWith("__self");h&&(p=p.slice(0,-6)),a(f.NEWLINE,`const ${d} = `,...f.genCall(e.helper("resolveComponent"),JSON.stringify(p),h?"true":void 0))}u("directive","resolveDirective")}for(const p of o.children)a(...He(p,e));for(const p of o.children)a(...Ut(p,e));return a(...Wt(c,e)),a(...Or(i.filter(p=>!p.generated),e,r)),l(),s;function u(p,d){for(const h of e.ir[p])a(f.NEWLINE,`const ${$.toValidAssetId(h,p)} = `,...f.genCall(e.helper(d),JSON.stringify(h)))}}function kr(t){return!(!t||t==="string"||t==="number"||t==="boolean"||t.startsWith("Array<"))}function Q(t,e){return{valueCode:t,setterCode:e}}function ze(t,e){return{error:t,valueCode:"",setterCode:""}}function Ne(t,e,n){return t.type=e,t.options=n,t}function Mr(t,e){return Ne(n=>{const r=n+"";if(t.values&&!t.values.includes(r))return ze(`Invalid enum value: ${r}. Expected one of: ${t.values.join(", ")}`);const s=e(E.capitalize(E.camelize(r)));return t.property?Q(s,`${t.name} = ${s}`):Q(s,`${t.name}(${s})`)},"enum",t)}function Vr(t,e){return Nt(t)?n=>`UTSCPP.propertyAccess(${e}, "::", "${E.capitalize(E.camelize(n+""))}")`:n=>`${e}.${E.capitalize(E.camelize(n+""))}`}const Rr=["number"];function Lr(t){return!!(t&&Rr.includes(t))}function Fr(t){return Ne(e=>{const n=parseFloat(String(e));return isNaN(n)?ze(`Invalid number value: ${e}`):t.property?Q(`${n}`,`${t.name} = ${n}`):Q(`${n}`,`${t.name}(${n})`)},"number",t)}const Wr=["string"];function jr(t){return!!(t&&Wr.includes(t))}function Ur(t){return Ne(e=>t.property?Q(`"${e}"`,`${t.name} = "${e}"`):Q(`"${e}"`,`${t.name}("${e}")`),"string",t)}var Jt={global:{description:"\u5168\u5C40\u914D\u7F6E\uFF0C\u6240\u6709\u7EC4\u4EF6\u90FD\u652F\u6301\u7684\u5185\u5BB9",classes:{dom:"UniElement",nv:"UniNativeBaseView"},attributes:{id:{type:"string",description:"\u7EC4\u4EF6\u7684\u552F\u4E00\u6807\u8BC6",uniPlatform:{app:{"dom-c":{propertyName:"id"}},"app-android":{"dom-kt":{propertyName:"id"}}}},class:{type:"Array<string>",description:"class\u5C5E\u6027\u503C(class name)\u7684\u96C6\u5408\uFF0C\u652F\u6301vue\u6846\u67B6\u5B9E\u73B0class\u5C5E\u6027",uniPlatform:{app:{"dom-c":{propertyName:"classList"}},"app-android":{"dom-kt":{propertyName:"classList"}}}},"data-*":{description:"\u81EA\u5B9A\u4E49\u6570\u636E\u5C5E\u6027\uFF0C\u9700\u8981\u5BF9\u5C5E\u6027\u540D\u79F0\u505A\u8F6C\u6362\uFF0C\u8FD0\u884C\u671F\u5728runtime\u5C42\u7EDF\u4E00\u5B9E\u73B0\uFF1B\u7F16\u8BD1\u5668\u652F\u6301\u5C5E\u6027\u540D\u79F0\u8F6C\u6362\u7684\u8BDD\u76F4\u63A5\u64CD\u4F5C\u5C5E\u6027",uniPlatform:{app:{"dom-c":{propertyName:"dataset",setter:"setAttributeDataset"}},"app-android":{"dom-kt":{propertyName:"dataset",setter:"setAttributeDataset"}}}}}},view:{classes:{dom:"UniViewElement",nv:"UniNativeView"},attributes:{"hover-class":{type:"string",description:"\u6309\u4E0B\u53BB\u7684\u6837\u5F0F\u7C7B\uFF0C\u9700\u8981\u6846\u67B6\u8F6C\u6362\u4E3A\u6837\u5F0F\u5217\u8868hoverStyles",uniPlatform:{app:{"dom-c":{setter:"setHoverStyles"}},"app-android":{"dom-kt":{setter:"setHoverStyles"}}}},"hover-stop-propagation":{type:"boolean",description:"\u662F\u5426\u963B\u6B62\u672C\u8282\u70B9\u7684\u7956\u5148\u8282\u70B9\u51FA\u73B0\u70B9\u51FB\u6001",uniPlatform:{app:{"nv-c":{setter:"hoverStopPropagation"}},"app-android":{"nv-kt":{setter:"hoverStopPropagation"}}}},"hover-start-time":{type:"number",description:"\u6309\u4F4F\u540E\u591A\u4E45\u51FA\u73B0\u70B9\u51FB\u6001",uniPlatform:{app:{"nv-c":{setter:"hoverStartTime"}},"app-android":{"nv-kt":{setter:"hoverStartTime"}}}},"hover-stay-time":{type:"number",description:"\u6309\u4F4F\u540E\u591A\u4E45\u51FA\u73B0\u70B9\u51FB\u6001",uniPlatform:{app:{"nv-c":{setter:"hoverStayTime"}},"app-android":{"nv-kt":{setter:"hoverStayTime"}}}}}},text:{classes:{dom:"UniTextElement",nv:"UniNativeTextView"},attributes:{"user-select":{type:"boolean",description:"\u6587\u672C\u662F\u5426\u53EF\u9009",uniPlatform:{app:{"nv-c":{setter:"userSelect"}},"app-android":{"nv-kt":{setter:"userSelect"}}}}}},image:{classes:{dom:"UniImageElement",nv:"UniNativeImageView"},attributes:{src:{type:"string",description:"\u56FE\u7247\u8D44\u6E90\u5730\u5740",uniPlatform:{app:{"nv-c":{setter:"src"},"dom-c":{setter:"setSrc"}},"app-android":{"nv-kt":{setter:"src"},"dom-c":{setter:"setSrc"}}}},mode:{type:"UniImageModeType",defaultValue:"scaleToFill",values:["scaleToFill","aspectFit","aspectFill","widthFix","heightFix","top","bottom","center","left","right","topLeft","topRight","bottomLeft","bottomRight"],description:"\u56FE\u7247\u88C1\u526A\u3001\u7F29\u653E\u7684\u6A21\u5F0F",uniPlatform:{app:{"nv-c":{setter:"mode"},"dom-c":{setter:"setMode"}},"app-android":{"nv-kt":{setter:"mode"},"dom-c":{setter:"setMode"}}}},"lazy-load":{type:"boolean",description:"\u662F\u5426\u61D2\u52A0\u8F7D\u56FE\u7247",uniPlatform:{app:{"nv-c":{setter:"lazyLoad"}},"app-android":{"nv-kt":{setter:"lazyLoad"}}}},"fade-show":{type:"boolean",description:"\u662F\u5426\u663E\u793A\u52A8\u753B\u6548\u679C",uniPlatform:{app:{"nv-c":{setter:"fadeShow"}},"app-android":{"nv-kt":{setter:"fadeShow"}}}}}},"scroll-view":{classes:{dom:"UniScrollViewElement",nv:"UniNativeScrollView"},attributes:{direction:{type:"UniNativeScrollViewDirectionType",defaultValue:"vertical",values:["none","vertical","horizontal","all"],description:"\u6EDA\u52A8\u65B9\u5411\uFF0C\u53EF\u53D6\u503C none\u3001all\u3001horizontal\u3001vertical\uFF0C\u9ED8\u8BA4\u503Cvertical",uniPlatform:{app:{"nv-c":{setter:"direction"}}}},"enable-back-to-top":{type:"boolean",description:"\u70B9\u51FB\u9876\u90E8\u72B6\u6001\u680F\u6EDA\u52A8\u6761\u8FD4\u56DE\u9876\u90E8\uFF0C\u53EA\u652F\u6301\u7AD6\u5411",uniPlatform:{app:{"nv-c":{setter:"enableBackToTop"}}}},bounces:{type:"boolean",description:"\u63A7\u5236\u662F\u5426\u56DE\u5F39\u6548\u679C",uniPlatform:{app:{"nv-c":{setter:"bounces"}}}},"upper-threshold":{type:"number",description:"\u8DDD\u9876\u90E8/\u5DE6\u8FB9\u591A\u8FDC\u65F6\uFF08\u5355\u4F4Dpx\uFF09\uFF0C\u89E6\u53D1 scrolltoupper \u4E8B\u4EF6",uniPlatform:{app:{"nv-c":{setter:"upperThreshold"}}}},"lower-threshold":{type:"number",description:"\u8DDD\u5E95\u90E8/\u53F3\u8FB9\u591A\u8FDC\u65F6\uFF08\u5355\u4F4Dpx\uFF09\uFF0C\u89E6\u53D1 scrolltolower \u4E8B\u4EF6",uniPlatform:{app:{"nv-c":{setter:"lowerThreshold"}}}},"scroll-top":{type:"number",description:"\u8BBE\u7F6E\u7AD6\u5411\u6EDA\u52A8\u6761\u4F4D\u7F6E",uniPlatform:{app:{"nv-c":{setter:"scrollTop"}}}},"scroll-left":{type:"number",description:"\u8BBE\u7F6E\u6A2A\u5411\u6EDA\u52A8\u6761\u4F4D\u7F6E",uniPlatform:{app:{"nv-c":{setter:"scrollLeft"}}}},"scroll-with-animation":{type:"boolean",description:"\u662F\u5426\u5728\u8BBE\u7F6E\u6EDA\u52A8\u6761\u4F4D\u7F6E\u65F6\u4F7F\u7528\u6EDA\u52A8\u52A8\u753B\uFF0C\u8BBE\u7F6Efalse\u6CA1\u6709\u6EDA\u52A8\u52A8\u753B",uniPlatform:{app:{"nv-c":{setter:"scrollWithAnimation"}}}},"refresher-enabled":{type:"boolean",description:"\u5F00\u542F\u4E0B\u62C9\u5237\u65B0\uFF0C\u6682\u65F6\u4E0D\u652F\u6301scroll-x = true\u6A2A\u5411\u5237\u65B0",uniPlatform:{app:{"nv-c":{setter:"refresherEnabled"}}}},"refresher-threshold":{type:"number",description:"\u8BBE\u7F6E\u4E0B\u62C9\u5237\u65B0\u9608\u503C",uniPlatform:{app:{"nv-c":{setter:"refresherThreshold"}}}},"refresher-max-drag-distance":{type:"number",description:"\u8BBE\u7F6E\u4E0B\u62C9\u6700\u5927\u62D6\u62FD\u8DDD\u79BB\uFF08\u5355\u4F4Dpx\uFF09\uFF0C\u9ED8\u8BA4\u662F\u4E0B\u62C9\u5237\u65B0\u63A7\u4EF6\u9AD8\u5EA6\u76842.5\u500D",uniPlatform:{app:{"nv-c":{setter:"refresherMaxDragDistance"}}}},"refresher-background":{type:"string",description:"\u8BBE\u7F6E\u4E0B\u62C9\u5237\u65B0\u533A\u57DF\u80CC\u666F\u989C\u8272\uFF0C\u9ED8\u8BA4\u900F\u660E",uniPlatform:{app:{"nv-c":{setter:"refresherBackground"}}}},"refresher-triggered":{type:"boolean",description:"\u8BBE\u7F6E\u5F53\u524D\u4E0B\u62C9\u5237\u65B0\u72B6\u6001\uFF0Ctrue \u8868\u793A\u4E0B\u62C9\u5237\u65B0\u5DF2\u7ECF\u88AB\u89E6\u53D1\uFF0Cfalse \u8868\u793A\u4E0B\u62C9\u5237\u65B0\u672A\u88AB\u89E6\u53D1",uniPlatform:{app:{"nv-c":{setter:"refresherTriggered"}}}}}}};const Xe=new Map;function Bt(t){if(Xe.has(t))return Xe.get(t);const e={},n=Jt,r=Kt(t,n.global.attributes);return Object.keys(n).forEach(s=>{if(s!=="global"){const a=Kt(t,n[s].attributes);e[s]=E.extend({},r,a)}}),Xe.set(t,e),e}function Kt(t,e){const n={};return Object.keys(e).forEach(r=>{const s=e[r];if(s.uniPlatform[t]||s.uniPlatform.app){const a=s.type;if(a)switch(a){case"string":n[r]="string";break;case"number":n[r]="number";break;case"boolean":n[r]="boolean";break;case"UniNativeColor":n[r]="color";break;case"Array<string>":n[r]="Array<string>";break;default:n[r]="enum";break}}}),n}function Jr(t,e){const n={},r=Jt,s=Gt(t,e,r.global.attributes);return Object.keys(r).forEach(a=>{if(a!=="global"){const o=Gt(t,e,r[a].attributes,r[a].classes[e.split("-")[0]]);n[a]={...s,...o}}}),n}function Gt(t,e,n,r){const s={};return Object.keys(n).forEach(a=>{const o=n[a];let i;const c=o.uniPlatform[t]||o.uniPlatform.app;if(c){const l=c[e];if(l){const{type:u,propertyName:p,setter:d}=l;i={type:u||o.type,property:!!p,name:p||d,values:o.values,className:r}}}s[a]=i}),s}const Br=["boolean"];function Kr(t){return!!(t&&Br.includes(t))}function Gr(t){return Ne(e=>t.property?Q("true",`${t.name} = true`):Q("true",`${t.name}(true)`),"boolean",t)}const Yr=["UniNativeColor"];function Hr(t){return!!(t&&Yr.includes(t))}function zr(t){return Ne(e=>{const n=Xr(String(e));return n?t.property?Q(n,`${t.name} = ${n}`):Q(n,`${t.name}(${n})`):ze(`Invalid color value: ${e}`)},"color",t)}function Xr(t){const e=$n(t);if(e.isValid()){const n=e.toHex8();return"0x"+(n.slice(6,8)+n.slice(0,6))}}const qe=new Map;function qr(t,e){return`${t}:${e}`}function Yt(t,e){const n=qr(t,e);if(qe.has(n))return qe.get(n);const r={},s=Jr(t,e);return Object.keys(s).forEach(o=>{const i=s[o],c={};Object.keys(i).forEach(l=>{const u=i[l];let p;u&&(p=a(u)),c[l]=p}),r[o]=c}),qe.set(n,r),r;function a(o){const i=o.type;if(Lr(i))return Fr(o);if(jr(i))return Ur(o);if(Kr(i))return Gr(o);if(Hr(i))return zr(o);if(i)return Mr(o,Vr(e,i))}}function Zr(t){const e=Bt(t);return(n,r)=>{if(r.startsWith("data-"))return!0;const s=e[n];return s?!!s[r]:!1}}function Qr(t){return(e,n,r,s)=>{let a="";const o=[],i=Yt(t,e)[n];if(i){if(r in i){const c=i[r];if(c){const l=c(s,r);a=l.setterCode,l.error&&o.push(l.error)}}else o.push(`Property '${r}' is not supported on '<${n}>'`);return{code:a,errors:o}}}}function es(t,e){const n=Yt(t,e);return(r,s)=>{var a;const o=n[r];if(o&&s in o)return(a=o[s])==null?void 0:a.options}}function ts(t){const e=Bt(t);return(n,r)=>{const s=e[n];if(s)return s[r]}}class ns extends vt{constructor(e,n){super(),this.ir=e,this.helpers=new Set([]),this.helper=s=>(this.helpers.add(s),`_${s}`),this.delegates=new Set,this.identifiers=Object.create(null),this.seenInlineHandlerNames=Object.create(null),this.scopeLevel=0;const r={root:"",mode:"module",platform:"app-harmony",prefixIdentifiers:!0,sourceMap:!1,filename:"template.vue.html",relativeFilename:"",scopeId:null,runtimeGlobalName:"Vue",runtimeModuleName:"vue",ssrRuntimeModuleName:"vue/server-renderer",ssr:!1,isTS:!1,inSSR:!1,inline:!1,bindingMetadata:{},expressionPlugins:[],componentType:"page",className:"",onError:$.defaultOnError,onWarn:$.defaultOnWarn,onVueTemplateCompileLog:()=>{}};this.options=E.extend(r,n),this.block=e.block,this.getPropertyType=ts(n.platform)}withId(e,n){const{identifiers:r}=this,s=Object.keys(n);for(const o of s)r[o]||(r[o]=[]),r[o].unshift(n[o]||o);const a=e();return s.forEach(o=>E.remove(r[o],n[o]||o)),a}enterBlock(e){const n=this.block;return this.block=e,()=>this.block=n}enterScope(){return[this.scopeLevel++,()=>this.scopeLevel--]}get sharedDataScopeVar(){return"__sharedDataScope"}get sharedDataVForClassType(){return`\${__SHARED_DATA_CLASS_NAME_TYPE}_VFor${this.vForCount}`}}function rs(t,e){const[n,r]=f.buildCodeFragment(),s=new ns(t,e),{helpers:a}=s,{inline:o}=e;r(f.NEWLINE,"return (function renderSharedData(): UniSharedData { 'raw js'"),r(f.INDENT_START),e.componentType==="page"?(r(f.NEWLINE,`const __sharedData = useSharedDataPage<__SHARED_DATA_CLASS_NAME_TYPE>(${s.helper("useSharedDataPageId")}())`),r(f.NEWLINE,`const __sharedDataScope = ${s.helper("useSharedDataScope")}(__sharedData)`)):(r(f.NEWLINE,`const __sharedDataScope = ${s.helper("useSharedDataScope")}()`),r(f.NEWLINE,"const __sharedData = useSharedDataComponent<__SHARED_DATA_CLASS_NAME_TYPE>(__sharedDataScope)")),t.hasTemplateRef&&r(f.NEWLINE,`const ${Mt} = ${s.helper("createSharedDataTemplateRefSetter")}()`),r(...we(t.block,s,!0)),r(f.NEWLINE,"return __sharedData"),r(f.INDENT_END,f.NEWLINE),r("})()");const i=ss(s)+as(s),c=[...i].filter(p=>p===`
`).length;c&&!o&&n.unshift(...new Array(c).fill(f.LF));const[l,u]=f.codeFragmentToString(n,s);return{code:l,ast:t,preamble:i,map:u&&u.toJSON(),helpers:a}}function ss({helpers:t,options:e}){let n="";return t.size&&(n+=`import { ${[...t].map(r=>`${r} as _${r}`).join(", ")} } from '${e.runtimeModuleName}';
`),n}function as(t){return`
const __className = '${t.options.className}' as const
type __SHARED_DATA_CLASS_NAME_TYPE = \`\${typeof __className}SharedData\`
`}const y=Symbol("newline"),Ht=Symbol("line feed"),ee=Symbol("indent start"),te=Symbol("indent end");function j(...t){const e=t.push.bind(t),n=t.unshift.bind(t);return[t,e,n]}function K([t,e,n,r],...s){if(r){for(;s.length>0&&!s[s.length-1];)s.pop();s=s.map(i=>i||r)}else s=s.filter(Boolean);const a=[];o(t);for(let[i,c]of s.entries())o(c),i<s.length-1&&o(n);return o(e),a;function o(i){E.isArray(i)||(i=[i]),a.push(...i)}}const Pe=["[","]",", "],os=[["[",ee,y],[te,y,"]"],[", ",y]],Oe=[["{",ee,y],[te,y,"}"],[", ",y]];function b(t,...e){const n=E.isArray(t),r=n?t[0]:t,s=n?t[1]:"null";return[r,...K(["(",")",", ",s],...e)]}function is(t,e){const{options:{sourceMap:n}}=e,r=e.options.relativeFilename||e.options.filename;let s;n&&(s=new Sn.SourceMapGenerator,s.setSourceContent(r,e.ir.source),s._sources.add(r));let a="";const o={line:1,column:1,offset:0};let i=0;for(let l of t){if(!l)continue;if(l===y)l=[`
${"  ".repeat(i)}`,0];else if(l===ee){i++;continue}else if(l===te){i--;continue}else if(l===Ht){o.line++,o.column=0,o.offset++;continue}E.isString(l)&&(l=[l]);let[u,p=-2,d,h]=l;a+=u,s&&(d&&c(d.start,h),p===-3?$.advancePositionWithMutation(o,u):(o.offset+=u.length,p===-2?o.column+=u.length:(p===-1&&(p=u.length-1),o.line++,o.column=u.length-p)),d&&d!==$.locStub&&c(d.end))}return[a,s];function c(l,u=null){const{_names:p,_mappings:d}=s;u!==null&&!p.has(u)&&p.add(u),d.add({originalLine:l.line,originalColumn:l.column-1,generatedLine:o.line,generatedColumn:o.column-1,source:r,name:u})}}function cs({parent:t,elements:e,anchor:n},{helper:r}){let s=e.map(a=>`n${a}`).join(", ");return e.length>1&&(s=`[${s}]`),[y,...b(r("insert"),s,`n${t}`,n===void 0?void 0:`n${n}`)]}function ls(t,{helper:e}){return[y,...b(e("prepend"),`n${t.parent}`,...t.elements.map(n=>`n${n}`))]}function C(t,e,n){const{content:r,ast:s,isStatic:a,loc:o,sharedData:i}=t;if(i)return[[e.sharedDataIdent(i.ident),-2,o]];if(a)return[[JSON.stringify(r),-2,o]];if(!t.content.trim()||s===!1||f.isConstantExpression(t))return[[r,-2,o],n&&` = ${n}`];if(s===null)return zt(r,e,o,n);const c=[],l=new Map,u=[];$.walkIdentifiers(s,d=>{c.push(d),l.set(d,u.slice())},!1,u);let p=!1;if(c.length){const[d,h]=j(),m=s&&$.TS_NODE_TYPES.includes(s.type);return c.sort((g,S)=>g.start-S.start).forEach((g,S)=>{const w=g.start-1,D=g.end-1,P=c[S-1];if(!(m&&S===0)){const J=r.slice(P?P.end-1:0,w);J.length&&h([J,-3])}const M=r.slice(w,D),R=l.get(g),I=R[R.length-1];p||(p=I&&(I.type==="MemberExpression"||I.type==="OptionalMemberExpression")),h(...zt(M,e,{start:$.advancePositionWithClone(t.loc.start,M,w),end:$.advancePositionWithClone(t.loc.start,M,D),source:M},p?void 0:n,g,I,R)),S===c.length-1&&D<r.length&&!m&&h([r.slice(D),-3])}),n&&p&&h(` = ${n}`),d}else return[[r,-3,o]]}function zt(t,e,n,r,s,a,o){const{options:i,helper:c,identifiers:l}=e,{inline:u,bindingMetadata:p}=i;let d=t;const h=l[t];if(h&&h.length){const D=h[0];return E.isString(D)?a&&a.type==="ObjectProperty"&&a.shorthand?[[`${d}: ${D}`,-2,n]]:[[D,-2,n]]:C(D,e,r)}let m;$.isStaticProperty(a)&&a.shorthand&&(m=`${t}: `);const g=p&&p[t];if(u)switch(g){case"setup-let":d=t=r?`_isRef(${t}) ? (${t}.value = ${r}) : (${t} = ${r})`:w();break;case"setup-ref":d=t=S(`${t}.value`);break;case"setup-maybe-ref":const D=a&&$.isInDestructureAssignment(a,o||[]),P=a&&a.type==="AssignmentExpression"&&a.left===s,M=a&&a.type==="UpdateExpression"&&a.argument===s;t=P||M||D?d=`${t}.value`:r?`${c("isRef")}(${t}) ? (${t}.value = ${r}) : null`:w();break;case"props":t=E.genPropsAccessExp(t);break;case"props-aliased":t=E.genPropsAccessExp(p.__propsAliases[t]);break;default:t=S(t)}else us(t)&&(g==="props-aliased"?t=`$props['${p.__propsAliases[t]}']`:t=`${g==="props"?"$props":"_ctx"}.${t}`),t=S(t);return[m,[t,-2,n,d]];function S(D){return r?`${D} = ${r}`:D}function w(){return`${c("unref")}(${t})`}}function us(t){return!(E.isGloballyAllowed(t)||t==="require"||t==="$props"||t==="$emit"||t==="$attrs"||t==="$slots")}function ps(t,e,n){const{seenVariable:r,variableToExpMap:s,expToVariableMap:a,seenIdentifier:o,updatedVariable:i}=ds(e),c=fs(t,r,s,a,o,i),l=ms(t,e,c,i,a);return gs([...c,...l],t,n)}function ds(t){const e=Object.create(null),n=new Map,r=new Map,s=new Set,a=new Set,o=(i,c,l,u,p=[])=>{l&&s.add(i),e[i]=(e[i]||0)+1,n.set(i,(n.get(i)||new Set).add(c));const d=r.get(c)||[];d.push({name:i,loc:u}),r.set(c,d),p.some(h=>h.type==="UpdateExpression"||h.type==="AssignmentExpression")&&a.add(i)};for(const i of t){if(!i.ast){i.ast===null&&o(i.content,i,!0);continue}$.walkIdentifiers(i.ast,(c,l,u)=>{if(l&&Xt(l)){const p=ue(l,d=>{o(d.name,i,!0,{start:d.start,end:d.end})});o(p,i,!1,{start:l.start,end:l.end},u)}else u.some(Xt)||o(c.name,i,!0,{start:c.start,end:c.end},u)})}return{seenVariable:e,seenIdentifier:s,variableToExpMap:n,expToVariableMap:r,updatedVariable:a}}function fs(t,e,n,r,s,a){const o=[],i=new Map;for(const[c,l]of n)if(!a.has(c)&&e[c]>1&&l.size>0){const u=s.has(c),p=u?c:Ze(c);l.forEach(d=>{if(d.ast&&p!==c){const h=i.get(d)||[];h.push({name:p,locs:r.get(d).reduce((m,g)=>(g.name===c&&g.loc&&m.push(g.loc),m),[])}),i.set(d,h)}}),!o.some(d=>d.name===p)&&(!u||hs(c,r,l))&&o.push({name:p,isIdentifier:u,value:E.extend({ast:u?null:Ae(t,c)},$.createSimpleExpression(c)),rawName:c,exps:l,seenCount:e[c]})}for(const[c,l]of i)l.flatMap(({name:u,locs:p})=>p.map(({start:d,end:h})=>({start:d,end:h,name:u}))).sort((u,p)=>p.end-u.end).forEach(({start:u,end:p,name:d})=>{c.content=c.content.slice(0,u-1)+d+c.content.slice(p-1)}),c.ast=Ae(t,c.content);return o}function hs(t,e,n){const r=Array.from(n,a=>e.get(a).map(o=>o.name));if(r.every(a=>a.length===1)||r.some(a=>a.filter(o=>o===t).length>1))return!0;const s=r[0];return r.some(a=>a.length!==s.length)?!(r.some(a=>a.length>s.length&&a.every(o=>s.includes(o)))||r.some(a=>s.length>a.length&&s.every(o=>a.includes(o)))):!r.some(a=>a.some(o=>s.includes(o)))}function ms(t,e,n,r,s){const a=[],o=e.reduce((i,c)=>{const l=s.get(c).map(u=>u.name);return c.ast&&c.ast.type!=="Identifier"&&!(l&&l.some(u=>r.has(u)))&&(i[c.content]=(i[c.content]||0)+1),i},Object.create(null));return Object.entries(o).forEach(([i,c])=>{if(c>1){const l=Ze(i);if(!a.some(u=>u.name===l)){const u={};for(let d=n.length-1;d>=0;d--){const h=n[d];!h.exps||!h.seenCount||[...h.exps].every(m=>m.content===i&&h.seenCount===c)&&(u[h.name]=h.rawName,n.splice(d,1))}const p=E.extend({},e.find(d=>d.content===i));Object.keys(u).forEach(d=>{p.content=p.content.replace(d,u[d]),p.ast&&(p.ast=Ae(t,p.content))}),a.push({name:l,value:p})}e.forEach(u=>{u.content===i?(u.content=l,u.ast=null):u.content.includes(i)&&(u.content=u.content.replace(new RegExp(ys(i),"g"),l),u.ast=Ae(t,u.content))})}}),a}function gs(t,e,n){const[r,s]=j(),a=Object.create(null),o=new Set;return t.forEach(({name:i,isIdentifier:c,value:l})=>{if(c){const u=a[i]=`_${i}`;o.add(u),n&&s("const "),s(`${u} = `,...C(l,e),y)}}),t.forEach(({name:i,isIdentifier:c,value:l})=>{if(!c){const u=a[i]=`_${i}`;o.add(u),n&&s("const "),s(`${u} = `,...e.withId(()=>C(l,e),a),y)}}),{ids:a,frag:r,varNames:[...o]}}function ys(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ae(t,e){const n=t.options.expressionPlugins,r={plugins:n?[...n,"typescript"]:["typescript"]};return $e.parseExpression(`(${e})`,r)}function Ze(t){return`${t.replace(/[^a-zA-Z0-9]/g,"_").replace(/_+/g,"_").replace(/_+$/,"")}`}function ue(t,e){if(!t)return"";switch(t.type){case"Identifier":return e(t),t.name;case"StringLiteral":return t.extra?t.extra.raw:t.value;case"NumericLiteral":return t.value.toString();case"BinaryExpression":return`${ue(t.left,e)} ${t.operator} ${ue(t.right,e)}`;case"CallExpression":return`${ue(t.callee,e)}(${t.arguments.map(s=>ue(s,e)).join(", ")})`;case"MemberExpression":case"OptionalMemberExpression":const n=ue(t.object,e),r=t.computed?`[${ue(t.property,e)}]`:`.${ue(t.property,E.NOOP)}`;return`${n}${r}`;default:return""}}const Xt=t=>t.type==="MemberExpression"||t.type==="OptionalMemberExpression";function Es(t,e){if(!(e.feature&2))return[];const{element:n,key:r,keyOverride:s,modifiers:a,delegate:o,effect:i,sharedData:c}=t,l=d(),u=h(),p=`e${c.ident}${t.element}`;return[y,`const ${p} = ${e.sharedDataIdent(c.ident)}`,y,...b(e.helper(o?"delegate":"onElement"),`n${n}`,l,["(event: UniEvent) => {",`${p}(event)`,"}"],u)];function d(){const m=C(r,e);if(s){const g=JSON.stringify(s[0]),S=JSON.stringify(s[1]),w=["(",...m,")"];return[...w,` === ${g} ? ${S} : `,...w]}else return C(r,e)}function h(){let{options:m}=a;if(!(!m.length&&!i))return K(Oe,i&&["effect: true"],...m.map(g=>[`${g}: true`]))}}function $s(t,e){if(!(e.feature&2))return[];const{helper:n,sharedDataIdent:r}=e;return[y,...b(n("setElementDynamicEvents"),`n${t.element}`,r(t.event.sharedData.ident))]}function Ss(t,e,n={nonKeys:[],keys:[]},r=!1){let s=["() => {}"];if(e&&e.content.trim())if($.isMemberExpression(e,t.options))s=C(e,t),!Ts(e,t)&&!r&&(s=["e => ",...s,"(e)"]);else if($.isFnExpression(e,t.options))s=C(e,t);else{const i=e.content.includes("$event"),c=e.content.includes(";"),l=i?t.withId(()=>C(e,t),{$event:null}):C(e,t);s=[i?"$event => ":"() => ",c?"{":"(",...l,c?"}":")"]}const{keys:a,nonKeys:o}=n;return o.length&&(s=Ns(t,s,o)),a.length&&(s=vs(t,s,a)),r&&s.unshift("() => "),s}function Ns(t,e,n){return b(t.helper("withModifiers"),e,JSON.stringify(n))}function vs(t,e,n){return b(t.helper("withKeys"),e,JSON.stringify(n))}function Ts(t,e){if(t.ast===null&&e.options.bindingMetadata[t.content]==="setup-const")return!0}function Ds(t,e){const{helper:n,factoryVar:r}=e,{source:s,value:a,key:o,index:i,render:c,keyProp:l,once:u,id:p,component:d,onlyChild:h}=t;let m=null;const g=o&&o.content,S=i&&i.content,w=["() => (",...C(s,e),")"],D=Ee(),P=e.enterVFor(),[M,R]=e.enterScope(),I={},J=`_for_item${P}`;I[J]=null,D.forEach((v,T)=>{let x=`${J}.value${v?v.path:""}`;if(v)if(v.helper&&(I[v.helper]=null,x=`${v.helper}(${x}, ${v.helperArgs})`),v.dynamic){const L=I[T]=$.createSimpleExpression(x),se=e.options.expressionPlugins;L.ast=$e.parseExpression(`(${x})`,{plugins:se?[...se,"typescript"]:["typescript"]})}else I[T]=x;else I[T]=x});const G=[e.sharedDataVForItemVar],pe=`const ${e.sharedDataVForVar} = useSharedDataVFor<UniSharedData, ${e.sharedDataVForClass}>(${e.sharedDataVForItemVar})`,Y=`_for_key${P}`;G.push(`, ${Y}`),g&&(I[g]=`${Y}.value`,I[Y]=null);const B=`_for_index${P}`;G.push(`, ${B}`),S&&(I[S]=`${B}.value`,I[B]=null);const ne=e.enterBlock(c),he=ge(l,e.sharedDataVForItemVar);ne();const{selectorPatterns:F,keyOnlyBindingPatterns:me}=It(c,l,I),X=e.withId(()=>{const v=[];return v.push("(",...G,") => {",ee,y,pe,y),F.length||me.length?v.push(...Re(c,e,!1,()=>{const T=[];for(let x=0;x<F.length;x++){const{effect:L}=F[x],se=[];for(const q of L.operations)se.push(...rt(q,e));se.length&&(T.push(y,n(`render${e.helperType}Effect`),"(() => {",ee),T.push(...se),T.push(te,y,"})"))}for(const{effect:x}of me)for(const L of x.operations)T.push(...rt(L,e));return T})):v.push(...Re(c,e)),v.push(te,y,"}"),v},I);R();let re=0;return h&&(re|=1),d&&(re|=2),u&&(re|=4),[y,`const n${p} = `,...b([n(`create${e.helperType}For`),"undefined"],r,w,X,he,re?String(re):void 0,void 0)];function Ee(){const v=new Map;return a&&(m=a&&a.content,a.ast?$.walkIdentifiers(a.ast,(T,x,L,se,q)=>{if(q){let H="",ae=!1,de,oe;for(let A=0;A<L.length;A++){const O=L[A],k=L[A+1]||T;if(O.type==="ObjectProperty"&&O.value===k)O.key.type==="StringLiteral"?H+=`[${JSON.stringify(O.key.value)}]`:O.computed?(ae=!0,H+=`[${a.content.slice(O.key.start-1,O.key.end-1)}]`):H+=`.${O.key.name}`;else if(O.type==="ArrayPattern"){const z=O.elements.indexOf(k);k.type==="RestElement"?H+=`.slice(${z})`:H+=`[${z}]`}else O.type==="ObjectPattern"&&k.type==="RestElement"&&(de=e.helper("getRestElement"),oe="["+O.properties.filter(z=>z.type==="ObjectProperty").map(z=>z.key.type==="StringLiteral"?JSON.stringify(z.key.value):z.computed?(ae=!0,a.content.slice(z.key.start-1,z.key.end-1)):JSON.stringify(z.key.name)).join(", ")+"]");k.type==="AssignmentPattern"&&(O.type==="ObjectProperty"||O.type==="ArrayPattern")&&(ae=!0,de=e.helper("getDefaultValue"),oe=a.content.slice(k.right.start-1,k.right.end-1))}v.set(T.name,{path:H,dynamic:ae,helper:de,helperArgs:oe})}},!0):v.set(m,null)),v}function ge(v,T){if(!v)return!1;const x=e.withId(()=>C(v,e),N());return[...K(["(",")",", "],T,"_","__")," => {",y,pe,y,"return ",...x,"}"]}function N(){const v={};return g&&(v[g]=null),S&&(v[S]=null),D.forEach((T,x)=>v[x]=null),v}}function _s(t,e){const{helper:n}=e,{value:r,element:s}=t;return[y,...b(n("setHtml"),`n${s}`,C(r,e))]}function qt(t,e,n=!1){const{helper:r,factoryVar:s}=e,{condition:a,positive:o,negative:i,once:c}=t,[l,u]=j(),p=["() => (",...Is(a,e),")"];let d=Ve(o,e),h=!1;return i&&(i.type===1?h=Ve(i,e):h=["() => ",...qt(i,e,!0)]),n||u(y,`const n${t.id} = `),u(...b(r(`create${e.helperType}If`),s,p,d,h,c&&"true")),l}function Is(t,e){return t.sharedData?C(t,e):[JSON.stringify(_e(t))]}function xs(t,e){const{helper:n}=e,{prop:{key:r,values:s,sharedData:a},tag:o}=t,i=r.content;if(!["class","style"].includes(i)){const l=e.getPropertyOptions(o,i);if(!l)return[];const{name:u,property:p,className:d}=l,[h,m]=j();m(y);const g=d?`;${e.genCastCode([`n${t.element}`],d,{dereference:!0}).join("")}`:`n${t.element}`;return m(p?`${g}.${u} = `:`${g}.${u}(`),m(...a?Zt(l,[e.sharedDataIdent(a.ident)],e):Zt(l,Qt(s,e),e)),p||m(")"),h}if(e.options.renderer==="nativeView")return[];const c=[`n${t.element}`,!1];if(a)c.push(e.sharedDataIdent(a.ident));else if(i==="class"&&s.length===1&&s[0].isStatic){const l=s[0].content;c.push(JSON.stringify(l.split(/\s+/).map(u=>u)))}else c.push(Qt(s,e));return[y,...b([n(i==="class"?"setElementClass":"setElementStyle"),null],...c)]}function Zt(t,e,n){return kr(t.type)?n.genCastCode(e,t.type):e}function bs(t,e){const{helper:n,sharedDataIdent:r}=e;return[y,...b(n(`set${e.helperType}DynamicProps`),`n${t.element}`,r(t.sharedData.ident))]}function Qt(t,e){return t.length===1?C(t[0],e):K(Pe,...t.map(n=>C(n,e)))}function Cs(t,e){return t.value.sharedData?[y,e.sharedDataIdent(t.value.sharedData.ident)+`(n${t.element}.getNodeId())`]:[]}function ws(t){return[]}function Ps(t,e){if(!(e.feature&1))return[];const{helper:n}=e,{element:r,values:s,generated:a}=t,o=Os(s,e);return[y,...b(n("setElementText"),`${a?"x":"n"}${r}`,o)]}function Os(t,e){return t.flatMap((n,r)=>{let s=C(n,e);return r>0&&s.unshift(" + "),s})}function As(t,e){return e.feature&1?[y,`const x${t.parent} = ${e.helper(`child${e.helperType}`)}(n${t.parent})`]:[]}function ks(t,e){return e.feature&8?[y,...b(e.helper("applyElementVShow"),`n${t.element}`,["() => (",...C(t.dir.exp,e),")"])]:[]}const Ms={text:"applyElementTextModel",dynamic:"applyElementDynamicModel"};function Vs(t,e){if(!(e.feature&4))return[];const{modelType:n,element:r,dir:{exp:s,modifiers:a}}=t;return[y,...b(e.helper(Ms[n]),`n${r}`,["() => (",...C(s,e),")"],e.sharedDataIdent(s.sharedData.vModel.eventIdent),a.length?`{ ${a.map(o=>o.content+": true").join(",")} }`:void 0)]}function Rs(t,e){switch(t.name){case"show":return ks(t,e);case"model":return Vs(t,e);default:return[]}}function Qe(t,e){const n=Ws(t,e.block.operation);return n.length?Ls(n,e):[]}function Ls(t,e){const{helper:n}=e,r=`n${t[0].element}`,s=t.map(o),a=K(Pe,...s);return[y,...b(n("withVaporDirectives"),r,a)];function o({dir:i,name:c,asset:l}){const u=l?$.toValidAssetId(c,"directive"):C(E.extend($.createSimpleExpression(c,!1),{ast:null}),e),p=i.exp&&["() => ",...C(i.exp,e)],d=i.arg&&C(i.arg,e),h=!!i.modifiers.length&&["{ ",Fs(i.modifiers.map(m=>m.content))," }"];return K(Pe.concat("void 0"),u,p,d,h)}}function Fs(t){return t.map(e=>`${$.isSimpleIdentifier(e)?e:JSON.stringify(e)}: true`).join(", ")}function Ws(t,e){return e.filter(n=>n.type===13&&n.element===t&&!n.builtin)}function js(t,e){const{helper:n,sharedDataIdent:r}=e,{root:s,props:a,slots:o,sharedData:i}=t,c=Bs(o,e),[l,u]=Js(a,e),p=u.reduce((d,{name:h,value:m})=>{const g=Ss(e,m,void 0,!1);return[...d,`const ${h} = `,...g,y]},[]);return[y,...p,`const n${t.id} = `,...b(t.dynamic&&!t.dynamic.isStatic?n(`create${e.helperType}DynamicComponent`):t.asset?n(`create${e.helperType}ComponentWithFallback`):n(`create${e.helperType}Component`),r(i.ident),void 0,c,s?"true":!1),...Qe(t.id,e)]}function Us(t,e){const{seenInlineHandlerNames:n}=t;e=Ze(e);const r=n[e]||0;return n[e]=r+1,r===0?e:`${e}${r}`}function Js(t,e){const n=Object.create(null),r=[],s=t[0];if(E.isArray(s))for(let a=0;a<s.length;a++){const o=s[a];o.handler&&o.values.forEach((i,c)=>{if(!$.isMemberExpression(i,e.options)){const l=Us(e,`_on_${o.key.content}`);r.push({name:l,value:i}),n[l]=null,o.values[c]=E.extend({ast:null},$.createSimpleExpression(l))}})}return[n,r]}function Bs(t,e){if(!t.length)return;const n=t[0];return n.slotType===0?et(n,e,t.length>1?t.slice(1):void 0):et({slots:{}},e,t)}function et({slots:t},e,n){const r=Object.keys(t).map(s=>[`${JSON.stringify(s)}: `,...nt(t[s],e)]);return n&&r.push(["$: ",...Ks(n,e)]),K(Oe,...r)}function Ks(t,e){return K(os,...t.map(n=>n.slotType===0?et(n,e):n.slotType===4?n.slots.content:tt(n,e,!0)))}function tt(t,e,n=!1){let r;switch(t.slotType){case 1:r=Gs(t,e);break;case 2:r=Ys(t,e);break;case 3:r=Hs(t,e);break}return n?["() => (",...r,")"]:r}function Gs(t,e){const{name:n,fn:r}=t;return K(Oe,["name: ",...C(n,e)],["fn: ",...nt(r,e)])}function Ys(t,e){e.enterVFor();const{name:n,fn:r,loop:s}=t,{value:a,key:o,index:i,source:c}=s,l=a&&a.content,u=o&&o.content,p=i&&i.content,d={};l&&(d[l]=l),u&&(d[u]=u),p&&(d[p]=p);const h=K(Oe,["name: ",...e.withId(()=>{const m=e.enterBlock(r),g=C(n,e);return m(),g},d)],["fn: ",...e.withId(()=>nt(r,e),d)]);return[...b(e.helper(`create${e.helperType}ForSlots`),C(c,e),[...K(["(",")",", "],e.sharedDataVForVar,l||(u||p?"_":void 0),u||(p?"__":void 0),p)," => (",...h,")"])]}function Hs(t,e){const{condition:n,positive:r,negative:s}=t;return[...C(n,e),ee,y,"? ",...tt(r,e),y,": ",...s?[...tt(s,e)]:["void 0"],te]}function nt(t,e){let n=!1,r,s,a,o;const{props:i}=t,c=new Set;i&&(r=i.content,(n=!!i.ast)?([o,a]=e.enterScope(),s=`_slotProps${o}`,$.walkIdentifiers(i.ast,(p,d,h,m,g)=>{g&&c.add(p.name)},!0)):c.add(s=r));const l={};c.forEach(p=>l[p]=n?`${s}[${JSON.stringify(p)}]`:null);const u=e.withId(()=>Ve(t,e,[s]),l);return a&&a(),u}function zs(t,e){const{helper:n}=e,{id:r,name:s,fallback:a}=t,[o,i]=j(),c=s.isStatic?C(s,e):["() => (",...C(s,e),")"];let l;return a&&(l=Ve(a,e)),i(y,`const n${r} = `,...b(n(`create${e.helperType}Slot`),c,"null",l)),o}function en(t,e){const[n,r]=j();for(const s of t)r(...tn(s,e));return n}function tn(t,e){const[n,r]=j();return f.isBlockOperation(t)&&t.parent&&r(...Zs(t,e)),r(...rt(t,e)),n}function rt(t,e){switch(t.type){case 2:return xs(t,e);case 3:return bs(t,e);case 4:return Ps(t,e);case 5:return Es(t,e);case 6:return $s(t,e);case 7:return _s(t,e);case 8:return Cs(t,e);case 9:return cs(t,e);case 10:return ls(t,e);case 15:return qt(t,e);case 16:return Ds(t,e);case 11:return js(t,e);case 14:return ws();case 12:return zs(t,e);case 13:return Rs(t,e);case 17:return As(t,e);default:const n=t;throw new Error(`Unhandled operation type in genOperation: ${n}`)}}function Xs(t,e,n){const{helper:r}=e,s=t.flatMap(m=>m.expressions),[a,o,i]=j(),c=n===void 0;let l=0;const{ids:u,frag:p,varNames:d}=ps(e,s,c);for(let m=0;m<t.length;m++){const g=t[m];l+=g.operations.length;const S=e.withEffect(()=>e.withId(()=>qs(g,e),u));m>0&&S.length&&o(y),a[a.length-1]===")"&&S[0]==="("&&o(";"),o(...S)}const h=a.filter(m=>m===y).length;return a.length&&(h>1||l>1||p.length>0)&&(i("{",ee,y),o(te,y,"}"),t.length||i(y)),t.length&&a.length&&(i(y,`${r(`render${e.helperType}Effect`)}(() => `),o(")")),!c&&d.length&&i(y,"let ",d.join(", ")),n&&o(...e.withId(n,u)),a}function qs({operations:t},e){const[n,r]=j(),s=en(t,e);return s.filter(a=>a===y).length>1?r(...s):r(...s.filter(a=>a!==y)),n}function Zs(t,e){return[y,...b(e.helper(`set${e.helperType}InsertionState`),`n${t.parent}`,t.anchor==null?void 0:t.anchor===-1?"0":`n${t.anchor}`)]}const U={TEXT:"text",BUTTON:"button",COMMENT:"comment",ELEMENT:"element"},V={VALUE_ATTR:"value",EMPTY_STRING:"",TEXT_PLACEHOLDER:f.TEXT_PLACEHOLDER,UNKNOWN_COMMENT:"unknown",EXT_STYLE_MARKER:"ext:style"},ye={ELEMENT:"e",TEMPLATE:"t",FACTORY:"f"},nn="<!--",rn="-->",sn="<!",st=/\s/,Qs=/[\s=]/,at=/\s*\/$/;class pt{constructor(e){this.html=e,this.length=e.length,this.index=0}parse(){const e=[];for(this.index=0;this.index<this.length;)if(this.html[this.index]==="<"){const n=this.parseTag();n?(e.push(n.node),this.index=n.endIndex):this.index++}else{const n=this.parseText();n&&e.push(n)}return e}parseText(){const e=this.index,n=this.html.indexOf("<",e),r=n===-1?this.length:n;if(e===r)return null;const s=this.html.substring(e,r);return this.index=r,{type:"text",content:s}}parseTag(){return this.html.startsWith(nn,this.index)?this.parseComment():this.html.startsWith(sn,this.index)?this.parseDoctype():this.parseElement()}parseComment(){const e=this.index+nn.length,n=this.html.indexOf(rn,e);return n===-1?null:{node:{type:"comment",content:this.html.substring(e,n)},endIndex:n+rn.length}}parseDoctype(){const e=this.html.indexOf(">",this.index+sn.length);return e===-1?null:{node:{type:"comment",content:""},endIndex:e+1}}parseElement(){const e=this.html.indexOf(">",this.index);if(e===-1)return null;const n=this.html.substring(this.index+1,e),{tag:r,attrs:s,selfClosing:a}=this.parseTagContent(n);if(a)return{node:{type:"element",tag:r,attrs:s,children:[]},endIndex:e+1};const o=this.findMatchingEndTag(r,e+1);if(o===-1)return{node:{type:"element",tag:r,attrs:s,children:[]},endIndex:e+1};const i=this.html.substring(e+1,o),c=i?new pt(i).parse():[];return{node:{type:"element",tag:r,attrs:s,children:c},endIndex:o+`</${r}>`.length}}parseTagContent(e){const n=at.test(e),r=e.replace(at,"").trim();if(!r)return{tag:"",attrs:{},selfClosing:n};const s=r.search(st),a=s===-1?r:r.substring(0,s);if(s===-1)return{tag:a,attrs:{},selfClosing:n};const o=r.substring(s+1),i=this.parseAttributes(o);return{tag:a,attrs:i,selfClosing:n}}parseAttributes(e){const n={};let r=0;const s=e.length;for(;r<s&&(r=this.skipWhitespace(e,r),!(r>=s));){const a=r;for(;r<s&&!Qs.test(e[r]);)r++;if(r===a)break;const o=e.substring(a,r);if(r=this.skipWhitespace(e,r),r>=s||e[r]!=="="){this.isSpecialAttribute(o)||(n[o]=o);continue}if(r++,r=this.skipWhitespace(e,r),r>=s){this.isSpecialAttribute(o)||(n[o]="");continue}const i=this.parseAttributeValue(e,r);(!this.isSpecialAttribute(o)||i.value.trim()!=="")&&(n[o]=i.value),r=i.endIndex}return n}parseAttributeValue(e,n){const r=e[n];if(r==='"'||r==="'"){const s=n+1;let a=s;for(;a<e.length&&e[a]!==r;)a++;return{value:e.substring(s,a),endIndex:a<e.length?a+1:a}}else{const s=n;let a=s;for(;a<e.length&&!st.test(e[a]);)a++;return{value:e.substring(s,a),endIndex:a}}}isSpecialAttribute(e){return e==="id"||e==="class"||e==="style"}skipWhitespace(e,n){for(;n<e.length&&st.test(e[n]);)n++;return n}findMatchingEndTag(e,n){const r=`<${e}`,s=`</${e}>`;let a=1,o=n;for(;a>0&&o<this.length;){const i=this.html.indexOf(r,o),c=this.html.indexOf(s,o);if(c===-1)break;if(i!==-1&&i<c){const l=this.html.indexOf(">",i);if(l!==-1&&l<c){const u=this.html.substring(i+1,l);at.test(u)||a++}o=l+1}else{if(a--,a===0)return c;o=c+s.length}}return-1}}function ot(t){return!t||t.length!==1||t[0].type!==U.TEXT||t[0].content===" "?V.EMPTY_STRING:t[0].content||V.EMPTY_STRING}function it(t){return!t||Object.keys(t).length===0||Object.keys(t).length===1&&V.EXT_STYLE_MARKER in t}function an(t,e){const n=E.extend({},t);return e&&(n[V.VALUE_ATTR]=e),n}function on(t){const e="page: UniPage",n=t.options.renderer==="element"?": UniElement":": UniNativeBaseView";return{paramType:e,returnType:n}}function ct(t){return`${ye.ELEMENT}${t.templateVariableCounter++}`}function ea(t,e,n=!0){return n&&e.resetTemplateCounters(),cn(t,e)}function cn(t,e){switch(t.type){case U.TEXT:return ta(t.content||V.EMPTY_STRING,e);case U.COMMENT:return ln(t.content||V.EMPTY_STRING,e);case U.ELEMENT:return ra(t,e);default:return ln(V.UNKNOWN_COMMENT,e)}}function lt(t){return V.EMPTY_STRING===t||t===V.TEXT_PLACEHOLDER}function ta(t,e){const n=ct(e),r=[`const ${n} = ${e.genCreateTag("text")}`];return lt(t)||r.push(`${n}.setText(${JSON.stringify(t)})`),{variableName:n,statements:r}}function ln(t,e){const n=ct(e),r=[`const ${n} = ${e.genCreateTag("comment",JSON.stringify(t))}`];return{variableName:n,statements:r}}const na={[U.TEXT]:sa,[U.BUTTON]:aa};function ra(t,e){const{tag:n,attrs:r,children:s}=t,a={tag:n,attrs:r,children:s},o=na[n];return o?o(a,e):oa(a,e)}function sa(t,e){const{tag:n,attrs:r,children:s}=t;if(s&&s.some(a=>a.type===U.ELEMENT))return ke(n,e,r,s);{const a=ot(s),o=an(r,a);return ke(n,e,o,void 0)}}function aa(t,e){const n=ot(t.children),r=an(t.attrs,n);return ke(t.tag,e,r,void 0)}function oa(t,e){const{tag:n,attrs:r,children:s}=t;return ke(n,e,r,s)}function ia(t,e,n){if(!e)return;const r={};for(const[s,a]of Object.entries(e))n.options.isIgnoreAttr(t,s)||(r[s]=a);return r}function ke(t,e,n,r){const s=ct(e),a=[];a.push(`const ${s} = ${e.genCreateTag(t)}`);const o=ia(t,n,e);if(o&&!it(o)){let i=!1;V.EXT_STYLE_MARKER in o&&(i=!0,delete o[V.EXT_STYLE_MARKER]);for(const[c,l]of Object.entries(o))if(c==="value"&&t==="text")lt(l)||a.push(`${s}.setText(${JSON.stringify(l)})`);else if(c==="style"){const u=ce(e.options.platform,e.options.renderer),{obj:p,code:d}=e.options.parseStaticStyle(u,t,l,!0);if(p){const h=Object.keys(p);i&&(u==="dom-c"||u==="dom-kt"||u==="dom-oc"||u==="dom-ts")&&a.push(`${e.helper("setElementExtStyle")}(${s}, ${d})`),h.forEach(m=>{a.push(`${s}.${p[m].setterCode}`)})}}else{const u=e.options.parseStaticProp(ce(e.options.platform,e.options.renderer),t,c,l);u&&u.code&&a.push(`${s}.${u.code}`)}}if(r&&r.length>0)for(const i of r){const c=ca(i,e);if(c)a.push(e.genAppendChild(s,c));else{const l=cn(i,e);a.push(...l.statements),a.push(e.genAppendChild(s,l.variableName))}}return{variableName:s,statements:a}}function ca(t,e){switch(t.type){case U.TEXT:return!(e.feature&1)||lt(t.content)?e.genCreateTag("text"):null;case U.COMMENT:return e.genCreateTag("comment",JSON.stringify(t.content||V.EMPTY_STRING));case U.ELEMENT:const n=t;return la(n)?e.genCreateTag(n.tag):null;default:return e.genCreateTag("comment",JSON.stringify(V.UNKNOWN_COMMENT))}}function la(t){return!(!it(t.attrs)||t.children&&t.children.length>0)}function ua(t,e,n){try{if(!t||typeof t!="string")return Me(e,n);const r=new pt(t).parse();return r.length===0?Me(e,n):r.length===1?pa(r[0],e,n):Me(e,n)}catch{return Me(e,n)}}function Me(t,e){const{paramType:n,returnType:r}=on(e);return[`const ${ye.FACTORY}${t} = (${n})${r} => {`,y,`  return ${e.genCreateTag("text",JSON.stringify(V.EMPTY_STRING))}`,y,"}"]}function pa(t,e,n){const{paramType:r,returnType:s}=on(n),a=da(t,n);if(a)return[`const ${ye.FACTORY}${e} = (${r})${s} => {`,y,`  return ${a}`,y,"}"];const o=ea(t,n),i=[`const ${ye.FACTORY}${e} = (${r})${s} => {`,y];for(const c of o.statements)typeof c=="string"?i.push(`  ${c}`,y):i.push(c,y);return i.push(`  return ${o.variableName}`,y,"}"),i}function da(t,e){switch(t.type){case U.TEXT:return e.genCreateTag("text");case U.COMMENT:return e.genCreateTag("comment",JSON.stringify(t.content||V.EMPTY_STRING));case U.ELEMENT:const n=t;return fa(n)?e.genCreateTag(n.tag):null;default:return e.genCreateTag("comment",JSON.stringify(V.UNKNOWN_COMMENT))}}function fa(t){return it(t.attrs)?t.tag===U.TEXT?!ot(t.children):!t.children||t.children.length===0:!1}function ha(t,e){const n=[];for(let r=0;r<t.length;r++){const s=ua(t[r],r,e);n.push(y,...s)}return n}function ma(t,e,n){const{helper:r,options:s}=n,a=[];for(let o=0;o<t.length;o++){const i=o===e?", true":"";a.push(`const ${ye.TEMPLATE}${o} = ${r(`${s.renderer}Factory`)}(${n.factoryVar}, ${ye.FACTORY}${o}${i})`),o<t.length-1&&a.push(y)}return a}function ga(t,e,n){return ha(t,n)}function ut(t,e){const[n,r]=j(),{id:s,template:a,operation:o}=t;return s!==void 0&&a!==void 0&&(r(y,`const n${s} = t${a}()`),r(...Qe(s,e))),o&&r(...tn(o,e)),n}function un(t,e,n,r=`n${t.id}`){const{helper:s}=e,[a,o]=j(),{children:i}=t;let c=0,l;const u=[];for(const[p,d]of i.entries()){d.flags&2&&c--;const h=d.flags&1?d.flags&4?d.anchor:d.id:void 0;if(h===void 0&&!d.hasDynamicChild){o(...ut(d,e));continue}const m=Number(p)+c,g=h===void 0?`p${e.block.tempId++}`:`n${h}`;if(n(y,`const ${g} = `),l)m-l[1]===1?n(...b(s(`next${e.helperType}`),l[0])):n(...b(s(`nthChild${e.helperType}`),r,String(m)));else if(m===0)n(...b(s(`child${e.helperType}`),r));else{let S=b(s(`child${e.helperType}`),r);m===1?S=b(s(`next${e.helperType}`),S):m>1&&(S=b(s(`nthChild${e.helperType}`),r,String(m))),n(...S)}h===d.anchor&&o(...ut(d,e)),h!==void 0&&o(...Qe(h,e)),l=[g,m],u.push([d,g])}if(u.length)for(const[p,d]of u)o(...un(p,e,n,d));return a}function Ve(t,e,n=[],r){return["(",...n,") => {",ee,...Re(t,e),te,y,"}"]}function Re(t,e,n,r){const[s,a]=j(),{dynamic:o,effect:i,operation:c,returns:l}=t,u=e.enterBlock(t);for(const h of o.children)a(...ut(h,e));for(const h of o.children)a(...un(h,e,a,`n${h.id}`));a(...en(c,e)),a(...Xs(i.filter(h=>!h.generated),e,r)),a(y,"return ");const p=l.map(h=>`n${h}`),d=p.length>1?[...K(Pe,...p),` as Uni${e.helperType}Block[]`]:[p[0]||"null"];return a(...d),u(),s}const ya=15,Ea=0;function $a(t,e){return!1}function Sa(t,e){return t==="text"&&e==="value"}class Na extends vt{constructor(e,n){super(),this.ir=e,this.helpers=new Set([]),this.helper=a=>(this.helpers.add(a),`_${a}`),this.delegates=new Set,this.identifiers=Object.create(null),this.seenInlineHandlerNames=Object.create(null),this.scopeLevel=0,this.sharedDataIdent=a=>(this.effectSharedDataIdentifiers.add(a),`${this.sharedDataVar}.get_${a}(__reactivity)`),this.templateVariableCounter=0,this.templateStyleCounter=0,this.effectSharedDataIdentifiers=new Set;const r={root:"",mode:"module",platform:"app-harmony",target:"dom-c",renderer:"element",prefixIdentifiers:!0,sourceMap:!1,filename:"template.vue.html",relativeFilename:"",scopeId:null,runtimeGlobalName:"Vue",runtimeModuleName:"vue",ssrRuntimeModuleName:"vue/server-renderer",ssr:!1,isTS:!1,inSSR:!1,inline:!1,bindingMetadata:{},expressionPlugins:[],componentType:"page",className:"",parseStaticStyle:(a,o,i,c)=>({obj:{},messages:[]}),parseStaticProp:()=>{},isIgnoreAttr:()=>!1,onError:$.defaultOnError,onWarn:$.defaultOnWarn,onVueTemplateCompileLog:()=>{}};this.options=E.extend(r,n),this.block=e.block;const s=this.options.renderer==="nativeView";this.genCreateTag=s?this.genCreateNativeView:this.genCreateElement,this.genAppendChild=s?this.genAppendChildNativeView:this.genAppendChildElement,this.getPropertyOptions=es(this.options.platform,this.options.target)}withId(e,n){const{identifiers:r}=this,s=Object.keys(n);for(const o of s)r[o]||(r[o]=[]),r[o].unshift(n[o]||o);const a=e();return s.forEach(o=>E.remove(r[o],n[o]||o)),a}enterBlock(e){const n=this.block;return this.block=e,()=>this.block=n}enterScope(){return[this.scopeLevel++,()=>this.scopeLevel--]}get insVar(){return"__ins"}get insMethodName(){return`getCurrent${this.helperType}VaporComponentInstance`}get factoryVar(){return"__page"}get helperType(){return this.options.renderer==="nativeView"?"NativeView":"Element"}get sharedDataVForClass(){return`${this.options.className}SharedData_VFor${this.vForCount}`}get feature(){return this.options.renderer==="nativeView"?Ea:ya}resetTemplateCounters(){this.templateVariableCounter=0,this.templateStyleCounter=0}withEffect(e){this.effectSharedDataIdentifiers.clear();const n=e();if(this.effectSharedDataIdentifiers.size){const[r,s]=j();return s(y),s(`if(${_a(this)}) {`),s(y),s(ee),s(...n),s(te),s(y),s("}"),this.effectSharedDataIdentifiers.clear(),r}return n}genCreateNativeView(e,n,r){const s=[];n&&e!=="text"&&s.push(n),r?s.push("true"):s.push("false");const a=s.join(", ");switch(e){case"view":return`page.createNativeView(${a})`;case"text":return`page.createNativeTextView(${a})`;case"image":return`page.createNativeImageView(${a})`;case"scroll-view":return`page.createNativeScrollView(${a})`;case"native-view":return"page.createNativeCustomView()";default:throw new Error(`Invalid tag: ${e}`)}}genCreateElement(e,n,r){const s=[];n&&e!=="comment"&&s.push(n),r?s.push("true"):e!=="comment"&&s.push("false");const a=s.join(", ");switch(e){case"view":return`page.createViewElement(${a})`;case"text":return`page.createTextElement(${a})`;case"image":return`page.createImageElement(${a})`;case"comment":return`page.createComment(${a||'""'})`;case"scroll-view":return`page.createScrollViewElement(${a})`;case"native-view":return"page.createCustomViewElement()";default:return console.log(`Invalid tag: ${e}`),"page.createViewElement(false)"}}genAppendChildNativeView(e,n){return`${this.helper("appendNativeViewChild")}(${e}, ${n})`}genAppendChildElement(e,n){return`${e}.appendChild(${n})`}genCastCode(e,n,r){return Nt(this.options.target)?b(`UTSCPP.as<${n}${r!=null&&r.dereference?", '*'":""}>`,e):["(",...e,"as",n,")"]}}function pn(t,e){var n;e.renderer=(n=e.renderer)!=null?n:"element",e.isIgnoreAttr=e.renderer==="element"?$a:Sa;const[r,s]=j(),a=new Na(t,e),{helpers:o}=a,i="render"+E.capitalize(e.renderer),c=[`__sharedData: ${e.className}SharedData`,"__page: UniPage","__reactivity: VueReactivity"].join(", ");s(y,`export function ${i}(${c}): Uni${a.helperType}Block {`),s(ee);const l=s(y),u=ga(t.template,t.rootTemplateIndex,a);if(s(...u),t.template.length>0){const S=ma(t.template,t.rootTemplateIndex,a);s(y,...S)}s(...Re(t.block,a)),s(te,y),s("}"),a.helpers.has(a.insMethodName)?r.splice(l,0,`const ${a.insVar} = ${a.helper(a.insMethodName)}()!`):r.splice(l,1);const p=va(a),d=Ta(a)+p,h=[...d].filter(S=>S===`
`).length;h&&r.unshift(...new Array(h).fill(Ht));let[m,g]=is(r,a);return m=d+m,{code:m,ast:t,preamble:d,map:g&&g.toJSON(),helpers:o}}function va({delegates:t,helper:e}){return t.size?b(e("delegateEvents"),...Array.from(t).map(n=>`"${n}"`)).join("")+`
`:""}function Ta({helpers:t,helper:e,options:n}){let r="";return["getRestElement","getDefaultValue"].forEach(s=>{t.delete(s)}),t.size&&(r+=`import { ${[...t].map(s=>`${s} as _${s}`).join(", ")} } from '${n.runtimeModuleName}';
`),r}const Da=new Ie(2e3);function _a(t){return Array.from(t.effectSharedDataIdentifiers).map(e=>Ia(e,t)).join(" || ")}function Ia(t,e){const{index:n,bitValue:r}=Da.getGroupInfo(t);return`${e.sharedDataVar}._flag${n} & ${r}`}function dn(t,e){const n=new SyntaxError(t);return e&&(n.loc={start:{...e.start},end:{...e.end},source:e.source}),n}function fn(t,e){const n=dn(t,e);return n.errorType="css",n}function hn(t,e){const n=dn(t,e);return n.errorType="prop",n}function xa(t,e){const n=Ca(e),r=E.isString(t)?f.parse(t,n):t,[s,a]=ba(),{expressionPlugins:o}=n;(!o||!o.includes("typescript"))&&(n.expressionPlugins=[...o||[],"typescript"]);const i=f.transform(r,E.extend({checkStaticStyle:wa(n),checkStaticProp:Pa(n)},n,{nodeTransforms:[...s,...n.nodeTransforms||[]],directiveTransforms:E.extend({},a,n.directiveTransforms||{})}));jn(i,{platform:n.platform,bindingMetadata:n.bindingMetadata||E.EMPTY_OBJ});const c=rs(i,n),l=pn(i,{...n,target:ce(n.platform,"nativeView"),renderer:"nativeView"}),u=pn(i,{...n,target:ce(n.platform,"element"),renderer:"element"});return n.emitElement&&n.emitElement(u),n.emitNativeView&&n.emitNativeView(l),{...c,sharedData:c,nativeView:l,element:u}}function ba(){return f.getBaseTransformPreset()}function Ca(t){const e=E.extend({},t);if(e.parseStaticStyle){const n=e.parseStaticStyle,r=new Map;e.parseStaticStyle=(s,a,o)=>{const i=`${s}-${a}-${o}`;if(r.has(i))return r.get(i);const c=n(s,a,o,!0);return r.set(i,c),c}}return e.parseStaticProp=Qr(t.platform),e}function wa(t){const e=t.parseStaticStyle,n=ce(t.platform,"element"),r=ce(t.platform,"nativeView");function s(a){return a.replace("ERROR: ","").replace("WARNING: ","")}return(a,o,i,c)=>{const{messages:l}=e(n,i.tag,a,!1),{messages:u}=e(r,i.tag,a,!1);l.forEach(p=>{c.options.onWarn(fn(s(p.text),o))}),u.forEach(p=>{l.some(d=>d.text===p.text)||c.options.onWarn(fn(s(p.text),o))})}}function Pa(t){const e=t.parseStaticProp,n=ce(t.platform,"element"),r=ce(t.platform,"nativeView"),s=Zr(t.platform);return(a,o,i,c,l,u)=>{if(!a)return s(l.tag,o)?!0:(u.options.onWarn(hn(`Property '${o}' is not supported on '<${l.tag}>'`,c)),!1);const p=e(n,l.tag,o,i),d=new Set;p&&p.errors.length>0&&p.errors.forEach(m=>{d.add(m)});const h=e(r,l.tag,o,i);return h&&h.errors.length>0&&h.errors.forEach(m=>{d.add(m)}),d.size?(d.forEach(m=>{u.options.onWarn(hn(m,c))}),!1):!0}}function ve(t){return t.text||t.escapedText}function Oa(t){return t.name?ve(t.name):""}function Aa(t,e){var n;const r=t.heritageClauses;if(!r)return"";const s=r.find(o=>o.token===e.SyntaxKind.ExtendsKeyword),a=(n=s==null?void 0:s.types[0])==null?void 0:n.expression;return!a||!e.isIdentifier(a)?"":ve(a)}function Te(t,e){return t.kind===e.SyntaxKind.StringKeyword||t.kind===e.SyntaxKind.BooleanKeyword||t.kind===e.SyntaxKind.NumberKeyword||t.kind===e.SyntaxKind.UndefinedKeyword}function ka(t,e){if(!e.isPropertyDeclaration(t)||t.modifiers&&t.modifiers.length>0&&t.modifiers.some(i=>i.kind===e.SyntaxKind.ReadonlyKeyword)||!t.type)return;const n=t.name;if(!e.isIdentifier(n))return;const r=ve(n),s=t.type;if(!e.isUnionTypeNode(s))return!e.isTypeReferenceNode(s)&&!Te(s,e)&&!e.isLiteralTypeNode(s)&&!e.isArrayTypeNode(s)?void 0:{memberName:r,type:s,optional:!!t.questionToken};const a=s.types.filter(i=>i.kind!==e.SyntaxKind.UndefinedKeyword&&!(e.isLiteralTypeNode(i)&&i.literal.kind===e.SyntaxKind.NullKeyword));if(a.length!==1)return;const o=a[0];if(!(!e.isTypeReferenceNode(o)&&!Te(o,e)&&!e.isLiteralTypeNode(o)))return{memberName:r,type:o,optional:!0}}function fe(t=1,e=2){return" ".repeat(e*t)}function mn(t,e){return t.split(`
`).map(n=>fe(e)+n).join(`
`)}const gn="ARRAY_STRING",Ma=new Ie(2e3);function Va(t,e){if(e.isTypeReferenceNode(t)&&e.isIdentifier(t.typeName))switch(ve(t.typeName)){case"UniSharedDataEnum":return"uint16";case"UniSharedDataAny":return"UniSharedDataAny";case"UniSharedDataArray":return"UniSharedDataArray";case"UniSharedDataJSONObject":return"UniSharedDataJSONObject";case"UniSharedDataVFor":return"UniSharedDataVFor";case"UniSharedDataFunctionEventListener":return"UniSharedDataFunctionEventListener";case"UniSharedDataFunctionSetTemplateRef":return"UniSharedDataFunctionSetTemplateRef";case"UniElementStyles":return"UniElementStyles";case"Array":if(t.typeArguments&&t.typeArguments.length===1&&Te(t.typeArguments[0],e)&&t.typeArguments[0].kind===e.SyntaxKind.StringKeyword)return gn;default:return"UniSharedDataComponent|"+ve(t.typeName)}if(Te(t,e))switch(t.kind){case e.SyntaxKind.StringKeyword:return"string";case e.SyntaxKind.BooleanKeyword:return"bool";case e.SyntaxKind.NumberKeyword:return"double";case e.SyntaxKind.UndefinedKeyword:return"null"}if(e.isArrayTypeNode(t)&&Te(t.elementType,e)&&t.elementType.kind===e.SyntaxKind.StringKeyword)return gn;if(e.isLiteralTypeNode(t)&&t.literal.kind===e.SyntaxKind.NullKeyword)return"null"}function Ra(t,e){const n=e.ts,r=t.name,s={files:[]};if(!r)return s;const a=Oa(t);if(!a)return s;const o=Aa(t,n);if(!o)return s;const i=o==="UniSharedDataPage",c=o==="UniSharedDataComponent",l=i?"DEFINE_USER_PAGE_SHARED_DATA":c?"DEFINE_USER_COMPONENT_SHARED_DATA":"DEFINE_USER_SHARED_DATA",u="DEFINE_SHARED_DATA",p=u+"_MEMBER",d="DEFINE_SHARED_DATA_MEMBER_FLAG",h=l+"_CPP",m=h+"_INIT",g=u+"_CPP",S=g+"_INIT_MEMBER",w=g+"_MEMBER_SETTER",D=t.members;let P="",M="",R=`${l}(${a},
`,I=`${h}(${a},
`,J=fe(1)+`${m}(${a},
`,G="",pe=new Set;for(let Y=0;Y<D.length;Y++){const B=D[Y],ne=ka(B,n);if(!ne)continue;const he=ne.optional,F=ne.memberName,me=ne.type,X=Va(me,n),{index:re,bitValue:Ee}=Ma.getGroupInfo(F),ge="_flag"+re;if(pe.add(ge),!X)continue;let[N,v]=X.split("|"),T=`${p}_${N.toUpperCase()}`,x=`${w}_${N.toUpperCase()}`;(he||N==="UniSharedDataAny")&&N!=="null"&&(T+="_OR_NULL",x+="_OR_NULL"),P+=fe(1)+`${T}(${F}`,J+=fe(2)+`${S}(${F})
`,G+=fe(1)+`${x}(${a}, ${F}`,P+=`)
`,G+=`, ${ge}, ${Ee})
`}return M=Array.from(pe).map(Y=>fe(1)+`${d}(${Y})
`).join("")+`
`,J+=fe(1)+`)
`,R+=M+P+")",I+=J+G+")",(i||c)&&(I=`namespace {
${mn(`inline ${e.renderElementCode}`,1)}
${mn(`inline ${e.renderNativeViewCode}`,1)}
}
${I}`),{files:[{code:R,name:`${a}.h`,class:a},{code:I,name:`${a}.cpp`,class:a}],groupName:c||i?a:void 0}}function yn(t,e){return e.targetLanguage==="cpp"?Ra(t,e):{files:[]}}function La(t,e){const n=t.map(o=>yn(o,e)),r={name:".cpp",code:"",classes:[]},s={name:".h",code:"",classes:[]};let a="";return n.forEach(o=>{o.groupName&&(a=o.groupName),o.files.forEach(i=>{i.name.endsWith(".h")?(s.code+=(s.code?`

`:"")+i.code,s.classes.push(i.class)):i.name.endsWith(".cpp")&&(r.code+=(r.code?`

`:"")+i.code,r.classes.push(i.class))})}),a&&(s.name=`${a}.h`,r.name=`${a}.cpp`,s.code=`#pragma once
#include "sdk.h"

${s.code}`,r.code=`#include "${s.name}"

${r.code}`),{files:[r,s]}}exports.parse=$.parse,exports.COMPONENT_TYPE=Bn,exports.DOM2_APP_PLATFORM=St,exports.RENDERER_TYPE=Un,exports.TARGET_LANGUAGE=Jn,exports.TARGET_PLATFORM=St,exports.compile=xa,exports.genSharedData=La,exports.genSharedDataClass=yn;
